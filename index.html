<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"/>
<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import{getFirestore,doc,getDoc,setDoc}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
var a=initializeApp({apiKey:"AIzaSyB2vd10mZBfvZ9_NxpjzT07ih0m5cOTOgo",authDomain:"palestinske-rogaland.firebaseapp.com",projectId:"palestinske-rogaland",storageBucket:"palestinske-rogaland.firebasestorage.app",messagingSenderId:"228379992371",appId:"1:228379992371:web:56577dc6e553ef39d91e46"});
var db=getFirestore(a);window._fbREF=doc(db,"appData","main");window._fbSetDoc=setDoc;window._fbGetDoc=getDoc;
console.log("üî• Firebase ready");
</script>
<style>
/* ========== Modern Design System V2 ========== */
:root{
  /* ÿßŸÑÿ£ŸÑŸàÿßŸÜ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© */
  --red:#E63946;
  --green:#00D26A;
  --black:#0a0a0a;
  --gold:#FFD166;
  --dark:#0d1117;
  --card:rgba(22,27,34,0.8);
  --card-solid:#161b22;
  --border:rgba(255,255,255,0.1);
  --border-hover:rgba(255,255,255,0.2);
  --text:#f0f6fc;
  --muted:rgba(255,255,255,0.5);
  
  /* ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ */
  --glow-green:0 0 20px rgba(0,210,106,0.4);
  --glow-red:0 0 20px rgba(230,57,70,0.4);
  --glow-gold:0 0 20px rgba(255,209,102,0.4);
  --blur:blur(20px);
  --transition:0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --spring:0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  
  /* ÿ£ÿ≠ÿ¨ÿßŸÖ */
  --radius-sm:10px;
  --radius-md:16px;
  --radius-lg:24px;
  --sidebar-width:280px;
}

/* ========== Light Mode ========== */
body.light-mode{
  --black:#f0f2f5;
  --dark:#ffffff;
  --card:rgba(255,255,255,0.92);
  --card-solid:#ffffff;
  --border:rgba(0,0,0,0.08);
  --border-hover:rgba(0,0,0,0.15);
  --text:#1a1a2e;
  --muted:rgba(0,0,0,0.45);
  --glow-green:0 4px 15px rgba(0,150,57,0.15);
  --glow-red:0 4px 15px rgba(206,17,38,0.15);
  --glow-gold:0 4px 15px rgba(255,180,0,0.15);
  background:#f0f2f5;
}
body.light-mode .sidebar{background:rgba(255,255,255,0.97);border-left-color:rgba(0,0,0,0.08);backdrop-filter:blur(20px)}
body.light-mode .sidebar-header{background:linear-gradient(135deg,rgba(0,150,57,0.06),rgba(206,17,38,0.04))}
body.light-mode .nav-btn{color:rgba(0,0,0,0.45)}
body.light-mode .nav-btn:hover{background:rgba(0,150,57,0.08);color:#1a1a2e}
body.light-mode .nav-btn.active{background:linear-gradient(135deg,#009639,#006428);color:#fff}
body.light-mode .visitor-box{background:linear-gradient(135deg,#FFD166,#ffb800);color:#1a1a2e}
body.light-mode .form-input,body.light-mode .form-select,body.light-mode .form-textarea{background:#f8f9fa;border-color:rgba(0,0,0,0.12);color:#1a1a2e}
body.light-mode .form-input:focus,body.light-mode .form-textarea:focus{background:#fff;border-color:#009639}
body.light-mode .modal{background:#fff;border-color:rgba(0,0,0,0.08)}
body.light-mode .modal-head{background:linear-gradient(135deg,rgba(0,150,57,0.05),rgba(206,17,38,0.03))}
body.light-mode .modal-foot{background:#f8f9fa}
body.light-mode .toast{background:#fff;color:#1a1a2e;border-left:4px solid #009639;box-shadow:0 8px 30px rgba(0,0,0,0.12)}
body.light-mode .member-item,body.light-mode .toggle-row{background:#f8f9fa}
body.light-mode .conf-edit-item{background:#f8f9fa;border-color:rgba(0,0,0,0.08)}
body.light-mode .tx-item{border-bottom-color:rgba(0,0,0,0.06)}
body.light-mode .card{background:rgba(255,255,255,0.92);border-color:rgba(0,0,0,0.06);box-shadow:0 2px 12px rgba(0,0,0,0.04)}
body.light-mode .header{color:#1a1a2e}
body.light-mode .header p{color:rgba(0,0,0,0.5)}
body.light-mode .stat-card{background:rgba(255,255,255,0.9);border-color:rgba(0,0,0,0.06)}
body.light-mode .hero-section{background:linear-gradient(135deg,rgba(0,150,57,0.08),rgba(206,17,38,0.05));border-color:rgba(0,0,0,0.06)}
body.light-mode .quick-action-btn{background:rgba(255,255,255,0.9);border-color:rgba(0,0,0,0.06)}
body.light-mode .quick-label{color:rgba(0,0,0,0.5)}
body.light-mode .news-card-home{background:rgba(255,255,255,0.9);border-color:rgba(0,0,0,0.06)}
body.light-mode .card-title{color:#1a1a2e}
body.light-mode .section-title-home{color:#1a1a2e}
body.light-mode .about-section{background:linear-gradient(135deg,rgba(0,150,57,0.06),rgba(201,162,39,0.04));border-color:rgba(0,0,0,0.06)}
body.light-mode .checkbox-row label{color:#1a1a2e}

/* ÿÆŸÑŸÅŸäÿ© Light Mode - ÿ£ŸÇÿµŸâ ÿ®ŸÜŸáÿßÿ± */
body.light-mode .animated-bg{
  background:linear-gradient(180deg, #87CEEB 0%, #B0E0E6 30%, #E0F0FF 60%, #f0f2f5 100%)!important;
}
body.light-mode .stars{display:none}
body.light-mode .moon{
  background:radial-gradient(circle at 35% 35%, #FFD700, #FFA500)!important;
  box-shadow:0 0 40px rgba(255,200,0,0.6), 0 0 80px rgba(255,165,0,0.3)!important;
  width:60px!important;height:60px!important;top:6%!important;
  animation:sunPulse 8s ease-in-out infinite!important;
}
@keyframes sunPulse{
  0%,100%{box-shadow:0 0 40px rgba(255,200,0,0.6),0 0 80px rgba(255,165,0,0.3);transform:scale(1)}
  50%{box-shadow:0 0 60px rgba(255,200,0,0.8),0 0 100px rgba(255,165,0,0.5);transform:scale(1.05)}
}
body.light-mode .dome{
  background:linear-gradient(180deg, #DAA520 0%, #C9A227 50%, #B8860B 100%)!important;
  box-shadow:0 0 40px rgba(218,165,32,0.5)!important;
}
body.light-mode .dome-base{
  background:linear-gradient(180deg, #D4C5A9 0%, #C2B280 100%)!important;
}
body.light-mode .walls{
  background:linear-gradient(180deg, #C2B280 0%, #A89968 100%)!important;
}
body.light-mode .window{
  background:linear-gradient(180deg, #4A90D9 0%, #357ABD 100%)!important;
}
body.light-mode .minaret{
  background:linear-gradient(180deg, #D4C5A9 0%, #C2B280 50%, #A89968 100%)!important;
}
body.light-mode .minaret-top{
  background:linear-gradient(180deg, #DAA520 0%, #C9A227 100%)!important;
}
body.light-mode .alaqsa-container{opacity:0.25!important}
body.light-mode .particle{background:rgba(218,165,32,0.4)!important}
body.light-mode .flag-decoration{opacity:0.4!important}
body.light-mode .crescent{color:#DAA520!important}

/* ÿÆŸÑŸÅŸäÿ© Light - ÿ∫ŸäŸàŸÖ ŸÖÿ™ÿ≠ÿ±ŸÉÿ© */
body.light-mode .animated-bg::before{
  content:'';
  position:absolute;
  width:200%;height:100%;
  top:15%;
  background:
    radial-gradient(ellipse 120px 40px at 10% 0%, rgba(255,255,255,0.7), transparent),
    radial-gradient(ellipse 150px 50px at 30% 20%, rgba(255,255,255,0.5), transparent),
    radial-gradient(ellipse 100px 35px at 55% 10%, rgba(255,255,255,0.6), transparent),
    radial-gradient(ellipse 180px 45px at 75% 25%, rgba(255,255,255,0.4), transparent),
    radial-gradient(ellipse 130px 40px at 90% 5%, rgba(255,255,255,0.5), transparent);
  animation:cloudsMove 60s linear infinite;
}
@keyframes cloudsMove{
  from{transform:translateX(0)}
  to{transform:translateX(-50%)}
}

/* ÿÆŸÑŸÅŸäÿ© ÿßŸÑÿ¥ÿπÿ± - Light */
body.light-mode .bg-poetry .poetry-line{
  color:rgba(0,100,40,0.12)!important;
  text-shadow:none!important;
}

/* ÿ≤ÿ± ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ */
.theme-toggle{
  position:fixed;
  bottom:80px;
  left:20px;
  width:46px;
  height:46px;
  border-radius:50%;
  border:2px solid var(--border);
  background:var(--card);
  color:var(--text);
  font-size:1.3rem;
  cursor:pointer;
  z-index:160;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.4s ease;
  box-shadow:0 4px 20px rgba(0,0,0,0.15);
  backdrop-filter:blur(10px);
}
.theme-toggle:hover{transform:scale(1.15);border-color:var(--gold);box-shadow:var(--glow-gold)}
.theme-toggle:active{transform:scale(0.95)}
body.light-mode .theme-toggle{background:rgba(255,255,255,0.9);border-color:rgba(0,0,0,0.1);box-shadow:0 4px 20px rgba(0,0,0,0.1)}

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html{scroll-behavior:smooth}
body{
  font-family:'Tajawal',sans-serif;
  background:var(--black);
  color:var(--text);
  min-height:100vh;
  min-height:100dvh;
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
}

/* ========== ÿÆŸÑŸÅŸäÿ© ÿßŸÑŸÖÿ≥ÿ¨ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© ========== */
.animated-bg{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
z-index:-1;
overflow:hidden;
background:linear-gradient(135deg, #0a0a0a 0%, #0d1521 50%, #111827 100%);
display:none;
}

.animated-bg.active{
display:block;
}

/* ÿßŸÑŸÜÿ¨ŸàŸÖ ÿßŸÑŸÖÿ™ŸÑÿ£ŸÑÿ¶ÿ© */
.stars{
position:absolute;
width:100%;
height:100%;
background-image:
radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,0.8), transparent),
radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.6), transparent),
radial-gradient(1.5px 1.5px at 90px 40px, rgba(255,255,255,0.9), transparent),
radial-gradient(2px 2px at 160px 120px, rgba(255,255,255,0.7), transparent),
radial-gradient(1px 1px at 230px 80px, rgba(255,255,255,0.8), transparent),
radial-gradient(2px 2px at 300px 150px, rgba(255,255,255,0.6), transparent),
radial-gradient(1.5px 1.5px at 350px 60px, rgba(255,255,255,0.5), transparent),
radial-gradient(2px 2px at 420px 180px, rgba(255,255,255,0.7), transparent),
radial-gradient(1px 1px at 500px 90px, rgba(255,255,255,0.9), transparent),
radial-gradient(2px 2px at 580px 130px, rgba(255,255,255,0.6), transparent);
background-size:600px 200px;
animation:twinkle 4s ease-in-out infinite;
}

@keyframes twinkle{
0%,100%{opacity:0.6}
50%{opacity:1}
}

/* ÿßŸÑŸÇŸÖÿ± */
.moon{
position:absolute;
top:8%;
left:15%;
width:50px;
height:50px;
background:radial-gradient(circle at 35% 35%, #fffacd, #f0e68c);
border-radius:50%;
box-shadow:0 0 30px rgba(255,250,205,0.5), 0 0 60px rgba(255,250,205,0.3);
animation:moonGlow 6s ease-in-out infinite;
}

@keyframes moonGlow{
0%,100%{box-shadow:0 0 30px rgba(255,250,205,0.5), 0 0 60px rgba(255,250,205,0.3)}
50%{box-shadow:0 0 50px rgba(255,250,205,0.7), 0 0 80px rgba(255,250,205,0.4)}
}

/* ŸÇÿ®ÿ© ÿßŸÑÿµÿÆÿ±ÿ© */
.alaqsa-container{
position:absolute;
bottom:0;
left:50%;
transform:translateX(-50%);
width:100%;
max-width:800px;
height:300px;
opacity:0.15;
}

/* ÿßŸÑŸÇÿ®ÿ© ÿßŸÑÿ∞Ÿáÿ®Ÿäÿ© */
.dome{
position:absolute;
bottom:120px;
left:50%;
transform:translateX(-50%);
width:180px;
height:100px;
background:linear-gradient(180deg, #C9A227 0%, #b8960f 50%, #a6850d 100%);
border-radius:100px 100px 0 0;
box-shadow:0 0 30px rgba(201,162,39,0.3);
animation:domeShine 6s ease-in-out infinite;
}

@keyframes domeShine{
0%,100%{filter:brightness(1)}
50%{filter:brightness(1.2)}
}

/* ÿßŸÑŸáŸÑÿßŸÑ ŸÅŸàŸÇ ÿßŸÑŸÇÿ®ÿ© */
.crescent{
position:absolute;
bottom:215px;
left:50%;
transform:translateX(-50%);
width:20px;
height:30px;
color:#C9A227;
font-size:30px;
animation:crescentGlow 3s ease-in-out infinite;
}

@keyframes crescentGlow{
0%,100%{text-shadow:0 0 10px rgba(201,162,39,0.5)}
50%{text-shadow:0 0 20px rgba(201,162,39,0.8)}
}

/* ŸÇÿßÿπÿØÿ© ÿßŸÑŸÇÿ®ÿ© */
.dome-base{
position:absolute;
bottom:80px;
left:50%;
transform:translateX(-50%);
width:220px;
height:50px;
background:linear-gradient(180deg, #4a6fa5 0%, #3d5a80 100%);
border-radius:10px 10px 0 0;
}

/* ÿßŸÑÿ¨ÿØÿ±ÿßŸÜ */
.walls{
position:absolute;
bottom:0;
left:50%;
transform:translateX(-50%);
width:400px;
height:80px;
background:linear-gradient(180deg, #3d5a80 0%, #2c3e50 100%);
}

/* ÿßŸÑŸÜŸàÿßŸÅÿ∞ */
.windows{
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
display:flex;
gap:30px;
}

.window{
width:15px;
height:25px;
background:linear-gradient(180deg, #ffeaa7 0%, #fdcb6e 100%);
border-radius:8px 8px 0 0;
animation:windowGlow 4s ease-in-out infinite;
}

.window:nth-child(2){animation-delay:0.5s}
.window:nth-child(3){animation-delay:1s}
.window:nth-child(4){animation-delay:1.5s}
.window:nth-child(5){animation-delay:2s}

@keyframes windowGlow{
0%,100%{opacity:0.6;box-shadow:0 0 5px rgba(253,203,110,0.3)}
50%{opacity:1;box-shadow:0 0 15px rgba(253,203,110,0.6)}
}

/* ÿßŸÑŸÖÿ¢ÿ∞ŸÜ */
.minaret{
position:absolute;
bottom:0;
width:30px;
height:200px;
background:linear-gradient(180deg, #4a6fa5 0%, #3d5a80 50%, #2c3e50 100%);
}

.minaret-left{left:calc(50% - 180px)}
.minaret-right{left:calc(50% + 150px)}

.minaret-top{
position:absolute;
top:-20px;
left:50%;
transform:translateX(-50%);
width:20px;
height:30px;
background:linear-gradient(180deg, #C9A227 0%, #b8960f 100%);
border-radius:50% 50% 0 0;
}

/* ÿßŸÑÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿßŸÑŸÖÿ™ÿ∑ÿßŸäÿ±ÿ© */
.particles{
position:absolute;
width:100%;
height:100%;
overflow:hidden;
}

.particle{
position:absolute;
width:4px;
height:4px;
background:rgba(201,162,39,0.6);
border-radius:50%;
animation:float 15s infinite;
}

.particle:nth-child(1){left:10%;animation-delay:0s;animation-duration:12s}
.particle:nth-child(2){left:20%;animation-delay:2s;animation-duration:14s}
.particle:nth-child(3){left:30%;animation-delay:4s;animation-duration:11s}
.particle:nth-child(4){left:40%;animation-delay:1s;animation-duration:16s}
.particle:nth-child(5){left:50%;animation-delay:3s;animation-duration:13s}
.particle:nth-child(6){left:60%;animation-delay:5s;animation-duration:15s}
.particle:nth-child(7){left:70%;animation-delay:2s;animation-duration:12s}
.particle:nth-child(8){left:80%;animation-delay:4s;animation-duration:14s}
.particle:nth-child(9){left:90%;animation-delay:1s;animation-duration:11s}
.particle:nth-child(10){left:95%;animation-delay:3s;animation-duration:16s}

@keyframes float{
0%{transform:translateY(100vh) rotate(0deg);opacity:0}
10%{opacity:1}
90%{opacity:1}
100%{transform:translateY(-100vh) rotate(720deg);opacity:0}
}

/* ÿßŸÑÿπŸÑŸÖ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉ */
.flag-decoration{
position:absolute;
top:20%;
right:10%;
width:40px;
height:25px;
opacity:0.3;
animation:flagWave 3s ease-in-out infinite;
}

.flag-stripe{
height:33.33%;
}

.flag-black{background:#1a1a1a}
.flag-white{background:#ffffff}
.flag-green{background:#009639}

.flag-triangle{
position:absolute;
left:0;
top:0;
width:0;
height:0;
border-top:12.5px solid transparent;
border-bottom:12.5px solid transparent;
border-left:15px solid #CE1126;
}

@keyframes flagWave{
0%,100%{transform:rotate(-5deg)}
50%{transform:rotate(5deg)}
}

/* ========== ÿßŸÑÿÆŸÑŸÅŸäÿ© 2: ÿ£ÿ®Ÿäÿßÿ™ ÿßŸÑÿ¥ÿπÿ± ========== */
.bg-poetry{display:none}
.bg-poetry.active{display:block}

.poetry-container{
position:absolute;
width:100%;
height:100%;
overflow:hidden;
}

.poetry-line{
position:absolute;
font-size:1.5rem;
font-weight:600;
color:rgba(255,255,255,0.15);
white-space:nowrap;
text-shadow:0 0 30px rgba(201,162,39,0.3);
left:-100%;
animation:poetryFloatLTR 30s linear infinite;
opacity:0;
}

@keyframes poetryFloatLTR{
0%{left:-100%;opacity:0}
2%{opacity:1}
98%{opacity:1}
100%{left:100%;opacity:0}
}

.poetry-glow{
position:absolute;
width:300px;
height:300px;
border-radius:50%;
filter:blur(80px);
animation:glowMove 10s ease-in-out infinite;
}

.glow-gold{background:rgba(201,162,39,0.1);top:20%;left:10%}
.glow-green{background:rgba(0,150,57,0.1);top:50%;right:10%;animation-delay:3s}
.glow-red{background:rgba(206,17,38,0.1);bottom:10%;left:30%;animation-delay:6s}

@keyframes glowMove{
0%,100%{transform:translate(0,0) scale(1)}
50%{transform:translate(50px,30px) scale(1.2)}
}

/* ========== ÿßŸÑÿÆŸÑŸÅŸäÿ© 3: ÿ≠ŸÖÿßŸÖÿ© ÿßŸÑÿ≥ŸÑÿßŸÖ ========== */
.bg-dove{display:none}
.bg-dove.active{display:block}

.dove{
position:absolute;
font-size:4rem;
opacity:0.15;
animation:dovefly 25s linear infinite;
}

.dove:nth-child(1){top:20%;animation-delay:0s;font-size:5rem}
.dove:nth-child(2){top:40%;animation-delay:5s;font-size:3.5rem}
.dove:nth-child(3){top:60%;animation-delay:10s;font-size:4.5rem}
.dove:nth-child(4){top:30%;animation-delay:15s;font-size:3rem}
.dove:nth-child(5){top:70%;animation-delay:20s;font-size:4rem}

@keyframes dovefly{
0%{transform:translateX(-100px) translateY(0) rotate(0deg);opacity:0}
10%{opacity:0.15}
50%{transform:translateX(50vw) translateY(-30px) rotate(5deg)}
90%{opacity:0.15}
100%{transform:translateX(100vw) translateY(0) rotate(0deg);opacity:0}
}

.olive-branch{
position:absolute;
font-size:2rem;
opacity:0.2;
animation:oliveFall 15s linear infinite;
}

.olive-branch:nth-child(1){left:10%;animation-delay:0s}
.olive-branch:nth-child(2){left:25%;animation-delay:2s}
.olive-branch:nth-child(3){left:40%;animation-delay:4s}
.olive-branch:nth-child(4){left:55%;animation-delay:6s}
.olive-branch:nth-child(5){left:70%;animation-delay:8s}
.olive-branch:nth-child(6){left:85%;animation-delay:10s}

@keyframes oliveFall{
0%{transform:translateY(-50px) rotate(0deg);opacity:0}
10%{opacity:0.2}
90%{opacity:0.2}
100%{transform:translateY(100vh) rotate(360deg);opacity:0}
}

.peace-text{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
font-size:3rem;
font-weight:700;
color:rgba(255,255,255,0.05);
text-align:center;
animation:peaceGlow 5s ease-in-out infinite;
}

@keyframes peaceGlow{
0%,100%{text-shadow:0 0 30px rgba(0,150,57,0.2)}
50%{text-shadow:0 0 60px rgba(0,150,57,0.4)}
}

/* ÿ≤ÿ± ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿÆŸÑŸÅŸäÿ© */
.bg-switcher{
position:fixed;
bottom:20px;
left:20px;
z-index:1000;
display:flex;
gap:8px;
background:rgba(22,27,34,0.9);
padding:10px;
border-radius:12px;
border:1px solid var(--border);
backdrop-filter:blur(10px);
}

.bg-btn{
width:35px;
height:35px;
border:2px solid var(--border);
border-radius:8px;
background:var(--card);
cursor:pointer;
font-size:1rem;
display:flex;
align-items:center;
justify-content:center;
transition:all 0.3s;
}

.bg-btn:hover{
border-color:var(--gold);
transform:scale(1.1);
}

.bg-btn.active{
border-color:var(--green);
background:rgba(0,150,57,0.2);
box-shadow:0 0 10px rgba(0,150,57,0.3);
}

.app{display:flex;min-height:100vh;min-height:100dvh;position:relative;z-index:1}

/* ========== Sidebar - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.sidebar{
  width:var(--sidebar-width);
  background:rgba(10,10,10,0.85);
  backdrop-filter:var(--blur);
  -webkit-backdrop-filter:var(--blur);
  border-left:1px solid var(--border);
  position:fixed;
  right:0;
  top:0;
  bottom:0;
  display:flex;
  flex-direction:column;
  z-index:100;
  transition:transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-header{
  padding:24px 20px;
  text-align:center;
  border-bottom:1px solid var(--border);
  background:linear-gradient(135deg,rgba(0,210,106,0.1),rgba(230,57,70,0.08));
}

.logo{
  width:85px;
  height:85px;
  border-radius:50%;
  border:3px solid var(--green);
  margin:0 auto 12px;
  background:linear-gradient(135deg,var(--green),var(--red));
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2.2rem;
  overflow:hidden;
  box-shadow:var(--glow-green);
  transition:var(--spring);
}

.logo:hover{transform:scale(1.05)}
.logo img{width:100%;height:100%;object-fit:cover}
.org-name{font-size:1rem;font-weight:700;margin-bottom:2px}
.org-sub{font-size:0.75rem;color:var(--muted)}

.nav{flex:1;padding:16px;overflow-y:auto;scrollbar-width:none}
.nav::-webkit-scrollbar{display:none}

.nav-title{
  font-size:0.7rem;
  font-weight:700;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:1px;
  padding:12px 0 8px;
  border-bottom:1px solid var(--border);
  margin-bottom:8px;
}

.nav-btn{
  display:flex;
  align-items:center;
  gap:10px;
  width:100%;
  padding:14px 16px;
  margin-bottom:4px;
  background:transparent;
  border:none;
  border-radius:var(--radius-md);
  color:var(--muted);
  font-family:inherit;
  font-size:0.9rem;
  font-weight:500;
  cursor:pointer;
  text-align:right;
  transition:var(--transition);
}

.nav-btn:hover{
  background:rgba(255,255,255,0.05);
  color:var(--text);
  transform:translateX(-4px);
}

.nav-btn:active{transform:scale(0.98)}

.nav-btn.active{
  background:linear-gradient(135deg,var(--green),#00a854);
  color:white;
  box-shadow:var(--glow-green);
}

.nav-btn.hidden{display:none}
.hidden{display:none!important}

.sidebar-footer{
  padding:16px;
  border-top:1px solid var(--border);
  background:rgba(0,0,0,0.3);
}
.privacy-link{
  display:block;
  text-align:center;
  color:var(--muted);
  font-size:0.75rem;
  margin-top:10px;
  cursor:pointer;
  transition:color 0.2s;
}
.privacy-link:hover{color:var(--green);}

/* Cookie Consent Banner */
.cookie-banner{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:var(--card-solid);
  border-top:2px solid var(--green);
  padding:16px 24px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:16px;
  flex-wrap:wrap;
  z-index:99999;
  box-shadow:0 -4px 20px rgba(0,0,0,0.4);
  animation:slideUp 0.4s ease;
}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.cookie-banner-text{
  color:var(--text);
  font-size:0.9rem;
  flex:1;
  min-width:200px;
}
.cookie-banner-text a{color:var(--green);text-decoration:underline;cursor:pointer;}
.cookie-banner-btns{display:flex;gap:10px;flex-wrap:wrap;}
.cookie-btn-accept{
  padding:10px 28px;
  background:var(--green);
  color:white;
  border:none;
  border-radius:var(--radius-sm);
  font-weight:700;
  cursor:pointer;
  font-family:inherit;
  font-size:0.9rem;
  transition:all 0.2s;
}
.cookie-btn-accept:hover{transform:scale(1.05);box-shadow:var(--glow-green);}

/* Privacy Policy Page */
.privacy-page{padding:20px;}
.privacy-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  padding:30px;
  margin-bottom:20px;
}
.privacy-card h2{
  color:var(--green);
  font-size:1.3rem;
  margin-bottom:15px;
  padding-bottom:10px;
  border-bottom:2px solid var(--border);
}
.privacy-card h3{
  color:var(--gold);
  font-size:1.1rem;
  margin:15px 0 8px;
}
.privacy-card p,.privacy-card li{
  color:var(--text);
  line-height:1.8;
  font-size:0.95rem;
  margin-bottom:8px;
}
.privacy-card ul{
  padding-right:20px;
  margin:10px 0;
}
.privacy-card ul li{margin-bottom:6px;}
.privacy-tabs{display:flex;gap:10px;margin-bottom:20px;}
.privacy-tab{
  padding:10px 20px;
  border-radius:var(--radius-sm);
  border:1px solid var(--border);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  font-family:inherit;
  font-size:0.9rem;
  transition:all 0.2s;
}
.privacy-tab.active{background:var(--green);color:white;border-color:var(--green);}
.privacy-lang{display:none;}
.privacy-lang.active{display:block;}

/* ========== Photo Gallery ========== */
.gallery-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
  gap:16px;
}
.gallery-album{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  overflow:hidden;
  cursor:pointer;
  transition:var(--transition);
}
.gallery-album:hover{border-color:var(--green);transform:translateY(-4px);box-shadow:0 8px 30px rgba(0,0,0,0.3);}
.gallery-album-cover{
  width:100%;height:180px;object-fit:cover;
  background:linear-gradient(135deg,var(--green),var(--red));
}
.gallery-album-info{padding:14px;}
.gallery-album-title{font-weight:700;margin-bottom:4px;}
.gallery-album-count{font-size:0.8rem;color:var(--muted);}
.gallery-album-date{font-size:0.75rem;color:var(--muted);}

.gallery-photos{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:10px;
}
.gallery-photo{
  width:100%;height:150px;object-fit:cover;
  border-radius:var(--radius-sm);
  cursor:pointer;transition:var(--transition);
}
.gallery-photo:hover{transform:scale(1.05);box-shadow:0 4px 20px rgba(0,0,0,0.3);}

/* Admin Gallery */
.gallery-upload-area{
  border:2px dashed var(--border);
  border-radius:var(--radius-md);
  padding:30px;text-align:center;
  cursor:pointer;transition:var(--transition);
  color:var(--muted);
}
.gallery-upload-area:hover{border-color:var(--green);color:var(--green);}
.gallery-thumbs{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}
.gallery-thumb{
  width:80px;height:80px;object-fit:cover;
  border-radius:var(--radius-sm);position:relative;
}
.gallery-thumb-wrap{position:relative;display:inline-block;}
.gallery-thumb-remove{
  position:absolute;top:-6px;right:-6px;
  width:22px;height:22px;border-radius:50%;
  background:var(--red);color:#fff;border:none;
  font-size:0.8rem;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
}

/* ========== Upcoming Events Timeline ========== */
.upcoming-events-wrapper{margin-bottom:10px;}
.upcoming-event{
  display:flex;align-items:center;gap:14px;
  padding:12px 16px;background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  border-right:4px solid var(--gold);
  margin-bottom:8px;transition:var(--transition);
}
.upcoming-event:hover{border-color:var(--green);transform:translateX(-3px);}
.upcoming-event-date{
  text-align:center;min-width:55px;
  background:linear-gradient(135deg,rgba(201,162,39,0.15),rgba(201,162,39,0.05));
  padding:8px 10px;border-radius:var(--radius-sm);
}
.upcoming-event-day{font-size:1.4rem;font-weight:800;color:var(--gold);line-height:1;}
.upcoming-event-month{font-size:0.7rem;color:var(--muted);margin-top:2px;}
.upcoming-event-info{flex:1;}
.upcoming-event-title{font-weight:700;font-size:0.95rem;margin-bottom:2px;}
.upcoming-event-desc{font-size:0.8rem;color:var(--muted);}
.upcoming-event-countdown{
  font-size:0.7rem;color:var(--green);
  background:rgba(0,210,106,0.1);
  padding:3px 10px;border-radius:12px;
  white-space:nowrap;
}

/* ========== Voting Results Charts ========== */
.vote-result-chart{margin-top:15px;}
.vote-bar-row{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
.vote-bar-label{min-width:100px;font-size:0.9rem;text-align:left;}
.vote-bar-track{flex:1;height:28px;background:rgba(255,255,255,0.08);border-radius:14px;overflow:hidden;position:relative;}
.vote-bar-fill{height:100%;border-radius:14px;transition:width 0.8s ease;display:flex;align-items:center;justify-content:flex-end;padding:0 10px;font-size:0.8rem;font-weight:700;color:#fff;min-width:fit-content;}
.vote-bar-count{font-size:0.85rem;color:var(--muted);min-width:50px;text-align:center;}

.visitor-box{
  background:linear-gradient(135deg,var(--gold),#e6c200);
  color:var(--black);
  padding:10px 12px;
  border-radius:var(--radius-sm);
  text-align:center;
  font-size:0.85rem;
  font-weight:700;
  margin-bottom:12px;
  box-shadow:var(--glow-gold);
}

.login-btn{
  display:block;
  width:100%;
  padding:14px;
  background:linear-gradient(135deg,var(--green),#00a854);
  color:white;
  border:none;
  border-radius:var(--radius-md);
  font-family:inherit;
  font-size:0.9rem;
  font-weight:700;
  cursor:pointer;
  transition:var(--spring);
}

.login-btn:hover{transform:translateY(-2px);box-shadow:var(--glow-green)}
.login-btn:active{transform:scale(0.98)}
.login-btn.logout{background:linear-gradient(135deg,var(--red),#c41e3a)}
.login-btn.logout:hover{box-shadow:var(--glow-red)}

/* ========== Main Content - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.main{
  flex:1;
  margin-right:var(--sidebar-width);
  padding:24px;
  transition:margin 0.4s ease;
}

.header{
  background:var(--card);
  backdrop-filter:var(--blur);
  border-radius:var(--radius-lg);
  padding:28px;
  margin-bottom:24px;
  border:1px solid var(--border);
  position:relative;
  overflow:hidden;
}

.header::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:3px;
  background:linear-gradient(90deg,var(--black),var(--green),white,var(--red));
}

.header h1{font-size:1.5rem;font-weight:800;margin-bottom:8px}
.header p{color:var(--muted);font-size:0.95rem}

.page{display:none;animation:fadeIn 0.4s ease}
.page.active{display:block}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

/* ========== Cards - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.card{
  background:var(--card);
  backdrop-filter:var(--blur);
  border-radius:var(--radius-lg);
  padding:24px;
  border:1px solid var(--border);
  margin-bottom:20px;
  transition:var(--transition);
}

.card:hover{border-color:var(--border-hover)}

.card-title{
  font-size:1.05rem;
  font-weight:700;
  margin-bottom:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  gap:12px;
}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}

/* ========== Forms - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.form-group{margin-bottom:18px}
.form-label{display:block;font-size:0.85rem;font-weight:600;color:var(--muted);margin-bottom:10px}

.form-input,.form-select,.form-textarea{
  width:100%;
  padding:14px 16px;
  background:rgba(0,0,0,0.4);
  border:2px solid var(--border);
  border-radius:var(--radius-md);
  color:var(--text);
  font-family:inherit;
  font-size:1rem;
  transition:var(--transition);
}

.form-input:focus,.form-select:focus,.form-textarea:focus{
  outline:none;
  border-color:var(--green);
  box-shadow:0 0 0 4px rgba(0,210,106,0.15);
}

.form-input::placeholder{color:var(--muted)}
.form-textarea{min-height:100px;resize:vertical}

/* ========== Buttons - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.btn{
  padding:12px 24px;
  border:none;
  border-radius:var(--radius-md);
  font-family:inherit;
  font-size:0.9rem;
  font-weight:700;
  cursor:pointer;
  margin-left:8px;
  margin-bottom:5px;
  transition:var(--spring);
  display:inline-flex;
  align-items:center;
  gap:8px;
}

.btn:active{transform:scale(0.96)}

.btn-green{
  background:linear-gradient(135deg,var(--green),#00a854);
  color:white;
  box-shadow:0 4px 15px rgba(0,210,106,0.3);
}
.btn-green:hover{transform:translateY(-2px);box-shadow:var(--glow-green)}

.btn-red{
  background:linear-gradient(135deg,var(--red),#c41e3a);
  color:white;
  box-shadow:0 4px 15px rgba(230,57,70,0.3);
}
.btn-red:hover{transform:translateY(-2px);box-shadow:var(--glow-red)}

.btn-gray{
  background:rgba(255,255,255,0.1);
  color:var(--text);
  border:1px solid var(--border);
}
.btn-gray:hover{background:rgba(255,255,255,0.15);border-color:var(--border-hover)}

.btn-gold{
  background:linear-gradient(135deg,var(--gold),#e6c200);
  color:var(--black);
  box-shadow:0 4px 15px rgba(255,209,102,0.3);
}
.btn-gold:hover{transform:translateY(-2px);box-shadow:var(--glow-gold)}

.btn-sm{padding:8px 16px;font-size:0.8rem}

/* ========== Modals - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.modal-bg{
  display:none;
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.9);
  backdrop-filter:var(--blur);
  z-index:200;
  justify-content:center;
  align-items:center;
  padding:20px;
  overflow-y:auto;
}

.modal-bg.show{display:flex}

.modal{
  background:var(--card-solid);
  border-radius:var(--radius-lg);
  width:100%;
  max-width:500px;
  border:1px solid var(--border);
  max-height:90vh;
  overflow-y:auto;
  animation:modalSlide 0.4s var(--spring);
}

@keyframes modalSlide{
  from{opacity:0;transform:scale(0.95) translateY(20px)}
  to{opacity:1;transform:scale(1) translateY(0)}
}

.modal-head{
  padding:18px 24px;
  border-bottom:1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  background:var(--card-solid);
  z-index:1;
}

.modal-close{
  background:rgba(255,255,255,0.1);
  border:none;
  color:var(--text);
  font-size:1.2rem;
  cursor:pointer;
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:var(--transition);
}

.modal-close:hover{background:var(--red);color:white}

.modal-body{padding:24px}

.modal-foot{
  padding:18px 24px;
  border-top:1px solid var(--border);
  display:flex;
  gap:12px;
  justify-content:flex-end;
  position:sticky;
  bottom:0;
  background:var(--card-solid);
}

/* ========== Toast - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.toast{
  position:fixed;
  bottom:30px;
  left:50%;
  transform:translateX(-50%) translateY(100px);
  background:rgba(10,10,10,0.95);
  backdrop-filter:var(--blur);
  padding:14px 24px;
  border-radius:100px;
  border:2px solid var(--green);
  opacity:0;
  transition:var(--transition);
  z-index:300;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:10px;
}

.toast.show{transform:translateX(-50%) translateY(0);opacity:1}
.toast.error{border-color:var(--red)}

/* ========== Stats - ŸÖÿ≠ÿ≥ŸëŸÜ ========== */
.stat-num{font-size:1.8rem;font-weight:900;margin-bottom:4px;background:linear-gradient(135deg,var(--text),var(--muted));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.stat-label{font-size:0.85rem;color:var(--muted);font-weight:500}

/* ========== Transactions ========== */
.tx-item{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid var(--border);flex-wrap:wrap;transition:var(--transition)}
.tx-item:hover{background:rgba(255,255,255,0.02);margin:0 -12px;padding:14px 12px;border-radius:var(--radius-sm)}
.tx-icon{width:42px;height:42px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:1.1rem}
.tx-icon.inc{background:rgba(0,210,106,0.15)}
.tx-icon.exp{background:rgba(230,57,70,0.15)}
.tx-info{flex:1;min-width:150px}
.tx-title{font-weight:600;font-size:0.95rem}
.tx-date{font-size:0.8rem;color:var(--muted)}
.tx-amount{font-weight:800;font-size:1rem}
.tx-amount.inc{color:var(--green)}
.tx-amount.exp{color:var(--red)}
.tx-actions{display:flex;gap:6px}
.tx-receipts{width:100%;margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
.tx-receipt-img{width:65px;height:65px;border-radius:var(--radius-sm);object-fit:cover;cursor:pointer;border:2px solid var(--border);transition:var(--transition)}
.tx-receipt-img:hover{border-color:var(--green);transform:scale(1.05)}

#map{width:100%;height:400px;border-radius:var(--radius-md)}

.toggle-row{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:rgba(0,0,0,0.3);border-radius:var(--radius-sm);margin-bottom:10px;border:1px solid var(--border)}

/* ========== Members ========== */
.member-item{
  display:flex;
  align-items:center;
  gap:14px;
  padding:16px;
  background:rgba(0,0,0,0.3);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  margin-bottom:10px;
  transition:var(--transition);
  cursor:pointer;
}

.member-item:hover{border-color:var(--green);background:rgba(0,210,106,0.05)}
.member-item:active{transform:scale(0.99)}

.member-avatar{
  width:48px;
  height:48px;
  border-radius:50%;
  background:linear-gradient(135deg,var(--green),var(--gold));
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.3rem;
  overflow:hidden;
  flex-shrink:0;
}

.member-avatar img{width:100%;height:100%;object-fit:cover}
.member-info{flex:1;min-width:0}
.member-name{font-weight:700;font-size:0.95rem;margin-bottom:2px}
.member-city{font-size:0.8rem;color:var(--muted)}
.member-code{font-size:0.75rem;color:var(--muted);margin-top:4px;font-family:monospace}
.member-phone{font-size:0.85rem;color:var(--green);margin-top:4px}

.badge{display:inline-block;padding:4px 10px;border-radius:100px;font-size:0.7rem;font-weight:600}
.badge-green{background:rgba(0,210,106,0.15);color:var(--green)}
.badge-red{background:rgba(230,57,70,0.15);color:var(--red)}

.checkbox-row{display:flex;align-items:center;gap:10px;padding:8px 0}
.checkbox-row input{width:18px;height:18px;accent-color:var(--green);cursor:pointer}

.upload-box{
  border:2px dashed var(--border);
  border-radius:var(--radius-md);
  padding:24px;
  text-align:center;
  cursor:pointer;
  transition:var(--transition);
}

.upload-box:hover{border-color:var(--green);background:rgba(0,210,106,0.05)}

.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media(max-width:900px){.editor-grid{grid-template-columns:1fr}}

/* Invitation Card */
.inv-card{width:100%;max-width:360px;background:white;box-shadow:0 20px 60px rgba(0,0,0,0.5);margin:0 auto;border-radius:var(--radius-md);overflow:hidden}
.flag-bar{height:6px;display:flex}.flag-bar .bk{background:#000;flex:1}.flag-bar .wh{background:#fff;flex:1}.flag-bar .gr{background:#009736;flex:1}
.inv-content{padding:24px;text-align:center;color:#1a1a1a}
.inv-logo{width:55px;height:55px;border-radius:50%;margin:0 auto 12px;background:linear-gradient(135deg,#009639,#CE1126);overflow:hidden}
.inv-logo img{width:100%;height:100%;object-fit:cover}
.inv-title{font-size:1.3rem;color:#009736;margin-bottom:8px;font-weight:800}
.inv-sub{color:#666;margin-bottom:12px;font-size:0.95rem}
.inv-text{font-size:0.9rem;line-height:1.7;margin-bottom:14px;white-space:pre-line}
.inv-details{background:#f5f5f5;padding:14px;border-radius:var(--radius-sm);margin-bottom:14px}
.inv-row{margin-bottom:6px;font-size:0.85rem}
.inv-welcome{color:#CE1126;font-weight:700;font-size:1rem}
/* Conference Invitation */
.conf-grid{display:grid;grid-template-columns:1fr 1fr;gap:25px}

/* ========== ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ========== */
.report-tabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}
.report-tab{padding:10px 20px;border-radius:var(--radius-sm);border:1px solid var(--border);background:var(--dark);color:var(--muted);cursor:pointer;font-family:inherit;font-size:0.85rem;font-weight:600;transition:var(--transition)}
.report-tab:hover{border-color:var(--green);color:var(--text)}
.report-tab.active{background:linear-gradient(135deg,var(--green),#007a2f);color:#fff;border-color:var(--green)}
.report-panel{display:none}
.report-panel.active{display:block}
.report-stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px}
.report-stat{background:var(--dark);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px;text-align:center}
.report-stat-num{font-size:2rem;font-weight:800;background:linear-gradient(135deg,var(--green),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.report-stat-label{font-size:0.75rem;color:var(--muted);margin-top:4px}
.chart-container{background:var(--dark);border:1px solid var(--border);border-radius:var(--radius-md);padding:20px;margin-bottom:16px}
.chart-title{font-weight:700;margin-bottom:15px;font-size:0.95rem}
.chart-bar-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.chart-bar-label{width:100px;font-size:0.8rem;color:var(--muted);text-align:left;flex-shrink:0}
.chart-bar-track{flex:1;height:28px;background:rgba(255,255,255,0.05);border-radius:14px;overflow:hidden;position:relative}
.chart-bar-fill{height:100%;border-radius:14px;transition:width 1s ease;display:flex;align-items:center;justify-content:flex-end;padding-right:10px;font-size:0.75rem;font-weight:700;color:#fff;min-width:30px}
.chart-bar-green{background:linear-gradient(90deg,#009639,#00D26A)}
.chart-bar-red{background:linear-gradient(90deg,#CE1126,#E63946)}
.chart-bar-gold{background:linear-gradient(90deg,#b8860b,#FFD166)}
.chart-bar-blue{background:linear-gradient(90deg,#1e3a5f,#4A90D9)}
.chart-donut{width:180px;height:180px;margin:0 auto 15px}
.report-table{width:100%;border-collapse:collapse;font-size:0.8rem}
.report-table th{background:var(--dark);color:var(--green);padding:10px 8px;text-align:right;border-bottom:2px solid var(--green);font-weight:700}
.report-table td{padding:10px 8px;border-bottom:1px solid var(--border);color:var(--text)}
.report-table tr:hover td{background:rgba(0,210,106,0.05)}
.report-actions{display:flex;gap:10px;margin-top:20px;flex-wrap:wrap}
.report-period{display:flex;gap:10px;align-items:center;margin-bottom:16px;flex-wrap:wrap}
.report-period select,.report-period input{padding:8px 12px;border-radius:var(--radius-sm);border:1px solid var(--border);background:var(--dark);color:var(--text);font-family:inherit;font-size:0.85rem}
body.light-mode .report-stat{background:#f8f9fa;border-color:rgba(0,0,0,0.06)}
body.light-mode .chart-container{background:#f8f9fa;border-color:rgba(0,0,0,0.06)}
body.light-mode .chart-bar-track{background:rgba(0,0,0,0.05)}
body.light-mode .report-table th{background:#f8f9fa;border-bottom-color:#009639}
body.light-mode .report-table td{border-bottom-color:rgba(0,0,0,0.06)}
body.light-mode .report-tab{background:#f8f9fa;border-color:rgba(0,0,0,0.08)}
body.light-mode .report-period select,body.light-mode .report-period input{background:#f8f9fa;border-color:rgba(0,0,0,0.1);color:#1a1a2e}
@media(max-width:1000px){.conf-grid{grid-template-columns:1fr}}
.conf-card{background:#fff;max-width:480px;margin:0 auto;box-shadow:0 10px 40px rgba(0,0,0,0.3);border-radius:8px;overflow:hidden}
.conf-head{background:linear-gradient(135deg,#009639,#006428);padding:25px 20px 35px;text-align:center}
.conf-dome svg{filter:drop-shadow(0 4px 10px rgba(0,0,0,0.3))}
.conf-org-ar{color:#fff;font-size:1.3rem;font-weight:700;margin-top:10px;text-shadow:1px 1px 3px rgba(0,0,0,0.3)}
.conf-org-en{color:rgba(255,255,255,0.85);font-size:0.9rem;margin-top:3px}
.conf-verse-sec{background:#f5f5f5;padding:18px;text-align:center;border-bottom:3px solid #009639}
.conf-bism{color:#009639;font-weight:700;margin-bottom:6px}
.conf-verse{color:#333;font-size:0.9rem;line-height:1.7}
.conf-verse-ref{color:#777;font-size:0.8rem;margin-top:5px}
.conf-inv-txt{padding:18px;text-align:center;color:#333;font-size:0.9rem;line-height:1.6;background:#fff}
.conf-title-box{background:#CE1126;margin:0 25px;padding:14px;text-align:center}
.conf-title-box span{color:#fff;font-size:1.4rem;font-weight:800}
.conf-date{text-align:center;padding:12px;font-size:1.2rem;font-weight:700;color:#333}
.conf-agenda-sec{padding:18px;background:#fff}
.conf-agenda-head{text-align:center;font-weight:700;color:#333;margin-bottom:12px}
.conf-agenda-list{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.conf-agenda-row{display:flex;align-items:center;gap:8px;padding:8px;background:#f9f9f9;border-radius:6px}
.conf-agenda-n{width:26px;height:26px;background:#009639;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.8rem;flex-shrink:0}
.conf-agenda-t{color:#333;font-size:0.8rem;flex:1}
.conf-details-sec{background:linear-gradient(135deg,#009639,#006428);padding:18px;margin-top:12px}
.conf-det-row{color:#fff;padding:6px 0;font-size:0.85rem}
.conf-footer-txt{padding:18px;text-align:center;color:#333;font-size:0.85rem;background:#fff}
.conf-slogan{text-align:center;padding:8px;color:#CE1126;font-weight:700;background:#fff}
.conf-flag{display:flex;height:6px}
.conf-flag>div{flex:1}
.conf-flag-bk{background:#1a1a1a}
.conf-flag-wh{background:#fff}
.conf-flag-gr{background:#009639}
.conf-edit-item{display:flex;align-items:center;gap:8px;margin-bottom:8px;padding:10px;background:var(--dark);border-radius:8px;border:1px solid var(--border)}
.conf-edit-item input{flex:1}
.conf-edit-num{width:26px;height:26px;background:var(--green);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;flex-shrink:0}

.visibility-select{padding:8px 12px;background:rgba(0,0,0,0.4);border:1px solid var(--border);border-radius:var(--radius-sm);color:var(--text);font-size:0.85rem}

.admin-stats{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px}
.admin-stat{background:rgba(0,0,0,0.3);padding:16px 24px;border-radius:var(--radius-md);text-align:center;border:1px solid var(--border)}
.admin-stat-num{font-size:1.6rem;font-weight:900;color:var(--gold)}
.admin-stat-label{font-size:0.8rem;color:var(--muted)}

.center-marker{background:linear-gradient(135deg,var(--gold),#e6c200);color:var(--black);padding:12px 18px;border-radius:var(--radius-sm);margin-top:12px;display:none;font-weight:600}
.center-marker.show{display:block}

/* ========== Home Customization Styles ========== */
.home-sections-grid{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.home-section-item{
  background:rgba(0,0,0,0.3);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  overflow:hidden;
  transition:var(--transition);
}

.home-section-item:hover{
  border-color:var(--border-hover);
}

.home-section-header{
  display:flex;
  align-items:center;
  gap:12px;
  padding:16px;
}

.home-section-title{
  flex:1;
  font-weight:600;
  font-size:0.95rem;
}

.home-section-edit{
  padding:0 16px 16px;
  border-top:1px solid var(--border);
  background:rgba(0,0,0,0.2);
  animation:slideDown 0.3s ease;
}

@keyframes slideDown{
  from{opacity:0;max-height:0}
  to{opacity:1;max-height:500px}
}

/* Toggle Switch */
.toggle-switch{
  position:relative;
  display:inline-block;
  width:50px;
  height:28px;
  flex-shrink:0;
}

.toggle-switch input{
  opacity:0;
  width:0;
  height:0;
}

.toggle-slider{
  position:absolute;
  cursor:pointer;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:rgba(255,255,255,0.1);
  border-radius:28px;
  transition:var(--transition);
  border:2px solid var(--border);
}

.toggle-slider::before{
  position:absolute;
  content:"";
  height:20px;
  width:20px;
  left:3px;
  bottom:2px;
  background:var(--muted);
  border-radius:50%;
  transition:var(--transition);
}

.toggle-switch input:checked + .toggle-slider{
  background:var(--green);
  border-color:var(--green);
}

.toggle-switch input:checked + .toggle-slider::before{
  transform:translateX(22px);
  background:white;
}

/* Event Item */
.event-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px;
  background:rgba(0,0,0,0.2);
  border-radius:var(--radius-sm);
  margin-bottom:8px;
  border:1px solid var(--border);
}

.event-item input{
  flex:1;
}

.event-item .event-date{
  width:130px;
}

/* News Cards */
.news-card{
  background:var(--card);
  border-radius:var(--radius-lg);
  overflow:hidden;
  border:1px solid var(--border);
  transition:var(--transition);
  margin-bottom:20px;
}

.news-card:hover{border-color:var(--green);box-shadow:0 12px 40px rgba(0,0,0,0.3)}

.news-card-img{width:100%;height:160px;object-fit:cover;background:linear-gradient(135deg,var(--green),var(--red))}
.news-card-body{padding:20px}
.news-card-date{font-size:0.8rem;color:var(--muted);margin-bottom:8px}
.news-card-title{font-weight:700;margin-bottom:10px;font-size:1.1rem}

/* Facebook-style Image Gallery */
.news-gallery-wrapper{position:relative;overflow:hidden;background:#000;border-top:1px solid var(--border);}
.news-gallery-slider{display:flex;transition:transform 0.35s cubic-bezier(0.4,0,0.2,1);will-change:transform;}
.news-gallery-slide{min-width:100%;display:flex;align-items:center;justify-content:center;max-height:400px;}
.news-gallery-slide img{width:100%;max-height:400px;object-fit:contain;cursor:pointer;}
.news-gallery-btn{
  position:absolute;top:50%;transform:translateY(-50%);
  width:40px;height:40px;border-radius:50%;
  background:rgba(0,0,0,0.6);color:#fff;border:none;
  font-size:1.2rem;cursor:pointer;z-index:5;
  display:flex;align-items:center;justify-content:center;
  transition:all 0.2s;backdrop-filter:blur(4px);
}
.news-gallery-btn:hover{background:rgba(0,0,0,0.85);transform:translateY(-50%) scale(1.1);}
.news-gallery-prev{right:12px;}
.news-gallery-next{left:12px;}
.news-gallery-counter{
  position:absolute;bottom:10px;left:50%;transform:translateX(-50%);
  background:rgba(0,0,0,0.65);color:#fff;
  padding:4px 14px;border-radius:20px;font-size:0.8rem;
  backdrop-filter:blur(4px);
}
.news-gallery-dots{
  display:flex;justify-content:center;gap:6px;padding:10px 0;
}
.news-gallery-dot{
  width:8px;height:8px;border-radius:50%;
  background:var(--muted);cursor:pointer;transition:all 0.2s;border:none;
}
.news-gallery-dot.active{background:var(--green);transform:scale(1.3);}

/* ========== Enhanced Home Page Styles ========== */
.hero-section{
  background:linear-gradient(135deg, rgba(0,210,106,0.15), rgba(230,57,70,0.1));
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding:50px 30px;
  text-align:center;
  margin-bottom:24px;
  position:relative;
  overflow:hidden;
}

.hero-section::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:4px;
  background:linear-gradient(90deg, #000, var(--green), #fff, var(--red));
}

.hero-flag{
  font-size:4rem;
  margin-bottom:16px;
  animation:flagWave 3s ease-in-out infinite;
}

.hero-title{
  font-size:1.8rem;
  font-weight:900;
  margin-bottom:12px;
  background:linear-gradient(135deg, var(--text), var(--muted));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.hero-subtitle{
  font-size:1.1rem;
  color:var(--muted);
  margin-bottom:28px;
}

.hero-buttons{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}

.btn-lg{
  padding:16px 32px;
  font-size:1rem;
}

/* Stats Section */
.stats-section{
  margin-bottom:24px;
}

.stats-grid-home{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:12px;
}

.stat-card-home{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  padding:20px 16px;
  text-align:center;
  transition:var(--transition);
  position:relative;
  overflow:hidden;
}

.stat-card-home::after{
  content:'';
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:3px;
  background:linear-gradient(90deg, var(--green), var(--gold));
  transform:scaleX(0);
  transition:var(--transition);
}

.stat-card-home:hover{
  transform:translateY(-4px);
  border-color:var(--green);
}

.stat-card-home:hover::after{
  transform:scaleX(1);
}

.stat-icon-home{
  font-size:2rem;
  margin-bottom:8px;
}

.stat-value-home{
  font-size:2rem;
  font-weight:900;
  color:var(--green);
  line-height:1;
  margin-bottom:4px;
}

.stat-label-home{
  font-size:0.85rem;
  color:var(--muted);
  font-weight:500;
}

/* Quick Actions */
.quick-actions-section{
  margin-bottom:24px;
}

.section-title-home{
  font-size:1rem;
  font-weight:700;
  margin-bottom:16px;
  color:var(--text);
}

.quick-actions-grid{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:12px;
}

.quick-action-btn{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  padding:20px 12px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  cursor:pointer;
  transition:var(--spring);
  color:var(--text);
  font-family:inherit;
}

.quick-action-btn:hover{
  transform:translateY(-4px);
  border-color:var(--green);
  box-shadow:var(--glow-green);
}

.quick-action-btn:active{
  transform:scale(0.96);
}

.quick-icon{
  font-size:2rem;
}

.quick-label{
  font-size:0.8rem;
  font-weight:600;
  text-align:center;
  color:var(--muted);
}

/* Active Vote */
.active-vote-section{
  margin-bottom:24px;
}

.active-vote-card{
  background:linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.05));
  border:2px solid var(--gold);
  border-radius:var(--radius-lg);
  padding:24px;
  position:relative;
}

.vote-live-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:rgba(230,57,70,0.2);
  color:var(--red);
  padding:6px 12px;
  border-radius:100px;
  font-size:0.8rem;
  font-weight:700;
  margin-bottom:12px;
  animation:pulse 2s infinite;
}

@keyframes pulse{
  0%,100%{opacity:1}
  50%{opacity:0.7}
}

.vote-title-home{
  font-size:1.2rem;
  font-weight:800;
  margin-bottom:8px;
}

.vote-desc-home{
  color:var(--muted);
  margin-bottom:16px;
}

/* News Section Home */
.news-section-home{
  margin-bottom:24px;
}

.section-header-home{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}

.section-link{
  background:none;
  border:none;
  color:var(--green);
  font-family:inherit;
  font-size:0.9rem;
  font-weight:600;
  cursor:pointer;
  transition:var(--transition);
}

.section-link:hover{
  color:var(--gold);
}

.news-grid-home{
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:16px;
}

.news-card-home{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  overflow:hidden;
  transition:var(--transition);
  cursor:pointer;
}

.news-card-home:hover{
  transform:translateY(-4px);
  border-color:var(--green);
}

.news-card-home-img{
  width:100%;
  height:120px;
  object-fit:cover;
  background:linear-gradient(135deg, var(--green), var(--red));
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2.5rem;
}

.news-card-home-body{
  padding:16px;
}

.news-card-home-date{
  font-size:0.75rem;
  color:var(--muted);
  margin-bottom:6px;
}

.news-card-home-title{
  font-size:0.95rem;
  font-weight:700;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}

/* About Section */
.about-section{
  margin-bottom:24px;
}

.about-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding:24px;
}

.about-text{
  font-size:1rem;
  color:var(--text-secondary);
  line-height:1.8;
  margin-bottom:24px;
}

.about-values{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

.about-value{
  background:rgba(0,0,0,0.3);
  border-radius:var(--radius-md);
  padding:20px;
  text-align:center;
}

.about-value-icon{
  font-size:2rem;
  margin-bottom:8px;
}

.about-value-title{
  font-size:0.85rem;
  color:var(--gold);
  font-weight:700;
  margin-bottom:6px;
}

.about-value-text{
  font-size:0.9rem;
  color:var(--muted);
}

/* Events Section */
.events-section{
  margin-bottom:24px;
}

.events-list{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.event-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  padding:16px;
  display:flex;
  align-items:center;
  gap:16px;
  border-right:4px solid var(--gold);
}

.event-date-box{
  background:var(--gold);
  color:var(--black);
  padding:12px 16px;
  border-radius:var(--radius-sm);
  text-align:center;
  font-weight:700;
  min-width:70px;
}

.event-date-day{
  font-size:1.5rem;
  line-height:1;
}

.event-date-month{
  font-size:0.75rem;
}

.event-info{
  flex:1;
}

.event-title{
  font-weight:700;
  margin-bottom:4px;
}

.event-desc{
  font-size:0.85rem;
  color:var(--muted);
}

/* Social Section */
.social-section{
  margin-bottom:24px;
}

.social-links{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}

.social-link{
  display:flex;
  align-items:center;
  gap:10px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  padding:14px 20px;
  color:var(--text);
  text-decoration:none;
  font-weight:600;
  transition:var(--transition);
}

.social-link:hover{
  border-color:var(--green);
  transform:translateY(-2px);
}

.social-link-icon{
  font-size:1.5rem;
}

/* Mobile Responsive for Home */
@media(max-width:768px){
  .hero-section{
    padding:30px 20px;
  }
  
  .hero-flag{
    font-size:3rem;
  }
  
  .hero-title{
    font-size:1.4rem;
  }
  
  .hero-subtitle{
    font-size:0.95rem;
  }
  
  .hero-buttons{
    flex-direction:column;
  }
  
  .hero-buttons .btn{
    width:100%;
  }
  
  .stats-grid-home{
    grid-template-columns:repeat(2, 1fr);
  }
  
  .stat-card-home{
    padding:16px 12px;
  }
  
  .stat-value-home{
    font-size:1.6rem;
  }
  
  .quick-actions-grid{
    grid-template-columns:repeat(2, 1fr);
  }
  
  .news-grid-home{
    grid-template-columns:1fr;
  }
  
  .about-values{
    grid-template-columns:1fr;
  }
  
  .social-links{
    flex-direction:column;
  }
  
  .social-link{
    width:100%;
  }
}
.news-card-text{font-size:0.85rem;color:var(--muted);line-height:1.6}
.img-preview{width:100%;max-height:150px;object-fit:cover;border-radius:8px;margin-top:10px;display:none}
.imgs-preview{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.imgs-preview-item{position:relative}
.imgs-preview-item img{width:60px;height:60px;border-radius:8px;object-fit:cover}
.imgs-preview-item .remove-img{position:absolute;top:-5px;right:-5px;background:var(--red);color:white;border:none;border-radius:50%;width:20px;height:20px;cursor:pointer;font-size:12px}
.receipts-preview{display:flex;flex-wrap:wrap;margin-top:10px}
.receipt-preview-item{position:relative;margin:5px}
.receipt-preview-item img{width:60px;height:60px;border-radius:8px;object-fit:cover}
.receipt-preview-item .remove-receipt{position:absolute;top:-5px;right:-5px;background:var(--red);color:white;border:none;border-radius:50%;width:20px;height:20px;cursor:pointer;font-size:12px}
.lightbox{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:400;justify-content:center;align-items:center}
.lightbox.show{display:flex}
.lightbox img{max-width:90%;max-height:90%;border-radius:var(--radius-md)}
.lightbox-close{position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.1);border:none;color:white;font-size:1.5rem;cursor:pointer;width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center}
.address-search{display:flex;gap:10px;margin-bottom:12px}
.address-search input{flex:1}
.location-result{background:rgba(0,0,0,0.4);padding:12px;border-radius:var(--radius-sm);margin-top:12px;font-size:0.9rem;display:none}
.location-result.show{display:block}

/* ========== Mobile Button ========== */
.mobile-btn{
  display:none;
  position:fixed;
  bottom:24px;
  right:24px;
  width:56px;
  height:56px;
  background:linear-gradient(135deg,var(--green),#00a854);
  border:none;
  border-radius:50%;
  color:white;
  font-size:1.5rem;
  cursor:pointer;
  z-index:150;
  box-shadow:var(--glow-green);
  transition:var(--spring);
}

.mobile-btn:active{transform:scale(0.9)}

/* ========== Mobile Responsive ========== */
@media(max-width:768px){
  :root{--sidebar-width:100%}
  
  .sidebar{
    transform:translateX(100%);
    width:85%;
    max-width:320px;
    box-shadow:-10px 0 40px rgba(0,0,0,0.5);
  }
  
  .sidebar.open{transform:translateX(0)}
  
  .main{
    margin-right:0;
    padding:16px;
    padding-bottom:100px;
  }
  
  .mobile-btn{display:flex;align-items:center;justify-content:center}
  
  .header{
    padding:20px;
    border-radius:var(--radius-md);
    margin-bottom:16px;
  }
  
  .header h1{font-size:1.25rem}
  .header p{font-size:0.85rem}
  
  .card{
    padding:18px;
    border-radius:var(--radius-md);
    margin-bottom:14px;
  }
  
  .grid{grid-template-columns:1fr;gap:14px}
  
  .stat-num{font-size:1.5rem}
  .stat-label{font-size:0.8rem}
  
  .btn{
    padding:12px 18px;
    font-size:0.85rem;
    width:100%;
    justify-content:center;
    margin-left:0;
    margin-bottom:8px;
  }
  
  .btn-sm{
    width:auto;
    padding:10px 14px;
  }
  
  .form-input,.form-select,.form-textarea{
    padding:14px;
    font-size:16px; /* ŸäŸÖŸÜÿπ ÿßŸÑÿ≤ŸàŸÖ ÿπŸÑŸâ iOS */
  }
  
  .modal{
    border-radius:var(--radius-lg) var(--radius-lg) 0 0;
    max-height:85vh;
    margin-top:auto;
  }
  
  .modal-head{padding:16px 20px}
  .modal-body{padding:20px}
  .modal-foot{padding:16px 20px;flex-direction:column}
  .modal-foot .btn{width:100%;margin:0}
  
  .member-item{
    padding:14px;
    flex-wrap:wrap;
  }
  
  .member-avatar{width:44px;height:44px}
  .member-name{font-size:0.9rem}
  
  .tx-item{
    padding:12px 0;
    gap:12px;
  }
  
  .tx-icon{width:40px;height:40px}
  .tx-title{font-size:0.9rem}
  .tx-amount{font-size:0.95rem}
  
  #map{height:300px;border-radius:var(--radius-md)}
  
  .news-card{margin-bottom:14px}
  .news-card-img{height:140px}
  .news-card-body{padding:16px}
  .news-card-title{font-size:1rem}
  
  .toast{
    bottom:90px;
    padding:12px 20px;
    font-size:0.85rem;
    max-width:calc(100% - 40px);
  }
  
  .admin-stats{gap:10px}
  .admin-stat{padding:12px 16px;flex:1;min-width:calc(50% - 5px)}
  .admin-stat-num{font-size:1.3rem}
  
  /* Overlay ÿπŸÜÿØ ŸÅÿ™ÿ≠ Sidebar */
  .sidebar-overlay{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    z-index:99;
  }
  
  .sidebar-overlay.show{display:block}
}
.reg-container{max-width:600px;margin:0 auto}
.reg-header{background:linear-gradient(135deg,var(--green),var(--red));padding:30px;border-radius:15px 15px 0 0;text-align:center;position:relative;overflow:hidden}
.reg-header::before{content:'';position:absolute;top:0;left:0;right:0;height:8px;background:linear-gradient(90deg,#000,#fff,#009639)}
.reg-header::after{content:'';position:absolute;bottom:0;left:0;right:0;height:8px;background:linear-gradient(90deg,#000,#fff,#009639)}
.reg-flag{font-size:3rem;margin-bottom:10px}
.reg-title{font-size:1.5rem;font-weight:700;color:white;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
.reg-subtitle{color:rgba(255,255,255,0.9);font-size:0.9rem;margin-top:5px}
.reg-form{background:var(--card);padding:25px;border-radius:0 0 15px 15px;border:1px solid var(--border);border-top:none}
.reg-section{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid var(--border)}
.reg-section:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}
.reg-section-title{font-size:0.9rem;font-weight:700;color:var(--gold);margin-bottom:15px;display:flex;align-items:center;gap:8px}
.reg-row{display:grid;grid-template-columns:1fr 1fr;gap:15px}
@media(max-width:500px){.reg-row{grid-template-columns:1fr}}
.reg-privacy{background:var(--dark);padding:15px;border-radius:10px;margin-bottom:15px}
.reg-privacy-title{font-size:0.85rem;font-weight:600;margin-bottom:10px;color:var(--green)}
.reg-submit{width:100%;padding:15px;background:linear-gradient(135deg,var(--green),#007a2f);color:white;border:none;border-radius:10px;font-family:inherit;font-size:1rem;font-weight:700;cursor:pointer;margin-top:10px}
.reg-submit:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(0,150,57,0.4)}
.reg-success{display:none;text-align:center;padding:40px 20px}
.reg-success.show{display:block}
.reg-success-icon{font-size:4rem;margin-bottom:15px}
.reg-success-title{font-size:1.3rem;font-weight:700;color:var(--green);margin-bottom:10px}
.reg-success-text{color:var(--muted);margin-bottom:20px}
.pending-item{display:flex;align-items:center;gap:12px;padding:15px;background:var(--dark);border-radius:10px;margin-bottom:10px;border-right:4px solid var(--gold)}
.pending-info{flex:1}
.pending-name{font-weight:600;font-size:0.95rem}
.pending-details{font-size:0.8rem;color:var(--muted);margin-top:4px}
.pending-date{font-size:0.75rem;color:var(--gold)}
.pending-actions{display:flex;gap:8px}
.family-member-card{background:var(--dark);border:1px solid var(--border);border-radius:10px;padding:15px;margin-top:10px;position:relative}
.family-member-card .remove-family{position:absolute;top:10px;left:10px;background:var(--red);color:white;border:none;border-radius:50%;width:25px;height:25px;cursor:pointer;font-size:14px}
.family-member-card .form-group{margin-bottom:10px}
.family-member-title{font-weight:600;color:var(--gold);margin-bottom:10px;font-size:0.9rem}
.pending-card{background:var(--dark);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:15px;border-right:4px solid var(--gold)}
.pending-card-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px}
.pending-card-info h3{margin:0;font-size:1.1rem;color:var(--text)}
.pending-card-info p{margin:5px 0 0;font-size:0.8rem;color:var(--muted)}
.pending-card-badge{background:var(--gold);color:var(--black);padding:4px 10px;border-radius:20px;font-size:0.75rem;font-weight:600}
.pending-card-details{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin-bottom:15px}
.pending-detail-item{background:rgba(255,255,255,0.05);padding:10px;border-radius:8px}
.pending-detail-item label{display:block;font-size:0.7rem;color:var(--muted);margin-bottom:3px}
.pending-detail-item span{font-size:0.9rem}
.pending-family-section{background:rgba(0,150,57,0.1);border:1px solid var(--green);border-radius:10px;padding:15px;margin-bottom:15px}
.pending-family-title{font-weight:600;color:var(--green);margin-bottom:10px;font-size:0.9rem}
.pending-family-member{background:var(--dark);padding:10px;border-radius:8px;margin-bottom:8px}
.pending-family-member:last-child{margin-bottom:0}
.pending-card-actions{display:flex;gap:10px;justify-content:flex-end;padding-top:15px;border-top:1px solid var(--border)}
.pending-privacy-options{background:rgba(0,150,57,0.1);border:1px solid rgba(0,150,57,0.3);border-radius:10px;padding:12px;margin-bottom:15px}
.pending-privacy-title{font-size:0.85rem;font-weight:600;color:var(--gold);margin-bottom:10px}
.pending-privacy-item{font-size:0.85rem;color:var(--text);padding:5px 0}
.approved-card{border-right-color:var(--green);opacity:0.8}
.family-card{background:var(--dark);border:1px solid var(--border);border-radius:12px;margin-bottom:15px;overflow:hidden}
.family-card-header{padding:15px 20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;border-right:4px solid var(--green);transition:background 0.2s}
.family-card-header:hover{background:rgba(255,255,255,0.03)}
.family-card-header h3{margin:0;font-size:1rem;display:flex;align-items:center;gap:10px}
.family-card-header .family-count{background:var(--green);color:white;padding:3px 10px;border-radius:15px;font-size:0.75rem}
.family-card-header .family-date{font-size:0.75rem;color:var(--muted)}
.family-card-header .expand-icon{font-size:1.2rem;transition:transform 0.3s}
.family-card.open .expand-icon{transform:rotate(180deg)}
.family-card-body{display:none;padding:0 20px 20px;border-top:1px solid var(--border)}
.family-card.open .family-card-body{display:block}
.family-member-row{display:flex;align-items:center;gap:15px;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;margin-top:10px}
.family-member-row.head{background:rgba(0,150,57,0.15);border:1px solid var(--green)}
.family-member-avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--green),var(--red));display:flex;align-items:center;justify-content:center;font-size:1.2rem}
.family-member-info{flex:1}
.family-member-info h4{margin:0;font-size:0.95rem}
.family-member-info p{margin:3px 0 0;font-size:0.8rem;color:var(--muted)}
.family-member-badge{font-size:0.7rem;padding:3px 8px;border-radius:10px;background:var(--gold);color:var(--black)}
.family-actions{display:flex;gap:8px;margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}
.reg-sheet-container{background:white;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,0.3)}
.reg-sheet-header{background:linear-gradient(135deg,#009639,#CE1126);padding:20px;text-align:center;position:relative}
.reg-sheet-header::before{content:'';position:absolute;top:0;left:0;right:0;height:8px;background:linear-gradient(90deg,#000 33%,#fff 33%,#fff 66%,#009639 66%)}
.reg-sheet-header h2{color:white;margin:10px 0 5px;font-size:1.3rem}
.reg-sheet-header p{color:rgba(255,255,255,0.9);font-size:0.85rem;margin:0}
.reg-sheet-header .sheet-logo{font-size:2.5rem}
.reg-sheet-table-wrapper{overflow-x:auto;padding:15px}
.reg-sheet-table{width:100%;border-collapse:collapse;min-width:1200px;font-size:0.85rem}
.reg-sheet-table th{background:linear-gradient(135deg,#1a1a1a,#333);color:white;padding:10px 8px;text-align:center;font-weight:600;border:1px solid #444;white-space:nowrap}
.reg-sheet-table td{padding:8px;border:1px solid #ddd;text-align:center;background:white}
.reg-sheet-table tr:nth-child(even) td{background:#f9f9f9}
.reg-sheet-table input{width:100%;padding:6px;border:1px solid #ddd;border-radius:4px;text-align:center;font-family:inherit;font-size:0.85rem}
.reg-sheet-table input:focus{outline:none;border-color:#009639;background:#f0fff4}
.reg-sheet-table .row-num{background:#f0f0f0;font-weight:600;color:#333;width:40px}
.reg-sheet-table .paid-yes{background:#d4edda;color:#155724}
.reg-sheet-table .paid-no{background:#f8d7da;color:#721c24}
.reg-sheet-table select{padding:6px;border:1px solid #ddd;border-radius:4px;font-family:inherit;font-size:0.85rem;cursor:pointer}
.reg-sheet-footer{background:#f5f5f5;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;border-top:3px solid;border-image:linear-gradient(90deg,#000,#fff,#009639,#CE1126) 1}
.reg-sheet-stats{display:flex;gap:20px;flex-wrap:wrap}
.reg-sheet-stat{text-align:center}
.reg-sheet-stat-num{font-size:1.3rem;font-weight:700;color:#009639}
.reg-sheet-stat-label{font-size:0.75rem;color:#666}
.reg-sheet-actions{display:flex;gap:10px;flex-wrap:wrap}
.sheet-btn{padding:10px 20px;border:none;border-radius:8px;font-family:inherit;font-size:0.85rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:5px}
.sheet-btn-green{background:#009639;color:white}
.sheet-btn-red{background:#CE1126;color:white}
.sheet-btn-gold{background:#C9A227;color:#1a1a1a}
.sheet-btn-gray{background:#666;color:white}
/* Bylaws Styles */
.bylaws-page{position:relative;min-height:600px}
.bylaws-container{position:relative;width:100%;height:600px;display:flex;justify-content:center;align-items:center}
.bylaws-lines-svg{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1}
.connection-line{stroke-width:2;fill:none;stroke-dasharray:8 4;animation:bylawsDash 20s linear infinite}
.connection-line.faded{opacity:0.15}
@keyframes bylawsDash{to{stroke-dashoffset:-240}}
.bylaws-center{position:absolute;width:150px;height:150px;border-radius:50%;background:linear-gradient(135deg,#ce1126 0%,#a00d1e 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:10;box-shadow:0 0 0 5px rgba(255,255,255,0.2),0 0 0 10px rgba(0,151,54,0.3),0 15px 50px rgba(0,0,0,0.5);transition:all 0.5s cubic-bezier(0.4,0,0.2,1)}
.bylaws-center h3{font-size:0.85rem;color:#fff;line-height:1.4;padding:12px}
.bylaws-center.shrink{transform:scale(0.5);opacity:0.4}
.bylaws-node{position:absolute;width:100px;height:100px;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;cursor:pointer;z-index:5;transition:all 0.5s cubic-bezier(0.4,0,0.2,1);box-shadow:0 8px 30px rgba(0,0,0,0.4)}
.bylaws-node:hover{transform:scale(1.12);z-index:15}
.bylaws-node.shrink{transform:scale(0.4);opacity:0.25;pointer-events:none}
.bylaws-node .icon{font-size:1.8rem;margin-bottom:5px}
.bylaws-node .title{font-size:0.75rem;color:#fff;font-weight:700}
.node-green{background:linear-gradient(135deg,#009736,#006d28)}
.node-red{background:linear-gradient(135deg,#ce1126,#9a0d1e)}
.node-orange{background:linear-gradient(135deg,#e67e22,#d35400)}
.node-blue{background:linear-gradient(135deg,#3498db,#2980b9)}
.node-purple{background:linear-gradient(135deg,#9b59b6,#7d3c98)}
.node-teal{background:linear-gradient(135deg,#1abc9c,#16a085)}
.node-gold{background:linear-gradient(135deg,#f39c12,#d68910)}
.bylaws-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:9998;opacity:0;visibility:hidden;transition:all 0.3s}
.bylaws-overlay.show{opacity:1;visibility:visible}
.bylaws-panel{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);width:90%;max-width:450px;max-height:80vh;border-radius:25px;z-index:9999;opacity:0;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);display:flex;flex-direction:column;overflow:hidden}
.bylaws-panel.show{transform:translate(-50%,-50%) scale(1);opacity:1}
.bylaws-panel-header{padding:20px;display:flex;align-items:center;gap:15px;border-bottom:1px solid rgba(255,255,255,0.2)}
.bylaws-panel-close{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,0.2);border:none;color:#fff;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s}
.bylaws-panel-close:hover{background:rgba(255,255,255,0.3);transform:rotate(90deg)}
.bylaws-panel-icon{font-size:2.5rem}
.bylaws-panel-title h3{color:#fff;font-size:1.3rem;margin:0}
.bylaws-panel-title p{color:rgba(255,255,255,0.8);font-size:0.85rem;margin-top:5px}
.bylaws-panel-body{padding:20px;overflow-y:auto;flex:1}
.bylaws-section{margin-bottom:20px}
.bylaws-section h4{color:#fff;font-size:1rem;margin-bottom:12px;display:flex;align-items:center;gap:8px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,0.2)}
.bylaws-list{list-style:none;padding:0;margin:0}
.bylaws-list li{background:rgba(0,0,0,0.2);border-radius:12px;padding:12px 15px;margin-bottom:8px;display:flex;flex-direction:column;gap:8px;transition:all 0.3s;border-right:3px solid transparent;cursor:pointer}
.bylaws-list li:hover{background:rgba(0,0,0,0.3);border-right-color:#fff}
.bylaws-list li.expanded{background:rgba(0,0,0,0.35);border-right-color:#ffd700}
.bylaws-item-header{display:flex;align-items:center;gap:12px}
.bylaws-list .item-icon{font-size:1.2rem;flex-shrink:0}
.bylaws-list .item-text{color:#fff;font-size:0.9rem;line-height:1.5;flex:1}
.bylaws-item-arrow{font-size:0.8rem;transition:transform 0.3s;opacity:0.7}
.bylaws-list li.expanded .bylaws-item-arrow{transform:rotate(180deg)}
.bylaws-item-detail{display:none;padding:10px 15px;background:rgba(255,255,255,0.1);border-radius:8px;margin-top:5px;font-size:0.85rem;line-height:1.7;color:rgba(255,255,255,0.9)}
.bylaws-list li.expanded .bylaws-item-detail{display:block}
.bylaws-edit-section{margin-top:20px;padding:20px;background:var(--card);border-radius:15px;border:1px solid var(--gold);display:none}
.bylaws-edit-section.show{display:block}
/* Voting Styles */
.voting-card{background:var(--card);border-radius:15px;padding:20px;margin-bottom:20px;border:1px solid var(--border)}
.voting-card.active-vote{border-color:var(--green);box-shadow:0 0 20px rgba(0,150,57,0.2)}
.voting-card.closed-vote{opacity:0.7}
.voting-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.voting-title{font-size:1.1rem;font-weight:700;color:var(--text)}
.voting-status{padding:5px 12px;border-radius:20px;font-size:0.75rem;font-weight:600}
.voting-status.open{background:var(--green);color:white}
.voting-status.closed{background:var(--red);color:white}
.voting-question{font-size:1rem;color:var(--text);margin-bottom:20px;padding:15px;background:rgba(255,255,255,0.05);border-radius:10px;line-height:1.6}
.voting-options{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}
.voting-option{display:flex;align-items:center;gap:12px;padding:15px;background:var(--dark);border-radius:10px;cursor:pointer;transition:all 0.3s;border:2px solid transparent}
.voting-option:hover{background:rgba(255,255,255,0.05);border-color:var(--green)}
.voting-option.selected{border-color:var(--green);background:rgba(0,150,57,0.25);box-shadow:0 0 15px rgba(0,150,57,0.3)}
.voting-option-radio{width:22px;height:22px;border-radius:50%;border:2px solid var(--muted);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.voting-option.selected .voting-option-radio{border-color:var(--green);background:var(--green)}
.voting-option.selected .voting-option-radio::after{content:'‚úì';color:white;font-size:0.8rem}
.voting-option.selected .voting-option-text{color:var(--green);font-weight:700}
.voting-option-text{flex:1;font-size:0.95rem;transition:all 0.3s}
.voting-code-input{display:flex;gap:10px;margin-bottom:15px}
.voting-code-input input{flex:1;padding:12px 15px;background:var(--dark);border:1px solid var(--border);border-radius:10px;color:var(--text);font-family:inherit;font-size:1rem;text-align:center;letter-spacing:3px}
.voting-submit{width:100%;padding:15px;background:linear-gradient(135deg,var(--green),#007a2f);color:white;border:none;border-radius:10px;font-family:inherit;font-size:1rem;font-weight:600;cursor:pointer}
.voting-submit:disabled{background:var(--muted);cursor:not-allowed}
.voting-results{margin-top:20px}
.voting-result-bar{margin-bottom:15px}
.voting-result-label{display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem}
/* Multi-select voting styles */
.voting-option.multi-select{border:2px solid var(--border);position:relative}
.voting-option.multi-select.selected{border-color:var(--green);background:rgba(0,150,57,0.3);box-shadow:0 0 20px rgba(0,150,57,0.4)}
.voting-option.multi-select.selected .voting-option-text{color:#00ff55;font-weight:700;font-size:1rem}
.voting-option.multi-select .voting-option-radio{border-radius:4px}
.voting-option.multi-select.selected .voting-option-radio{background:var(--green);border-color:var(--green)}
.voting-option.multi-select.selected .voting-option-radio::after{content:'‚úì';color:white;font-size:0.9rem;font-weight:bold}
.voting-option.disabled{opacity:0.5;cursor:not-allowed;pointer-events:none}
.voting-selection-info{background:rgba(201,162,39,0.15);border:1px solid var(--gold);border-radius:8px;padding:10px 15px;margin-bottom:15px;display:flex;justify-content:space-between;align-items:center}
.voting-selection-count{font-size:1.1rem;font-weight:700;color:var(--gold)}
.voting-selection-max{font-size:0.85rem;color:var(--muted)}
.vote-result-item{display:flex;align-items:center;gap:12px;padding:12px;background:var(--dark);border-radius:10px;margin-bottom:8px}
.vote-result-name{flex:1;font-weight:600}
.vote-result-count{font-size:1.2rem;font-weight:700;color:var(--green)}
.vote-result-bar-bg{flex:2;height:24px;background:var(--border);border-radius:12px;overflow:hidden}
.vote-result-bar-fill{height:100%;background:linear-gradient(90deg,var(--green),#007a2f);border-radius:12px;display:flex;align-items:center;justify-content:flex-end;padding-right:8px;color:white;font-size:0.75rem;font-weight:600;min-width:fit-content}
/* New voting styles */
.multi-opt-row{display:flex;align-items:center;gap:15px;padding:16px 20px;margin-bottom:10px;background:#2a2a3a;border:3px solid #444;border-radius:10px;cursor:pointer;transition:all 0.2s}
.multi-opt-row:hover{border-color:#666}
.multi-opt-row.selected{background:#1a4a2a;border-color:#00dd44}
.multi-opt-check{width:26px;height:26px;border:3px solid #666;border-radius:5px;background:#333;display:flex;align-items:center;justify-content:center}
.multi-opt-row.selected .multi-opt-check{background:#00aa33;border-color:#00dd44}
.multi-opt-row.selected .multi-opt-check::after{content:'‚úì';color:#fff;font-weight:bold}
.multi-opt-name{font-size:1.05rem;color:#eee}
.multi-opt-row.selected .multi-opt-name{color:#00ff55;font-weight:bold}
.yesno-options{display:flex;flex-direction:column;gap:10px;margin-bottom:15px}
.yesno-opt{display:flex;align-items:center;gap:12px;padding:15px;background:#2a2a3a;border:3px solid #444;border-radius:10px;cursor:pointer;transition:all 0.2s}
.yesno-opt:hover{border-color:#666}
.yesno-opt.selected{background:#1a4a2a;border-color:#00dd44}
.yesno-radio{width:22px;height:22px;border-radius:50%;border:3px solid #666;background:#333}
.yesno-opt.selected .yesno-radio{background:#00aa33;border-color:#00dd44}
.yesno-opt.selected span{color:#00ff55;font-weight:bold}
/* Multi-vote new styles */
.multi-vote-row{display:flex;align-items:center;gap:15px;padding:18px 20px;background:#252540;border-radius:12px;cursor:pointer;border:3px solid #555;margin-bottom:12px;transition:all 0.2s}
.multi-vote-row:hover{background:#2a2a50;border-color:#777}
.multi-vote-row.selected{background:#0f5f2f !important;border-color:#4f4 !important;box-shadow:0 0 20px rgba(68,255,68,0.4)}
.multi-vote-check{width:30px;height:30px;min-width:30px;border-radius:6px;border:3px solid #777;background:#333;display:flex;align-items:center;justify-content:center;font-size:20px;transition:all 0.2s}
.multi-vote-row.selected .multi-vote-check{background:#2a2 !important;border-color:#4f4 !important}
.multi-vote-row.selected .multi-vote-check::after{content:'‚úì';color:white;font-weight:bold}
.multi-vote-name{flex:1;font-size:1.1rem;color:#ddd;transition:all 0.2s}
.multi-vote-row.selected .multi-vote-name{color:#4f4 !important;font-weight:bold}
.voting-result-progress{height:35px;background:var(--dark);border-radius:8px;overflow:hidden;position:relative}
.voting-result-fill{height:100%;border-radius:8px;display:flex;align-items:center;padding:0 15px;color:white;font-weight:700;font-size:0.95rem;transition:width 0.5s;min-width:45px}
.voting-result-fill.yes{background:linear-gradient(135deg,var(--green),#007a2f);justify-content:flex-end}
.voting-result-fill.no{background:linear-gradient(135deg,var(--red),#a00d1e);justify-content:flex-end}
.voting-stats{display:flex;gap:20px;margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}
.voting-stat{text-align:center}
.voting-stat-value{font-size:1.5rem;font-weight:700;color:var(--gold)}
.voting-stat-label{font-size:0.75rem;color:var(--muted)}
.voting-admin-panel{background:var(--card);border-radius:15px;padding:20px;margin-bottom:20px;border:1px solid var(--gold)}
.voting-codes-list{max-height:300px;overflow-y:auto;margin-top:15px}
.voting-code-item{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background:var(--dark);border-radius:8px;margin-bottom:8px}
.voting-code-item.used{opacity:0.5;text-decoration:line-through}
.voting-code-name{font-weight:600}
.voting-code-value{font-family:monospace;font-size:1.1rem;color:var(--gold);letter-spacing:2px}
.voting-code-status{font-size:0.75rem;padding:3px 8px;border-radius:10px}
.voting-code-status.available{background:var(--green);color:white}
.voting-code-status.used{background:var(--red);color:white}
.voting-empty{text-align:center;padding:40px;color:var(--muted)}
.voting-empty-icon{font-size:3rem;margin-bottom:15px}
.voting-voted-msg{text-align:center;padding:20px;background:rgba(0,150,57,0.1);border-radius:10px;color:var(--green);font-weight:600}
.sheet-controls{background:var(--card);border-radius:15px;padding:20px;margin-bottom:20px;border:1px solid var(--border)}
.sheet-controls-row{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:15px}
.sheet-stats-row{display:flex;flex-wrap:wrap;gap:20px;font-size:0.9rem;color:var(--muted)}
.sheet-stats-row strong{color:var(--gold)}
.reg-sheet-container{background:white;border-radius:15px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,0.3)}
.reg-sheet-header{background:linear-gradient(135deg,#009639,#CE1126);padding:25px;text-align:center;position:relative}
.reg-sheet-header::before{content:'';position:absolute;top:0;left:0;right:0;height:10px;background:linear-gradient(90deg,#000 33%,#fff 33%,#fff 66%,#009639 66%)}
.reg-sheet-header h2{color:white;margin:10px 0 5px;font-size:1.4rem}
.reg-sheet-header p{color:rgba(255,255,255,0.9);font-size:0.9rem;margin:0}
.reg-sheet-header .sheet-logo{font-size:2.5rem}
.reg-sheet-header .sheet-year{font-size:1.2rem;font-weight:700;margin-top:10px;background:rgba(255,255,255,0.2);display:inline-block;padding:5px 20px;border-radius:20px}
.reg-sheet-table-wrapper{overflow-x:auto;padding:0}
.reg-sheet-table{width:100%;border-collapse:collapse;min-width:900px;font-size:0.85rem}
.reg-sheet-table th{background:#1a1a1a;color:white;padding:12px 8px;text-align:center;font-weight:600;border:1px solid #333;white-space:nowrap}
.reg-sheet-table td{padding:0;border:1px solid #ccc;text-align:center;background:white;height:35px}
.reg-sheet-table tr:nth-child(even) td{background:#f9f9f9}
.reg-sheet-table input{width:100%;height:100%;padding:8px;border:none;text-align:center;font-family:inherit;font-size:0.85rem;background:transparent}
.reg-sheet-table input:focus{outline:none;background:#fffde7}
.reg-sheet-table input::placeholder{color:#ccc}
.reg-sheet-table .row-num{background:#f0f0f0;font-weight:600;color:#333;width:40px;padding:8px}
.reg-sheet-footer-print{padding:15px 20px;text-align:center;border-top:3px solid;border-image:linear-gradient(90deg,#000,#009639,#fff,#CE1126,#000) 1}
.reg-sheet-footer-print .footer-line{height:2px;background:linear-gradient(90deg,transparent,#009639,#CE1126,transparent);margin-bottom:10px}
.reg-sheet-footer-print p{color:#333;font-size:0.9rem;margin:0}
.archive-section{margin-top:20px}
.archive-item{display:flex;justify-content:space-between;align-items:center;padding:15px;background:var(--dark);border-radius:10px;margin-bottom:10px;border-right:4px solid var(--gold)}
.archive-item-info h4{margin:0;font-size:0.95rem}
.archive-item-info p{margin:5px 0 0;font-size:0.8rem;color:var(--muted)}
.archive-item-actions{display:flex;gap:8px}
@media print{
.sidebar,.header,.sheet-controls,.archive-section,.mobile-btn,.toast{display:none!important}
.main{margin:0!important;padding:0!important}
.page{display:none!important}
#pageRegistrationSheet{display:block!important}
.reg-sheet-container{box-shadow:none;border-radius:0}
.reg-sheet-table{font-size:11pt}
.reg-sheet-table th{background:#000!important;color:#fff!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
.reg-sheet-table input{border:none;background:transparent}
.reg-sheet-header{-webkit-print-color-adjust:exact;print-color-adjust:exact}
}
.reg-sheet-table th[contenteditable="true"]{cursor:text}
.reg-sheet-table th[contenteditable="true"]:focus{outline:2px solid #C9A227;background:#444}
.reg-sheet-header h2[contenteditable="true"],.reg-sheet-header p[contenteditable="true"]{cursor:text;padding:5px;border-radius:5px}
.reg-sheet-header h2[contenteditable="true"]:focus,.reg-sheet-header p[contenteditable="true"]:focus{outline:2px solid white;background:rgba(255,255,255,0.2)}
/* Language Switcher */
.lang-switcher{display:flex;gap:5px;margin-bottom:10px;justify-content:center}
.lang-btn{padding:8px 12px;border:2px solid var(--border);background:transparent;color:var(--muted);font-family:inherit;font-size:0.75rem;cursor:pointer;border-radius:8px;transition:all 0.3s}
.lang-btn:hover{border-color:var(--green);color:var(--text)}
.lang-btn.active{background:var(--green);border-color:var(--green);color:white}
.lang-btn .flag{font-size:1rem;margin-left:5px}
html[dir="ltr"] body{direction:ltr;text-align:left}
html[dir="ltr"] .sidebar{right:auto;left:0;border-left:none;border-right:1px solid var(--border)}
html[dir="ltr"] .main{margin-right:0;margin-left:260px}
html[dir="ltr"] .nav-btn{text-align:left}
html[dir="ltr"] .header::before{border-radius:15px 15px 0 0}
html[dir="ltr"] .pending-card{border-right:none;border-left:4px solid var(--gold)}
html[dir="ltr"] .family-card-header{border-right:none;border-left:4px solid var(--green)}
html[dir="ltr"] .archive-item{border-right:none;border-left:4px solid var(--gold)}
@media(max-width:768px){html[dir="ltr"] .sidebar{transform:translateX(-100%)}html[dir="ltr"] .sidebar.open{transform:translateX(0)}html[dir="ltr"] .main{margin-left:0}html[dir="ltr"] .mobile-btn{right:auto;left:20px}}
/* Inbox & Messages Styles */
.inbox-badge{background:var(--red);color:white;font-size:0.7rem;padding:2px 6px;border-radius:10px;margin-right:5px}
.message-card{background:var(--dark);border-radius:12px;padding:15px;margin-bottom:12px;border-right:4px solid var(--gold);cursor:pointer;transition:all 0.3s}
.message-card:hover{background:rgba(255,255,255,0.05)}
.message-card.unread{border-right-color:var(--green);background:rgba(0,150,57,0.1)}
.message-card.unread .message-subject{font-weight:700}
.message-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}
.message-sender{font-weight:600;font-size:0.95rem;color:var(--text)}
.message-date{font-size:0.75rem;color:var(--muted)}
.message-subject{font-size:0.9rem;color:var(--text);margin-bottom:8px}
.message-preview{font-size:0.85rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.message-status{display:inline-block;padding:3px 8px;border-radius:10px;font-size:0.7rem;font-weight:600}
.message-status.unread{background:var(--green);color:white}
.message-status.read{background:var(--border);color:var(--muted)}
.message-detail{background:var(--card);border-radius:15px;padding:20px;margin-bottom:20px;border:1px solid var(--border)}
.message-detail-header{display:flex;justify-content:space-between;align-items:flex-start;padding-bottom:15px;border-bottom:1px solid var(--border);margin-bottom:15px}
.message-detail-sender h3{margin:0;font-size:1.1rem;color:var(--gold)}
.message-detail-sender p{margin:5px 0 0;font-size:0.85rem;color:var(--muted)}
.message-detail-info{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:15px;padding:15px;background:var(--dark);border-radius:10px}
.message-info-item{display:flex;flex-direction:column;gap:3px}
.message-info-item label{font-size:0.75rem;color:var(--muted)}
.message-info-item span{font-size:0.9rem;color:var(--text)}
.message-info-item a{color:var(--green);text-decoration:none}
.message-body{line-height:1.8;font-size:0.95rem;padding:15px;background:var(--dark);border-radius:10px;white-space:pre-wrap}
.contact-form{max-width:600px;margin:0 auto}
.contact-success{display:none;text-align:center;padding:40px 20px}
.contact-success.show{display:block}
.contact-success-icon{font-size:4rem;margin-bottom:15px}
.inbox-stats{display:flex;gap:20px;margin-bottom:20px}
.inbox-stat{background:var(--dark);padding:15px 20px;border-radius:10px;text-align:center}
.inbox-stat-num{font-size:1.5rem;font-weight:700;color:var(--gold)}
.inbox-stat-label{font-size:0.8rem;color:var(--muted)}
.inbox-filters{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap}
/* Custom Marker Cluster Styles */
.marker-cluster-small,.marker-cluster-medium,.marker-cluster-large{background:rgba(0,150,57,0.6)!important}
.marker-cluster-small div,.marker-cluster-medium div,.marker-cluster-large div{background:var(--green)!important;color:white!important;font-weight:700;font-family:'Tajawal',sans-serif}
.marker-cluster-small{background:rgba(0,150,57,0.5)!important}
.marker-cluster-medium{background:rgba(206,17,38,0.5)!important}
.marker-cluster-medium div{background:var(--red)!important}
.marker-cluster-large{background:rgba(201,162,39,0.5)!important}
.marker-cluster-large div{background:var(--gold)!important;color:#1a1a1a!important}
.leaflet-popup-content{direction:rtl;text-align:right}
.spiderfy-popup{max-height:250px;overflow-y:auto}
.spiderfy-popup .member-item{padding:10px;border-bottom:1px solid var(--border);cursor:pointer;transition:background 0.2s}
.spiderfy-popup .member-item:hover{background:rgba(0,150,57,0.1)}
.spiderfy-popup .member-item:last-child{border-bottom:none}
/* Live Stream Styles */
.live-container{display:grid;grid-template-columns:1fr 350px;gap:20px;margin-top:20px}
@media(max-width:900px){.live-container{grid-template-columns:1fr;}}
.live-video-section{background:var(--card);border-radius:15px;overflow:hidden;border:2px solid var(--red)}
.live-header{background:linear-gradient(135deg,var(--red),#8B0000);padding:15px 20px;display:flex;align-items:center;justify-content:space-between}
.live-indicator{display:flex;align-items:center;gap:10px;color:white;font-weight:700}
.live-dot{width:12px;height:12px;background:#ff0000;border-radius:50%;animation:livePulse 1s infinite}
@keyframes livePulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.5;transform:scale(1.2)}}
.live-title{color:white;font-size:1.1rem}
.live-viewers{color:rgba(255,255,255,0.8);font-size:0.85rem}
.live-video-wrapper{position:relative;padding-bottom:56.25%;height:0;background:#000}
.live-video-wrapper iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:none}
.live-offline{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);color:var(--muted)}
.live-offline-icon{font-size:4rem;margin-bottom:15px;opacity:0.5}
.live-offline-text{font-size:1.1rem}
.live-voting-section{background:var(--card);border-radius:15px;padding:20px;border:1px solid var(--border);max-height:calc(56.25vw * 0.6 + 100px);overflow-y:auto}
.live-voting-header{text-align:center;padding-bottom:15px;border-bottom:2px solid var(--gold);margin-bottom:15px}
.live-voting-header h3{color:var(--gold);margin:0 0 5px}
.live-voting-header p{color:var(--muted);font-size:0.85rem;margin:0}
.live-vote-card{background:var(--dark);border-radius:10px;padding:15px;margin-bottom:15px;border-right:3px solid var(--green)}
.live-vote-title{font-weight:700;color:var(--text);margin-bottom:10px}
.live-vote-options{display:flex;flex-direction:column;gap:8px;margin:15px 0}
.live-vote-option{padding:12px;background:rgba(255,255,255,0.03);border:2px solid var(--border);border-radius:8px;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:10px}
.live-vote-option:hover{border-color:var(--green);background:rgba(0,150,57,0.1)}
.live-vote-option.selected{border-color:var(--green);background:rgba(0,150,57,0.2)}
.live-vote-option .radio{width:18px;height:18px;border:2px solid var(--border);border-radius:50%;transition:all 0.3s}
.live-vote-option.selected .radio{border-color:var(--green);background:var(--green)}
.live-code-input{display:flex;gap:10px;margin-top:15px}
.live-code-input input{flex:1;text-align:center;font-size:1.1rem;letter-spacing:3px;text-transform:uppercase}
.live-no-votes{text-align:center;padding:30px;color:var(--muted)}
.live-admin-panel{background:var(--card);border-radius:15px;padding:20px;margin-bottom:20px;border:2px solid var(--gold)}
.live-url-input{display:flex;gap:10px;margin:15px 0}
.live-url-input input{flex:1}
.live-status{display:flex;align-items:center;gap:15px;padding:15px;background:var(--dark);border-radius:10px;margin-top:15px}
.live-status.active{border:2px solid var(--green)}
.live-status.inactive{border:2px solid var(--red)}
</style>
</head>
<body>
<!-- ========== ÿßŸÑÿÆŸÑŸÅŸäÿ© 1: ÿßŸÑŸÖÿ≥ÿ¨ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ========== -->
<div class="animated-bg bg-aqsa active" id="bgAqsa" style="display:block;">
<div class="stars"></div>
<div class="moon"></div>
<div class="particles">
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
<div class="particle"></div>
</div>
<div class="alaqsa-container">
<div class="minaret minaret-left"><div class="minaret-top"></div></div>
<div class="minaret minaret-right"><div class="minaret-top"></div></div>
<div class="dome"></div>
<div class="crescent">‚ò™</div>
<div class="dome-base"></div>
<div class="walls"></div>
<div class="windows">
<div class="window"></div>
<div class="window"></div>
<div class="window"></div>
<div class="window"></div>
<div class="window"></div>
</div>
</div>
<div class="flag-decoration">
<div class="flag-stripe flag-black"></div>
<div class="flag-stripe flag-white"></div>
<div class="flag-stripe flag-green"></div>
<div class="flag-triangle"></div>
</div>
</div>

<!-- ========== ÿßŸÑÿÆŸÑŸÅŸäÿ© 2: ÿ£ÿ®Ÿäÿßÿ™ ÿßŸÑÿ¥ÿπÿ± ========== -->
<div class="animated-bg bg-poetry" id="bgPoetry">
<div class="stars"></div>
<div class="poetry-glow glow-gold"></div>
<div class="poetry-glow glow-green"></div>
<div class="poetry-glow glow-red"></div>
<div class="poetry-container"></div>
</div>

<!-- ========== ÿßŸÑÿÆŸÑŸÅŸäÿ© 3: ÿ≠ŸÖÿßŸÖÿ© ÿßŸÑÿ≥ŸÑÿßŸÖ ========== -->
<div class="animated-bg bg-dove" id="bgDove">
<div class="stars"></div>
<div class="dove">üïäÔ∏è</div>
<div class="dove">üïäÔ∏è</div>
<div class="dove">üïäÔ∏è</div>
<div class="dove">üïäÔ∏è</div>
<div class="dove">üïäÔ∏è</div>
<div class="olive-branch">üåø</div>
<div class="olive-branch">üåø</div>
<div class="olive-branch">üåø</div>
<div class="olive-branch">üåø</div>
<div class="olive-branch">üåø</div>
<div class="olive-branch">üåø</div>
<div class="peace-text">ŸÅŸÑÿ≥ÿ∑ŸäŸÜ<br>üáµüá∏<br>ÿ£ÿ±ÿ∂ ÿßŸÑÿ≥ŸÑÿßŸÖ</div>
</div>

<!-- ÿ≤ÿ± ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿÆŸÑŸÅŸäÿ© (ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑) -->
<div class="bg-switcher" id="bgSwitcher" style="display:none;">
<button class="bg-btn active" data-bg="1" title="ÿßŸÑŸÖÿ≥ÿ¨ÿØ ÿßŸÑÿ£ŸÇÿµŸâ">üïå</button>
<button class="bg-btn" data-bg="2" title="ÿ£ÿ®Ÿäÿßÿ™ ÿ¥ÿπÿ±Ÿäÿ©">üìú</button>
<button class="bg-btn" data-bg="3" title="ÿ≠ŸÖÿßŸÖÿ© ÿßŸÑÿ≥ŸÑÿßŸÖ">üïäÔ∏è</button>
</div>

<div class="app">
<aside class="sidebar" id="sidebar">
<div class="sidebar-header">
<div class="logo" id="logoContainer">üáµüá∏</div>
<div class="org-name">ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</div>
<div class="org-sub">Det palestinske samfunn i Rogaland</div>
</div>
<nav class="nav">
<div class="nav-title" data-i18n="publicPages">ÿßŸÑÿµŸÅÿ≠ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©</div>
<button class="nav-btn active" id="btnHome">üè† <span data-i18n="home">ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span></button>
<button class="nav-btn" id="btnBylaws">üìú <span data-i18n="bylaws">ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä</span></button>
<button class="nav-btn" id="btnVoting">üó≥Ô∏è <span data-i18n="voting">ÿßŸÑÿ™ÿµŸàŸäÿ™</span></button>
<button class="nav-btn" id="btnNews">üì∞ <span data-i18n="news">ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</span></button>
<button class="nav-btn" id="btnFinance">üí∞ <span data-i18n="finance">ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©</span></button>
<button class="nav-btn" id="btnMap">üó∫Ô∏è <span data-i18n="map">ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑŸÖŸÜÿ™ÿ≥ÿ®ŸäŸÜ</span></button>
<button class="nav-btn" id="btnRegister">üìù <span data-i18n="register">ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</span></button>
<button class="nav-btn" id="btnInvitation">üì® <span data-i18n="invitations">ŸÖÿ≠ÿ±ÿ± ÿßŸÑÿØÿπŸàÿßÿ™</span></button>
<button class="nav-btn" id="btnConfInvite">üèõÔ∏è <span>ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</span></button>
<button class="nav-btn" id="btnReports">üìä <span>ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</span></button>
<button class="nav-btn" id="btnContact">‚úâÔ∏è <span data-i18n="contactUs">ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</span></button>
<button class="nav-btn" id="btnGallery">üñºÔ∏è <span>ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±</span></button>
<button class="nav-btn hidden" id="btnLive">üî¥ <span data-i18n="liveStream">ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</span></button>
<div class="nav-title hidden" id="adminTitle" data-i18n="adminPanel">ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©</div>
<button class="nav-btn hidden" id="btnAdmin">‚öôÔ∏è <span data-i18n="settings">ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</span></button>
<button class="nav-btn hidden" id="btnMembers">üë• <span data-i18n="manageMembers">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</span></button>
<button class="nav-btn hidden" id="btnPending">üìã <span data-i18n="pendingRequests">ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</span></button>
<button class="nav-btn hidden" id="btnRegistrationSheet">üìä <span data-i18n="registrationSheet">ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ</span></button>
<button class="nav-btn hidden" id="btnManageTx">üí≥ <span data-i18n="manageTransactions">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™</span></button>
<button class="nav-btn hidden" id="btnManageNews">üì∞ <span data-i18n="manageNews">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</span></button>
<button class="nav-btn hidden" id="btnManageVoting">üó≥Ô∏è <span data-i18n="manageVoting">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™</span></button>
<button class="nav-btn hidden" id="btnInbox">üì¨ <span data-i18n="inbox">ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ</span> <span class="inbox-badge hidden" id="inboxBadge">0</span></button>
<button class="nav-btn hidden" id="btnManageLive">üé¨ <span data-i18n="manageLive">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</span></button>
<button class="nav-btn hidden" id="btnManageGallery">üñºÔ∏è <span>ÿ•ÿØÿßÿ±ÿ© ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±</span></button>
</nav>
<div class="sidebar-footer">
<div class="lang-switcher">
<button class="lang-btn active" data-lang="ar" onclick="setLanguage('ar')"><span class="flag">üáµüá∏</span> ÿπÿ±ÿ®Ÿä</button>
<button class="lang-btn" data-lang="en" onclick="setLanguage('en')"><span class="flag">üá¨üáß</span> EN</button>
<button class="lang-btn" data-lang="no" onclick="setLanguage('no')"><span class="flag">üá≥üá¥</span> NO</button>
</div>
<div class="visitor-box hidden" id="visitorBox">üë• <span data-i18n="visitors">ÿßŸÑÿ≤Ÿàÿßÿ±</span>: <span id="visitors">0</span></div>
<button class="login-btn" id="loginBtn">üîê <span data-i18n="adminLogin">ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ</span></button>
<a class="privacy-link" onclick="goTo('privacy')">üîí ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© | Personvern</a>
</div>
</aside>
<main class="main">
<div class="page active" id="pageHome">
<!-- Hero Section -->
<div class="hero-section" id="heroSection">
<div class="hero-content">
<div class="hero-flag">üáµüá∏</div>
<h1 class="hero-title" id="heroTitleDisplay">ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ ŸÅŸä ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©</h1>
<p class="hero-subtitle" id="heroSubtitleDisplay">ŸÜÿ¨ŸÖÿπ ÿ¥ŸÖŸÑŸÜÿß ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ - ÿßŸÑŸÜÿ±ŸàŸäÿ¨</p>
<div class="hero-buttons">
<button class="btn btn-green btn-lg" onclick="goTo('register')" id="heroBtn1"><span id="heroBtn1Display">üìù ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸäŸÜÿß</span></button>
<button class="btn btn-gray btn-lg" onclick="goTo('contact')" id="heroBtn2"><span id="heroBtn2Display">‚úâÔ∏è ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</span></button>
</div>
<button class="btn btn-gold" onclick="enablePushNotifications()" style="margin-top:12px;font-size:0.85rem;padding:8px 20px;" id="pushNotifBtn">üîî ŸÅÿπŸëŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™</button>
</div>
</div>

<!-- Stats Section -->
<div class="stats-section" id="statsSection">
<div class="stats-grid-home">
<div class="stat-card-home">
<div class="stat-icon-home">üë•</div>
<div class="stat-value-home" id="statMembersHome">0</div>
<div class="stat-label-home">ÿπÿ∂Ÿà</div>
</div>
<div class="stat-card-home">
<div class="stat-icon-home">üè†</div>
<div class="stat-value-home" id="statFamiliesHome">0</div>
<div class="stat-label-home">ÿπÿßÿ¶ŸÑÿ©</div>
</div>
<div class="stat-card-home">
<div class="stat-icon-home">üì∞</div>
<div class="stat-value-home" id="statNewsHome">0</div>
<div class="stat-label-home">ÿÆÿ®ÿ±</div>
</div>
<div class="stat-card-home">
<div class="stat-icon-home">üó≥Ô∏è</div>
<div class="stat-value-home" id="statVotesHome">0</div>
<div class="stat-label-home">ÿ™ÿµŸàŸäÿ™ ŸÜÿ¥ÿ∑</div>
</div>
</div>
</div>

<!-- Quick Actions -->
<div class="quick-actions-section" id="quickActionsSection">
<div class="section-title-home">‚ö° ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ</div>
<div class="quick-actions-grid" id="quickActionsGrid">
</div>
</div>

<!-- Active Vote Section -->
<div class="active-vote-section" id="activeVoteSection" style="display:none;">
<div class="section-title-home">üó≥Ô∏è ÿ™ÿµŸàŸäÿ™ ŸÜÿ¥ÿ∑ ÿßŸÑÿ¢ŸÜ!</div>
<div class="active-vote-card" id="activeVoteCard">
<div class="vote-live-badge">üî¥ ŸÖŸÅÿ™Ÿàÿ≠</div>
<h3 class="vote-title-home" id="activeVoteTitle">ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ÿ¶Ÿäÿ≥ ÿßŸÑŸÑÿ¨ŸÜÿ©</h3>
<p class="vote-desc-home" id="activeVoteDesc">ÿ¥ÿßÿ±ŸÉ ŸÅŸä ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿ¢ŸÜ</p>
<button class="btn btn-gold" onclick="goTo('voting')">ÿ¥ÿßÿ±ŸÉ ŸÅŸä ÿßŸÑÿ™ÿµŸàŸäÿ™ ‚Üê</button>
</div>
</div>

<!-- Latest News -->
<div class="news-section-home" id="newsSection">
<div class="section-header-home">
<div class="section-title-home">üì∞ ÿ¢ÿÆÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</div>
<button class="section-link" onclick="goTo('news')">ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê</button>
</div>
<div class="news-grid-home" id="homeNewsGrid">
<!-- Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã -->
</div>
</div>

<!-- About Section -->
<div class="about-section" id="aboutSection">
<div class="section-title-home">üèõÔ∏è ÿπŸÜ ÿßŸÑÿ¨ÿßŸÑŸäÿ©</div>
<div class="about-card">
<p class="about-text" id="aboutTextDisplay">ŸÜÿ≠ŸÜ ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖŸÜ ÿ£ÿ®ŸÜÿßÿ° ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ - ÿßŸÑŸÜÿ±ŸàŸäÿ¨ÿå ŸÜÿ≥ÿπŸâ ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ŸáŸàŸäÿ™ŸÜÿß Ÿàÿ™ÿ±ÿßÿ´ŸÜÿß ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä Ÿàÿ™ŸÇŸàŸäÿ© ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑ ÿ®ŸäŸÜ ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ©.</p>
<div class="about-values">
<div class="about-value">
<div class="about-value-icon">üéØ</div>
<div class="about-value-title">ÿ±ÿ§Ÿäÿ™ŸÜÿß</div>
<div class="about-value-text" id="visionDisplay">ÿ¨ÿßŸÑŸäÿ© ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÖÿ™ŸÖÿßÿ≥ŸÉÿ© ŸàŸÖÿ§ÿ´ÿ±ÿ©</div>
</div>
<div class="about-value">
<div class="about-value-icon">üí°</div>
<div class="about-value-title">ÿ±ÿ≥ÿßŸÑÿ™ŸÜÿß</div>
<div class="about-value-text" id="missionDisplay">ÿÆÿØŸÖÿ© ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸàÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸáŸàŸäÿ©</div>
</div>
</div>
</div>
</div>

<!-- Events Section -->
<div class="events-section" id="eventsSection" style="display:none;">
<div class="section-title-home">üìÖ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ÿßŸÑŸÇÿßÿØŸÖÿ©</div>
<div class="upcoming-events-wrapper" id="homeEventsList">
<!-- Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã -->
</div>
</div>

<!-- Social Section -->
<div class="social-section" id="socialSection" style="display:none;">
<div class="section-title-home">üîó ÿ™ÿßÿ®ÿπŸàŸÜÿß</div>
<div class="social-links" id="socialLinksDisplay">
<!-- Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã -->
</div>
</div>

</div>
<div class="page" id="pageNews"><div class="header"><h1>üì∞ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</h1></div><div id="newsGrid" style="max-width:600px;margin:0 auto;"></div></div>
<div class="page" id="pageFinance">
<div class="header"><h1>üí∞ ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÖÿßŸÑŸäÿ©</h1></div>
<div style="display:flex;align-items:center;gap:10px;margin-bottom:15px;flex-wrap:wrap;">
<label style="color:var(--muted);font-size:0.9rem;">üìÖ ÿßŸÑÿ≥ŸÜÿ© ÿßŸÑŸÖÿßŸÑŸäÿ©:</label>
<select class="form-select" id="financeYearFilter" onchange="window.loadFinance()" style="width:auto;min-width:120px;">
</select>
</div>
<div class="grid" style="margin-bottom:20px;">
<div class="card" style="text-align:center;"><div class="stat-num" id="statBalance" style="color:#009639;">0 NOK</div><div class="stat-label" id="finBalanceLabel">ÿßŸÑÿ±ÿµŸäÿØ</div></div>
<div class="card" style="text-align:center;"><div class="stat-num" id="statIncome" style="color:#C9A227;">0 NOK</div><div class="stat-label" id="finIncomeLabel">ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™</div></div>
<div class="card" style="text-align:center;"><div class="stat-num" id="statExpense" style="color:#CE1126;">0 NOK</div><div class="stat-label" id="finExpenseLabel">ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™</div></div>
</div>
<div class="card"><div class="card-title">üìã ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™</div><div id="txList"></div></div>
</div>
<div class="page" id="pageBylaws">
<div class="header"><h1>üìú ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä</h1><p>ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©</p></div>
<button class="btn btn-gold hidden" id="btnEditBylaws" onclick="toggleBylawsEdit()" style="margin-bottom:15px;">‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ</button>
<div class="bylaws-page">
<div class="bylaws-container" id="bylawsContainer">
<svg class="bylaws-lines-svg" id="bylawsSvg">
<defs>
<linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#009736"/></linearGradient>
<linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#ce1126"/></linearGradient>
<linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#e67e22"/></linearGradient>
<linearGradient id="grad4" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#3498db"/></linearGradient>
<linearGradient id="grad5" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#9b59b6"/></linearGradient>
<linearGradient id="grad6" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#e74c3c"/></linearGradient>
<linearGradient id="grad7" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#1abc9c"/></linearGradient>
<linearGradient id="grad8" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#ce1126"/><stop offset="100%" style="stop-color:#f39c12"/></linearGradient>
</defs>
</svg>
<div class="bylaws-center" id="bylawsCenter"><h3>ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä<br>ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©<br>ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</h3></div>
<div class="bylaws-node node-green" id="node-goals" onclick="expandBylawNode('goals')"><div class="icon">üéØ</div><div class="title">ÿßŸÑÿ£ŸáÿØÿßŸÅ</div></div>
<div class="bylaws-node node-red" id="node-membership" onclick="expandBylawNode('membership')"><div class="icon">üë•</div><div class="title">ÿßŸÑÿπÿ∂ŸàŸäÿ©</div></div>
<div class="bylaws-node node-orange" id="node-admin" onclick="expandBylawNode('admin')"><div class="icon">‚öôÔ∏è</div><div class="title">ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©</div></div>
<div class="bylaws-node node-blue" id="node-elections" onclick="expandBylawNode('elections')"><div class="icon">üó≥Ô∏è</div><div class="title">ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™</div></div>
<div class="bylaws-node node-purple" id="node-conferences" onclick="expandBylawNode('conferences')"><div class="icon">üèõÔ∏è</div><div class="title">ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±ÿßÿ™</div></div>
<div class="bylaws-node node-teal" id="node-finance" onclick="expandBylawNode('finance')"><div class="icon">üí∞</div><div class="title">ÿßŸÑŸÖÿßŸÑŸäÿ©</div></div>
<div class="bylaws-node node-teal" id="node-school" onclick="expandBylawNode('school')"><div class="icon">üìö</div><div class="title">ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©</div></div>
<div class="bylaws-node node-gold" id="node-penalties" onclick="expandBylawNode('penalties')"><div class="icon">‚öñÔ∏è</div><div class="title">ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™</div></div>
</div>
<div class="bylaws-overlay" id="bylawsOverlay" onclick="closeBylawPanel()"></div>
<div class="bylaws-panel" id="bylawsPanel">
<div class="bylaws-panel-header">
<button class="bylaws-panel-close" onclick="closeBylawPanel()">‚úï</button>
<div class="bylaws-panel-icon" id="panelIcon">üìã</div>
<div class="bylaws-panel-title"><h3 id="panelTitle">ÿßŸÑÿπŸÜŸàÿßŸÜ</h3><p id="panelSubtitle">ÿßŸÑÿ®ÿßÿ®</p></div>
</div>
<div class="bylaws-panel-body" id="panelContent"></div>
</div>
</div>
<div class="bylaws-edit-section" id="bylawsEditSection">
<h3 style="color:var(--gold);margin-bottom:15px;">‚úèÔ∏è ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä</h3>
<div class="form-group"><label class="form-label">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßÿ®</label><select class="form-select" id="editBylawChapter" onchange="loadBylawSections()"></select></div>
<div class="form-group"><label class="form-label">ÿßÿÆÿ™ÿ± ÿßŸÑŸÇÿ≥ŸÖ</label><select class="form-select" id="editBylawSection" onchange="loadBylawContent()"></select></div>
<div class="form-group"><label class="form-label">ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÇÿ≥ŸÖ</label><input class="form-input" id="editBylawSectionTitle"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÜŸÇÿßÿ∑ (ŸÉŸÑ ÿ≥ÿ∑ÿ± ŸÜŸÇÿ∑ÿ©)</label><textarea class="form-textarea" id="editBylawContent" rows="8"></textarea></div>
<div style="display:flex;gap:10px;flex-wrap:wrap;">
<button class="btn btn-green" onclick="saveBylawEdit()">üíæ ÿ≠ŸÅÿ∏</button>
<button class="btn btn-gold" onclick="addNewBylawSection()">‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÇÿ≥ŸÖ</button>
<button class="btn btn-red" onclick="deleteBylawSection()">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° -->
<div class="page" id="pageVoting">
<div class="header"><h1>üó≥Ô∏è <span data-i18n="voting">ÿßŸÑÿ™ÿµŸàŸäÿ™</span></h1><p data-i18n="voteDescription">ÿ¥ÿßÿ±ŸÉ ÿ®ÿ±ÿ£ŸäŸÉ ŸÅŸä ŸÇÿ±ÿßÿ±ÿßÿ™ ÿßŸÑÿ¨ÿßŸÑŸäÿ©</p></div>
<div id="votingList"></div>
<div class="voting-empty hidden" id="noVotingMsg">
<div class="voting-empty-icon">üó≥Ô∏è</div>
<p data-i18n="noActiveVotes">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™ ŸÜÿ¥ÿ∑ÿ© ÿ≠ÿßŸÑŸäÿßŸã</p>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™ -->
<div class="page" id="pageManageVoting">
<div class="header"><h1>üó≥Ô∏è <span data-i18n="manageVoting">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™</span></h1><p data-i18n="createManageVotes">ÿ•ŸÜÿ¥ÿßÿ° Ÿàÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™</p></div>
<div class="voting-admin-panel">
<h3 style="color:var(--gold);margin-bottom:15px;">‚ûï <span data-i18n="createNewVote">ÿ•ŸÜÿ¥ÿßÿ° ÿ™ÿµŸàŸäÿ™ ÿ¨ÿØŸäÿØ</span></h3>
<div class="form-group"><label class="form-label" data-i18n="voteTitle">ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ÿµŸàŸäÿ™</label><input class="form-input" id="newVoteTitle" data-placeholder="voteTitleExample"></div>
<div class="form-group"><label class="form-label" data-i18n="questionDescription">ÿßŸÑÿ≥ÿ§ÿßŸÑ / ÿßŸÑŸàÿµŸÅ</label><textarea class="form-textarea" id="newVoteQuestion" rows="2" data-placeholder="questionExample"></textarea></div>
<div class="form-group">
<label class="form-label">ŸÜŸàÿπ ÿßŸÑÿ™ÿµŸàŸäÿ™</label>
<select class="form-select" id="newVoteType">
<option value="yesno">ŸÖŸàÿßŸÅŸÇ / ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ</option>
<option value="multiple">ÿÆŸäÿßÿ±ÿßÿ™ ŸÖÿ™ÿπÿØÿØÿ© (ÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™)</option>
</select>
</div>
<div id="multiOptionsDiv" style="display:none;">
<div class="form-group">
<label class="form-label">ÿßŸÑŸÖÿ±ÿ¥ÿ≠ŸäŸÜ / ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ (ŸÉŸÑ ÿ≥ÿ∑ÿ± = ÿÆŸäÿßÿ±)</label>
<textarea class="form-textarea" id="newVoteOptions" rows="5" placeholder="ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ&#10;ÿ≥ÿßÿ±ÿ© ÿπŸÑŸä&#10;ŸÖÿ≠ŸÖŸàÿØ ÿÆÿßŸÑÿØ"></textarea>
</div>
<div class="form-group">
<label class="form-label">ŸÉŸÖ ÿµŸàÿ™ ŸÖÿ≥ŸÖŸàÿ≠ ŸÑŸÉŸÑ ÿπÿ∂Ÿàÿü</label>
<input type="number" class="form-input" id="newVoteMaxSel" min="1" value="1" style="width:100px;">
</div>
</div>
<div style="display:flex;gap:10px;margin-top:15px;">
<button class="btn btn-green" onclick="createNewVote()">üó≥Ô∏è <span data-i18n="createVote">ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿµŸàŸäÿ™</span></button>
</div>
</div>
<h3 style="margin:20px 0 15px;">üìã <span data-i18n="currentVotes">ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©</span></h3>
<div id="adminVotingList"></div>
</div>

<div class="page" id="pageMap">
<div class="header"><h1>üó∫Ô∏è <span data-i18n="map">ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑŸÖŸÜÿ™ÿ≥ÿ®ŸäŸÜ</span></h1></div>
<div style="margin-bottom:15px;">
<button class="btn btn-green" id="btnResetMap">üåç <span data-i18n="all">ÿßŸÑŸÉŸÑ</span></button>
<button class="btn btn-gray" id="btnMyLoc">üìç <span data-i18n="myLocation">ŸÖŸàŸÇÿπŸä</span></button>
<button class="btn btn-gold hidden" id="btnFindCenter">üéØ <span data-i18n="bestMeetingLocation">ÿ£ŸÅÿ∂ŸÑ ŸÖŸàŸÇÿπ ŸÑŸÑÿßÿ¨ÿ™ŸÖÿßÿπ</span></button>
</div>
<div class="admin-stats hidden" id="mapAdminStats">
<div class="admin-stat"><div class="admin-stat-num" id="mapMembersCount">0</div><div class="admin-stat-label" data-i18n="onMap">ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©</div></div>
<div class="admin-stat"><div class="admin-stat-num" id="mapHiddenCount">0</div><div class="admin-stat-label" data-i18n="hidden">ŸÖÿÆŸÅŸä</div></div>
<div class="admin-stat"><div class="admin-stat-num" id="mapCitiesCount">0</div><div class="admin-stat-label" data-i18n="cities">ŸÖÿØŸäŸÜÿ©</div></div>
</div>
<div class="center-marker" id="centerInfo"><strong>üéØ <span data-i18n="bestMeetingLocation">ÿ£ŸÅÿ∂ŸÑ ŸÖŸàŸÇÿπ ŸÑŸÑÿßÿ¨ÿ™ŸÖÿßÿπ</span>:</strong><br><span id="centerCoords"></span></div>
<div class="card" style="padding:10px;margin-top:15px;"><div id="map"></div></div>
<div class="card"><div class="card-title">üìä <span data-i18n="statistics">ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</span></div><div id="mapStats"></div></div>
</div>
<div class="page" id="pageRegister">
<div class="header"><h1>üìù <span data-i18n="registrationForm">ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</span></h1><p data-i18n="joinUs">ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</p></div>
<div class="reg-container">
<div class="reg-header">
<div class="reg-flag">üáµüá∏</div>
<div class="reg-title" data-i18n="registrationForm">ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</div>
<div class="reg-subtitle">ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ üçâ</div>
</div>
<div class="reg-form" id="regFormContainer">
<form id="registrationForm">
<div class="reg-section">
<div class="reg-section-title">üë§ <span data-i18n="personalInfo">ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ©</span></div>
<div class="form-group"><label class="form-label"><span data-i18n="fullName">ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ</span> *</label><input type="text" class="form-input" id="regName" required data-placeholder="enterFullName"></div>
<div class="reg-row">
<div class="form-group"><label class="form-label"><span data-i18n="phone">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</span> *</label><input type="tel" class="form-input" id="regPhone" required placeholder="+47"></div>
<div class="form-group"><label class="form-label" data-i18n="email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label><input type="email" class="form-input" id="regEmail" placeholder="example@email.com"></div>
</div>
</div>
<div class="reg-section">
<div class="reg-section-title">üìç <span data-i18n="residenceInfo">ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≥ŸÉŸÜ</span></div>
<div class="form-group"><label class="form-label"><span data-i18n="city">ÿßŸÑŸÖÿØŸäŸÜÿ© / ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©</span> *</label><input type="text" class="form-input" id="regCity" required placeholder="Stavanger, Sandnes"></div>
<div class="form-group"><label class="form-label"><span data-i18n="fullAddress">ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑŸÉÿßŸÖŸÑ</span> (<span data-i18n="optional">ÿßÿÆÿ™Ÿäÿßÿ±Ÿä</span>)</label><input type="text" class="form-input" id="regAddress" data-placeholder="forMapDisplay"></div>
<div class="address-search"><button type="button" class="btn btn-gray" id="regSearchAddress">üîç <span data-i18n="search">ÿ®ÿ≠ÿ´</span></button><button type="button" class="btn btn-green" id="regGetLocation">üìç <span data-i18n="currentLocation">ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä</span></button></div>
<div class="location-result" id="regLocationResult"><span id="regLocationText"></span></div>
<input type="hidden" id="regLat"><input type="hidden" id="regLng">
</div>
<div class="reg-section">
<div class="reg-section-title">üáµüá∏ <span data-i18n="palestinianOrigin">ÿßŸÑÿ£ÿµŸÑ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä</span></div>
<div class="reg-row">
<div class="form-group"><label class="form-label" data-i18n="originCity">ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ£ÿµŸÑŸä ŸÅŸä ŸÅŸÑÿ≥ÿ∑ŸäŸÜ</label><input type="text" class="form-input" id="regOriginCity" data-placeholder="originCityExample"></div>
</div>
</div>
<div class="reg-section">
<div class="reg-section-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <span data-i18n="familyMembers">ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©</span></div>
<div class="form-group"><label class="form-label" data-i18n="familySize">ÿπÿØÿØ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿ£ÿ≥ÿ±ÿ© (ÿ®ŸÖÿß ŸÅŸäŸáŸÖ ÿ£ŸÜÿ™)</label><input type="number" class="form-input" id="regFamilySize" min="1" value="1"></div>
<div id="familyMembersContainer"></div>
<button type="button" class="btn btn-gold" id="addFamilyMember" style="width:100%;margin-top:10px;">‚ûï <span data-i18n="addFamilyMember">ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿ±ÿØ ŸÖŸÜ ÿßŸÑÿπÿßÿ¶ŸÑÿ©</span></button>
</div>
<div class="reg-section">
<div class="reg-section-title">üìù <span data-i18n="additionalNotes">ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©</span></div>
<div class="form-group"><label class="form-label" data-i18n="anyNotes">ŸáŸÑ ŸÑÿØŸäŸÉ ÿ£Ÿä ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ£Ÿà ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ÿü</label><textarea class="form-textarea" id="regNotes" data-placeholder="writeHere"></textarea></div>
</div>
<div class="reg-privacy">
<div class="reg-privacy-title">üîí <span data-i18n="privacySettings">ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸàÿµŸäÿ©</span></div>
<div class="checkbox-row"><input type="checkbox" id="regShowMap" checked><label for="regShowMap" data-i18n="showOnMap">ÿ•ÿ∏Ÿáÿßÿ± ŸÖŸàŸÇÿπŸä ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©</label></div>
<div class="checkbox-row"><input type="checkbox" id="regShowPhone"><label for="regShowPhone" data-i18n="showPhoneToMembers">ÿ•ÿ∏Ÿáÿßÿ± ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅŸä ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°</label></div>
<div class="checkbox-row"><input type="checkbox" id="regShowEmail"><label for="regShowEmail" data-i18n="showEmailToMembers">ÿ•ÿ∏Ÿáÿßÿ± ÿ®ÿ±ŸäÿØŸä ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°</label></div>
</div>
<div class="checkbox-row" style="margin-bottom:15px;"><input type="checkbox" id="regAgree" required><label for="regAgree"><span data-i18n="agreeToJoin">ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸàÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿ£ŸáÿØÿßŸÅŸáÿß</span> *</label></div>
<div class="checkbox-row" style="margin-bottom:15px;"><input type="checkbox" id="regPrivacy" required><label for="regPrivacy">ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ <a onclick="goTo('privacy')" style="color:var(--green);cursor:pointer;text-decoration:underline;">ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</a> ŸàŸÖÿπÿßŸÑÿ¨ÿ© ÿ®ŸäÿßŸÜÿßÿ™Ÿä ÿßŸÑÿ¥ÿÆÿµŸäÿ© *</label></div>
<button type="submit" class="reg-submit">üáµüá∏ <span data-i18n="submitRequest">ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ® ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</span></button>
</form>
</div>
<div class="reg-success" id="regSuccess">
<div class="reg-success-icon">‚úÖ</div>
<div class="reg-success-title" data-i18n="requestSent">ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠!</div>
<div class="reg-success-text"><span data-i18n="thankYou">ÿ¥ŸÉÿ±ÿßŸã ŸÑÿßŸÜÿ∂ŸÖÿßŸÖŸÉ ŸÑŸÑŸÖŸÑÿ™ŸÇŸâ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</span> üáµüá∏<br><span data-i18n="willContact">ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ∑ŸÑÿ®ŸÉ ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã</span></div>
<button class="btn btn-green" onclick="resetRegForm()">üìù <span data-i18n="submitAnother">ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ® ÿ¢ÿÆÿ±</span></button>
<button class="btn btn-gray" onclick="goTo('home')">üè† <span data-i18n="backToHome">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span></button>
</div>
</div>
</div>
<div class="page" id="pagePending">
<div class="header"><h1>üìã ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</h1><p>ŸÖÿ±ÿßÿ¨ÿπÿ© Ÿàÿ•ÿØÿßÿ±ÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</p></div>
<div class="admin-stats">
<div class="admin-stat"><div class="admin-stat-num" id="pendingCount">0</div><div class="admin-stat-label">ÿ∑ŸÑÿ® ŸÖÿπŸÑŸÇ</div></div>
<div class="admin-stat"><div class="admin-stat-num" id="approvedCount">0</div><div class="admin-stat-label">ÿπÿßÿ¶ŸÑÿ© ŸÖŸÇÿ®ŸàŸÑÿ©</div></div>
</div>
<div class="card">
<div class="card-title">üì• ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©</div>
<div id="pendingList"></div>
</div>
<div class="card">
<div class="card-title">‚úÖ ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ©</div>
<div id="approvedList"></div>
</div>
</div>
<div class="page" id="pageRegistrationSheet">
<div class="header"><h1>üìä ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ</h1><p>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ŸÖŸäÿπ ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©</p></div>

<div class="sheet-controls">
<div class="sheet-controls-row">
<button class="sheet-btn sheet-btn-green" onclick="addSheetRow()">‚ûï ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÅ</button>
<button class="sheet-btn sheet-btn-red" onclick="deleteLastRow()">‚ûñ ÿ≠ÿ∞ŸÅ ÿµŸÅ</button>
<button class="sheet-btn sheet-btn-gold" onclick="saveSheetToArchive()">üíæ ÿ≠ŸÅÿ∏ ŸÑŸÑÿ£ÿ±ÿ¥ŸäŸÅ</button>
<button class="sheet-btn sheet-btn-gray" onclick="downloadSheetPDF()">üì• ÿ™ÿ≠ŸÖŸäŸÑ PDF</button>
<button class="sheet-btn sheet-btn-gray" onclick="openPrintableFormEditor()">üìÑ ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ŸÑŸÑÿ∑ÿ®ÿßÿπÿ©</button>
<button class="sheet-btn sheet-btn-red" onclick="clearSheet()">üóëÔ∏è ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸÑ</button>
</div>
<div class="sheet-stats-row">
<span>üë• ÿßŸÑÿ£ÿπÿ∂ÿßÿ°: <strong id="sheetTotalMembers">0</strong></span>
<span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™: <strong id="sheetTotalFamilies">0</strong></span>
<span>‚úÖ ÿØŸÅÿπŸàÿß: <strong id="sheetTotalPaid">0</strong></span>
<span>‚ùå ŸÑŸÖ ŸäÿØŸÅÿπŸàÿß: <strong id="sheetTotalUnpaid">0</strong></span>
<span>üí∞ ÿßŸÑŸÖÿ≠ÿµŸëŸÑ: <strong id="sheetTotalAmount">0 NOK</strong></span>
</div>
</div>

<div class="reg-sheet-container" id="regSheetContainer">
<div class="reg-sheet-header">
<div class="sheet-logo">üáµüá∏</div>
<h2 contenteditable="true" id="sheetTitle">ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</h2>
<p contenteditable="true" id="sheetSubtitle">Det palestinske samfunn i Rogaland - ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</p>
<p class="sheet-year" contenteditable="true" id="sheetYear">2025</p>
</div>
<div class="reg-sheet-table-wrapper">
<table class="reg-sheet-table" id="regSheetTable">
<thead id="regSheetHead">
<tr>
<th>#</th>
<th contenteditable="true">ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ</th>
<th contenteditable="true">ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©</th>
<th contenteditable="true">ÿπÿØÿØ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©</th>
<th contenteditable="true">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</th>
<th contenteditable="true">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</th>
<th contenteditable="true">ÿßŸÑŸÖÿØŸäŸÜÿ©</th>
<th contenteditable="true">ÿßŸÑÿ±ÿ≥ŸàŸÖ (NOK)</th>
<th contenteditable="true">ÿßŸÑÿØŸÅÿπ</th>
<th contenteditable="true">ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</th>
</tr>
</thead>
<tbody id="regSheetBody">
</tbody>
</table>
</div>
<div class="reg-sheet-footer-print">
<div class="footer-line"></div>
<p>üáµüá∏ <span class="print-org-name" contenteditable="true">ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ</span> üáµüá∏</p>
</div>
</div>

<div class="archive-section">
<div class="card">
<div class="card-title">üìÅ ÿ£ÿ±ÿ¥ŸäŸÅ ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿ±ÿßÿ™</div>
<div id="archiveList"></div>
</div>
</div>
</div>
<div class="page" id="pageInvitation">
<div class="header"><h1>üì® ŸÖÿ≠ÿ±ÿ± ÿßŸÑÿØÿπŸàÿßÿ™</h1></div>
<div class="editor-grid">
<div class="card">
<div class="form-group">
<label class="form-label">üñºÔ∏è ÿ¥ÿπÿßÿ± ÿßŸÑÿØÿπŸàÿ©</label>
<div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
<div class="upload-box" id="invLogoUpload" style="width:80px;height:80px;font-size:1.5rem;padding:10px;">üì∑</div>
<input type="file" id="invLogoFile" accept="image/*" style="display:none">
<button class="btn btn-gray btn-sm" onclick="clearInvLogo()">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>
</div>
<p style="font-size:0.75rem;color:var(--muted);margin-top:5px;">ÿßÿ∂ÿ∫ÿ∑ ŸÑÿ±ŸÅÿπ ÿ¥ÿπÿßÿ±ŸÉ ÿßŸÑÿÆÿßÿµ</p>
</div>
<div class="form-group"><label class="form-label">ÿßŸÑÿπŸÜŸàÿßŸÜ</label><input class="form-input" id="iTitle" value="ŸÖŸÑÿ™ŸÇŸâ ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä" oninput="updateInv()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑŸÅÿ±ÿπŸä</label><input class="form-input" id="iSub" value="ÿ™ÿ¨ŸÖÿπ ÿ£ŸáŸÑŸÜÿß" oninput="updateInv()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÜÿµ</label><textarea class="form-textarea" id="iText" oninput="updateInv()">Ÿäÿ≥ÿ±ŸÜÿß ÿØÿπŸàÿ™ŸÉŸÖ</textarea></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</label><input class="form-input" id="iDate" value="ÿßŸÑÿ≥ÿ®ÿ™ 24 ŸäŸÜÿßŸäÿ±" oninput="updateInv()"></div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
<div class="form-group"><label class="form-label">ŸÖŸÜ</label><input class="form-input" id="iFrom" value="12:30" oninput="updateInv()"></div>
<div class="form-group"><label class="form-label">ÿ•ŸÑŸâ</label><input class="form-input" id="iTo" value="15:30" oninput="updateInv()"></div>
</div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÖŸÉÿßŸÜ</label><input class="form-input" id="iLoc" value="Sunde Bydelshus" oninput="updateInv()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ™ÿ±ÿ≠Ÿäÿ®</label><input class="form-input" id="iWelcome" value="ÿ£ŸáŸÑÿßŸã ÿ®ÿßŸÑÿ¨ŸÖŸäÿπ" oninput="updateInv()"></div>
<button class="btn btn-green" id="btnDlImg">üñºÔ∏è ÿµŸàÿ±ÿ©</button>
<button class="btn btn-red" id="btnDlPdf">üìÑ PDF</button>
</div>
<div>
<div class="inv-card" id="invCard">
<div class="flag-bar"><div class="bk"></div><div class="wh"></div><div class="gr"></div></div>
<div class="inv-content">
<div class="inv-logo" id="invLogo"></div>
<div class="inv-title" id="pTitle">ŸÖŸÑÿ™ŸÇŸâ ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä</div>
<div class="inv-sub" id="pSub">ÿ™ÿ¨ŸÖÿπ ÿ£ŸáŸÑŸÜÿß</div>
<div class="inv-text" id="pText">Ÿäÿ≥ÿ±ŸÜÿß ÿØÿπŸàÿ™ŸÉŸÖ</div>
<div class="inv-details">
<div class="inv-row">üìÖ <span id="pDate">ÿßŸÑÿ≥ÿ®ÿ™ 24 ŸäŸÜÿßŸäÿ±</span></div>
<div class="inv-row">‚è∞ <span id="pFrom">12:30</span> - <span id="pTo">15:30</span></div>
<div class="inv-row">üìç <span id="pLoc">Sunde Bydelshus</span></div>
</div>
<div class="inv-welcome" id="pWelcome">ÿ£ŸáŸÑÿßŸã ÿ®ÿßŸÑÿ¨ŸÖŸäÿπ</div>
</div>
<div class="flag-bar"><div class="bk"></div><div class="wh"></div><div class="gr"></div></div>
</div>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± -->
<div class="page" id="pageConfInvite">
<div class="header"><h1>üèõÔ∏è ŸÖÿ≠ÿ±ÿ± ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</h1><p>ÿ£ŸÜÿ¥ÿ¶ ÿØÿπŸàÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ÿ®ÿ™ÿµŸÖŸäŸÖ ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä</p></div>
<div class="conf-grid">
<div class="card" style="max-height:80vh;overflow-y:auto;">
<div class="form-group"><label class="form-label">üñºÔ∏è ÿ¥ÿπÿßÿ± ŸÖÿÆÿµÿµ</label><div class="upload-box" id="confLogoUp">üì∑ ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ±</div><input type="file" id="confLogoF" accept="image/*" style="display:none">
<div id="logoControls" style="display:none;margin-top:10px;background:var(--dark);padding:12px;border-radius:10px;border:1px solid var(--border);">
<div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;"><span style="font-size:0.8rem;color:var(--muted);width:60px;">ÿßŸÑÿ≠ÿ¨ŸÖ:</span><input type="range" id="logoSize" min="30" max="150" value="80" oninput="updLogoStyle()" style="flex:1;accent-color:var(--green);"><span id="logoSizeVal" style="font-size:0.8rem;color:var(--gold);width:35px;">80px</span></div>
<div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;"><span style="font-size:0.8rem;color:var(--muted);width:60px;">ÿ£ÿπŸÑŸâ‚Üïÿ£ÿ≥ŸÅŸÑ:</span><input type="range" id="logoTop" min="15" max="75" value="42" oninput="updLogoStyle()" style="flex:1;accent-color:var(--green);"><span id="logoTopVal" style="font-size:0.8rem;color:var(--gold);width:35px;">42%</span></div>
<div style="display:flex;align-items:center;gap:10px;"><span style="font-size:0.8rem;color:var(--muted);width:60px;">ŸäŸÖŸäŸÜ‚ÜîŸäÿ≥ÿßÿ±:</span><input type="range" id="logoLeft" min="20" max="80" value="50" oninput="updLogoStyle()" style="flex:1;accent-color:var(--green);"><span id="logoLeftVal" style="font-size:0.8rem;color:var(--gold);width:35px;">50%</span></div>
</div>
</div>
<div class="form-group"><label class="form-label">üé® ÿßŸÑÿ£ŸÑŸàÿßŸÜ</label><div style="display:flex;gap:10px;align-items:center;"><input type="color" id="confClrHead" value="#009639" style="width:50px;height:35px;border:none;cursor:pointer;"><input type="color" id="confClrTitle" value="#CE1126" style="width:50px;height:35px;border:none;cursor:pointer;"><span style="font-size:0.8rem;color:var(--muted);">ÿßŸÑŸáŸäÿØÿ± / ÿßŸÑÿπŸÜŸàÿßŸÜ</span></div></div>
<div class="form-group"><label class="form-label">ÿßÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÑŸäÿ© (ÿπÿ±ÿ®Ÿä)</label><input class="form-input" id="confOrgAr" value="ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ¨ŸÜŸàÿ® ÿßŸÑŸÜÿ±ŸàŸäÿ¨" oninput="updConfPrev()"></div>
<div class="form-group"><label class="form-label">ÿßÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÑŸäÿ© (ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)</label><input class="form-input" id="confOrgEn" value="Palestinske forening i Agder" oninput="updConfPrev()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ¢Ÿäÿ©</label><textarea class="form-textarea" id="confVrs" rows="2" oninput="updConfPrev()">ŸàŸéŸÇŸèŸÑŸê ÿßÿπŸíŸÖŸéŸÑŸèŸàÿß ŸÅŸéÿ≥ŸéŸäŸéÿ±ŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸè ÿπŸéŸÖŸéŸÑŸéŸÉŸèŸÖŸí ŸàŸéÿ±Ÿéÿ≥ŸèŸàŸÑŸèŸáŸè ŸàŸéÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸèŸàŸÜŸé</textarea></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÖÿ±ÿ¨ÿπ</label><input class="form-input" id="confVrsRef" value="ÿ≥Ÿàÿ±ÿ© ÿßŸÑÿ™Ÿàÿ®ÿ© - ÿ¢Ÿäÿ© 105" oninput="updConfPrev()"></div>
<div class="form-group"><label class="form-label">ŸÜÿµ ÿßŸÑÿØÿπŸàÿ©</label><textarea class="form-textarea" id="confInvTxt" rows="2" oninput="updConfPrev()">ÿ™ÿ™ÿ¥ÿ±ŸÅ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ¨ŸÜŸàÿ® ÿßŸÑŸÜÿ±ŸàŸäÿ¨ ÿ®ÿØÿπŸàÿ™ŸÉŸÖ ŸÑÿ≠ÿ∂Ÿàÿ± ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿÆÿßŸÖÿ≥ ÿπÿ¥ÿ±</textarea></div>
<div class="form-group"><label class="form-label">ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</label><input class="form-input" id="confTtl" value="ŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿµŸÖŸàÿØ" oninput="updConfPrev()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</label><input class="form-input" id="confDt" value="18.01.2026" oninput="updConfPrev()"></div>
<div class="form-group"><label class="form-label">üìã ÿ¨ÿØŸàŸÑ ÿßŸÑÿ£ÿπŸÖÿßŸÑ</label><div id="confAgendaEd"></div><button type="button" class="btn btn-gold btn-sm" onclick="addConfAg()">+ ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÜÿØ</button></div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div class="form-group"><label class="form-label">ŸàŸÇÿ™ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ</label><input class="form-input" id="confTmReg" value="16:00" oninput="updConfPrev()"></div><div class="form-group"><label class="form-label">ŸàŸÇÿ™ ÿßŸÑÿ®ÿØÿ°</label><input class="form-input" id="confTmStr" value="17:00" oninput="updConfPrev()"></div></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿπŸÜŸàÿßŸÜ</label><input class="form-input" id="confAddr" value="Songdalsvegen 48, Nodeland" oninput="updConfPrev()"></div>
<div class="form-group"><label class="form-label">ŸÜÿµ ÿßŸÑÿÆÿ™ÿßŸÖ</label><textarea class="form-textarea" id="confFtr" rows="2" oninput="updConfPrev()">ÿ≠ÿ∂Ÿàÿ±ŸÉŸÖ Ÿäÿ¥ÿ±ŸÅŸÜÿß ŸàŸäÿØÿπŸÖ ÿ¨ŸáŸàÿØŸÜÿß ŸÅŸä ÿÆÿØŸÖÿ© ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©</textarea></div>
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:15px;"><button class="btn btn-gray" onclick="printConfCard()">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</button><button class="btn btn-red" onclick="dlConfPDF()">üìÑ PDF</button><button class="btn btn-green" onclick="dlConfImg()">üñºÔ∏è ÿµŸàÿ±ÿ©</button></div>
</div>
<div>
<div class="conf-card" id="confCardPrev">
<div class="conf-head" id="confHeadEl"><div class="conf-dome" style="position:relative;display:inline-block;"><svg viewBox="0 0 240 140" width="220" height="130"><ellipse cx="120" cy="95" rx="95" ry="70" fill="#C9A227"/><ellipse cx="120" cy="90" rx="82" ry="58" fill="#009639"/><rect x="115" y="12" width="10" height="28" fill="#C9A227"/><ellipse cx="120" cy="12" rx="8" ry="8" fill="#C9A227"/></svg><div id="confLogoPrev" style="position:absolute;top:42%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;border-radius:50%;overflow:hidden;display:none;border:3px solid #C9A227;background:white;"><img id="confLogoImg" src="" style="width:100%;height:100%;object-fit:cover;"></div></div><div class="conf-org-ar" id="confOrgArP">ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ¨ŸÜŸàÿ® ÿßŸÑŸÜÿ±ŸàŸäÿ¨</div><div class="conf-org-en" id="confOrgEnP">Palestinske forening i Agder</div></div>
<div class="conf-verse-sec"><div class="conf-bism">ÿ®ÿ≥ŸÖ ÿßŸÑŸÑŸá ÿßŸÑÿ±ÿ≠ŸÖŸÜ ÿßŸÑÿ±ÿ≠ŸäŸÖ</div><div class="conf-verse" id="confVrsP">Ô¥øŸàŸéŸÇŸèŸÑŸê ÿßÿπŸíŸÖŸéŸÑŸèŸàÿß ŸÅŸéÿ≥ŸéŸäŸéÿ±ŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸè ÿπŸéŸÖŸéŸÑŸéŸÉŸèŸÖŸí ŸàŸéÿ±Ÿéÿ≥ŸèŸàŸÑŸèŸáŸè ŸàŸéÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸèŸàŸÜŸéÔ¥æ</div><div class="conf-verse-ref" id="confVrsRefP">ÿ≥Ÿàÿ±ÿ© ÿßŸÑÿ™Ÿàÿ®ÿ© - ÿ¢Ÿäÿ© 105</div></div>
<div class="conf-inv-txt" id="confInvTxtP">ÿ™ÿ™ÿ¥ÿ±ŸÅ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ¨ŸÜŸàÿ® ÿßŸÑŸÜÿ±ŸàŸäÿ¨ ÿ®ÿØÿπŸàÿ™ŸÉŸÖ ŸÑÿ≠ÿ∂Ÿàÿ± ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿÆÿßŸÖÿ≥ ÿπÿ¥ÿ±</div>
<div class="conf-title-box" id="confTtlBox"><span id="confTtlP">(ŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿµŸÖŸàÿØ)</span></div>
<div class="conf-date" id="confDtP">18.01.2026</div>
<div class="conf-agenda-sec"><div class="conf-agenda-head">üìã ÿ¨ÿØŸàŸÑ ÿ£ÿπŸÖÿßŸÑ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</div><div class="conf-agenda-list" id="confAgendaP"></div></div>
<div class="conf-details-sec" id="confDetEl"><div class="conf-det-row">üïê ŸäŸÅÿ™ÿ≠ ÿ®ÿßÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ: ÿßŸÑÿ≥ÿßÿπÿ© <span id="confTmRegP">16:00</span></div><div class="conf-det-row">üìÖ ŸÖŸàÿπÿØ ÿ®ÿØÿ° ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±: ÿßŸÑÿ≥ÿßÿπÿ© <span id="confTmStrP">17:00</span></div><div class="conf-det-row">üìç ÿßŸÑÿπŸÜŸàÿßŸÜ: <span id="confAddrP">Songdalsvegen 48, Nodeland</span></div></div>
<div class="conf-footer-txt" id="confFtrP">ÿ≠ÿ∂Ÿàÿ±ŸÉŸÖ Ÿäÿ¥ÿ±ŸÅŸÜÿß ŸàŸäÿØÿπŸÖ ÿ¨ŸáŸàÿØŸÜÿß ŸÅŸä ÿÆÿØŸÖÿ© ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©</div>
<div class="conf-slogan">üáµüá∏ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÅŸä ŸÇŸÑŸàÿ®ŸÜÿß PS</div>
<div class="conf-flag"><div class="conf-flag-bk"></div><div class="conf-flag-wh"></div><div class="conf-flag-gr"></div></div>
</div>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ -->
<div class="page" id="pageReports">
<div class="header"><h1>üìä ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</h1><p>ÿ™ŸÇÿßÿ±Ÿäÿ± ÿ¥ÿßŸÖŸÑÿ© ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿ∑ÿ®ÿßÿπÿ© ŸàÿßŸÑÿ™ÿµÿØŸäÿ±</p></div>

<div class="report-tabs">
<button class="report-tab active" onclick="switchReport('members')">üë• ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</button>
<button class="report-tab" onclick="switchReport('finance')">üí∞ ÿßŸÑŸÖÿßŸÑŸäÿ©</button>
<button class="report-tab" onclick="switchReport('voting')">üó≥Ô∏è ÿßŸÑÿ™ÿµŸàŸäÿ™</button>
<button class="report-tab" onclick="switchReport('overview')">üìã ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©</button>
</div>

<!-- ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ£ÿπÿ∂ÿßÿ° -->
<div class="report-panel active" id="reportMembers">
<div class="report-stats-grid">
<div class="report-stat"><div class="report-stat-num" id="rptTotalMembers">0</div><div class="report-stat-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptTotalFamilies">0</div><div class="report-stat-label">ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ©</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptNewMembers">0</div><div class="report-stat-label">ÿ£ÿπÿ∂ÿßÿ° ÿ¨ÿØÿØ (Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±)</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptCities">0</div><div class="report-stat-label">ŸÖÿØŸÜ ŸÖÿÆÿ™ŸÑŸÅÿ©</div></div>
</div>

<div class="chart-container">
<div class="chart-title">üèôÔ∏è ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿØŸÜ</div>
<div id="rptCityChart"></div>
</div>

<div class="chart-container">
<div class="chart-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÿ£ŸÉÿ®ÿ± ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™ (ÿ≠ÿ≥ÿ® ÿπÿØÿØ ÿßŸÑÿ£ŸÅÿ±ÿßÿØ)</div>
<div id="rptFamilyChart"></div>
</div>

<div class="chart-container">
<div class="chart-title">üìã ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÉÿßŸÖŸÑÿ©</div>
<table class="report-table">
<thead><tr><th>#</th><th>ÿßŸÑÿßÿ≥ŸÖ</th><th>ÿßŸÑŸÖÿØŸäŸÜÿ©</th><th>ÿßŸÑŸáÿßÿ™ŸÅ</th><th>ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ</th></tr></thead>
<tbody id="rptMembersTable"></tbody>
</table>
</div>

<div class="report-actions">
<button class="btn btn-green" onclick="exportMembersPDF()">üìÑ ÿ™ÿµÿØŸäÿ± PDF</button>
<button class="btn btn-gray" onclick="printReport('members')">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</button>
</div>
</div>

<!-- ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸäÿ© -->
<div class="report-panel" id="reportFinance">
<div class="report-period">
<select id="rptFinPeriod" onchange="loadFinanceReport()">
<option value="all">ŸÉŸÑ ÿßŸÑŸÅÿ™ÿ±ÿßÿ™</option>
<option value="month">Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±</option>
<option value="3months">ÿ¢ÿÆÿ± 3 ÿ£ÿ¥Ÿáÿ±</option>
<option value="year">Ÿáÿ∞Ÿá ÿßŸÑÿ≥ŸÜÿ©</option>
</select>
</div>

<div class="report-stats-grid">
<div class="report-stat"><div class="report-stat-num" style="-webkit-text-fill-color:#00D26A" id="rptTotalIncome">0</div><div class="report-stat-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™</div></div>
<div class="report-stat"><div class="report-stat-num" style="-webkit-text-fill-color:#E63946" id="rptTotalExpense">0</div><div class="report-stat-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptBalance">0</div><div class="report-stat-label">ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ≠ÿßŸÑŸä</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptTxCount">0</div><div class="report-stat-label">ÿπÿØÿØ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™</div></div>
</div>

<div class="chart-container">
<div class="chart-title">üìä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ ŸÖŸÇÿßÿ®ŸÑ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™</div>
<div id="rptFinBarChart"></div>
</div>

<div class="chart-container">
<div class="chart-title">üìã ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™</div>
<table class="report-table">
<thead><tr><th>#</th><th>ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</th><th>ÿßŸÑŸàÿµŸÅ</th><th>ÿßŸÑŸÜŸàÿπ</th><th>ÿßŸÑŸÖÿ®ŸÑÿ∫ (NOK)</th></tr></thead>
<tbody id="rptFinTable"></tbody>
</table>
</div>

<div class="report-actions">
<button class="btn btn-green" onclick="exportFinancePDF()">üìÑ ÿ™ÿµÿØŸäÿ± PDF</button>
<button class="btn btn-gray" onclick="printReport('finance')">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</button>
</div>
</div>

<!-- ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ™ÿµŸàŸäÿ™ -->
<div class="report-panel" id="reportVoting">
<div class="report-stats-grid">
<div class="report-stat"><div class="report-stat-num" id="rptTotalVotes">0</div><div class="report-stat-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptActiveVotes">0</div><div class="report-stat-label">ŸÜÿ¥ÿ∑ÿ© ÿ≠ÿßŸÑŸäÿßŸã</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptClosedVotes">0</div><div class="report-stat-label">ŸÖÿ∫ŸÑŸÇÿ©</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptAvgParticipation">0%</div><div class="report-stat-label">ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©</div></div>
</div>

<div id="rptVotingResults"></div>

<div class="report-actions">
<button class="btn btn-green" onclick="exportVotingPDF()">üìÑ ÿ™ÿµÿØŸäÿ± PDF</button>
<button class="btn btn-gray" onclick="printReport('voting')">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</button>
</div>
</div>

<!-- ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ© -->
<div class="report-panel" id="reportOverview">
<div class="report-stats-grid">
<div class="report-stat"><div class="report-stat-num" id="rptOvMembers">0</div><div class="report-stat-label">üë• ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptOvFamilies">0</div><div class="report-stat-label">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptOvNews">0</div><div class="report-stat-label">üì∞ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptOvBalance">0</div><div class="report-stat-label">üí∞ ÿßŸÑÿ±ÿµŸäÿØ (NOK)</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptOvVotes">0</div><div class="report-stat-label">üó≥Ô∏è ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™</div></div>
<div class="report-stat"><div class="report-stat-num" id="rptOvCities">0</div><div class="report-stat-label">üèôÔ∏è ÿßŸÑŸÖÿØŸÜ</div></div>
</div>

<div class="chart-container">
<div class="chart-title">üìà ŸÖŸÑÿÆÿµ ÿπÿßŸÖ ŸÑŸÑŸÖŸÜÿ∏ŸÖÿ©</div>
<div id="rptOverviewSummary" style="line-height:2;font-size:0.9rem;color:var(--muted)"></div>
</div>

<div class="report-actions">
<button class="btn btn-green" onclick="exportOverviewPDF()">üìÑ ÿ™ÿµÿØŸäÿ± ÿ™ŸÇÿ±Ÿäÿ± ÿ¥ÿßŸÖŸÑ PDF</button>
<button class="btn btn-gray" onclick="printReport('overview')">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</button>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß -->
<div class="page" id="pageContact">
<div class="header"><h1>‚úâÔ∏è <span data-i18n="contactUs">ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</span></h1><p data-i18n="contactDescription">ÿ£ÿ±ÿ≥ŸÑ ŸÑŸÜÿß ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ£Ÿà ÿßŸÇÿ™ÿ±ÿßÿ≠ŸÉ</p></div>
<div class="contact-form">
<div class="card">
<div id="contactFormContainer">
<div class="form-group">
<label class="form-label">üë§ <span data-i18n="yourName">ÿßÿ≥ŸÖŸÉ</span> <span style="color:var(--red);">*</span></label>
<input type="text" class="form-input" id="contactName" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ">
</div>
<div class="form-group">
<label class="form-label">üì± <span data-i18n="phone">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</span> <span style="color:var(--muted);font-size:0.8rem;">(<span data-i18n="optional">ÿßÿÆÿ™Ÿäÿßÿ±Ÿä</span>)</span></label>
<input type="tel" class="form-input" id="contactPhone" placeholder="+47">
</div>
<div class="form-group">
<label class="form-label">üìß <span data-i18n="email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</span> <span style="color:var(--muted);font-size:0.8rem;">(<span data-i18n="optional">ÿßÿÆÿ™Ÿäÿßÿ±Ÿä</span>)</span></label>
<input type="email" class="form-input" id="contactEmail" placeholder="example@email.com">
</div>
<div class="form-group">
<label class="form-label">üìã <span data-i18n="subject">ÿßŸÑŸÖŸàÿ∂Ÿàÿπ</span> <span style="color:var(--red);">*</span></label>
<select class="form-select" id="contactSubject">
<option value="">-- ÿßÿÆÿ™ÿ± ÿßŸÑŸÖŸàÿ∂Ÿàÿπ --</option>
<option value="ÿßŸÇÿ™ÿ±ÿßÿ≠">üí° ÿßŸÇÿ™ÿ±ÿßÿ≠</option>
<option value="ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±">‚ùì ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±</option>
<option value="ÿ¥ŸÉŸàŸâ">‚ö†Ô∏è ÿ¥ŸÉŸàŸâ</option>
<option value="ÿ∑ŸÑÿ® ŸÖÿ≥ÿßÿπÿØÿ©">ü§ù ÿ∑ŸÑÿ® ŸÖÿ≥ÿßÿπÿØÿ©</option>
<option value="ÿ™ÿ∑Ÿàÿπ">üôã ÿ™ÿ∑Ÿàÿπ</option>
<option value="ÿ£ÿÆÿ±Ÿâ">üìù ÿ£ÿÆÿ±Ÿâ</option>
</select>
</div>
<div class="form-group">
<label class="form-label">üí¨ <span data-i18n="message">ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©</span> <span style="color:var(--red);">*</span></label>
<textarea class="form-textarea" id="contactMessage" rows="5" placeholder="ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß..."></textarea>
</div>
<button class="btn btn-green" style="width:100%;padding:15px;font-size:1rem;" onclick="sendMessage()">üì§ <span data-i18n="sendMessage">ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©</span></button>
</div>
<div class="contact-success" id="contactSuccess">
<div class="contact-success-icon">‚úÖ</div>
<h3 style="color:var(--green);margin-bottom:10px;" data-i18n="messageSent">ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠!</h3>
<p style="color:var(--muted);margin-bottom:20px;" data-i18n="messageThankYou">ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ÿ≥ŸÜÿ±ÿØ ÿπŸÑŸäŸÉ ŸÅŸä ÿ£ŸÇÿ±ÿ® ŸàŸÇÿ™.</p>
<button class="btn btn-gray" onclick="resetContactForm()">üìù <span data-i18n="sendAnother">ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ£ÿÆÿ±Ÿâ</span></button>
</div>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ (ŸÑŸÑÿ•ÿØÿßÿ±ÿ©) -->
<div class="page" id="pageInbox">
<div class="header"><h1>üì¨ <span data-i18n="inbox">ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ</span></h1><p data-i18n="inboxDescription">ÿ•ÿØÿßÿ±ÿ© ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≤Ÿàÿßÿ± ŸàÿßŸÑÿ£ÿπÿ∂ÿßÿ°</p></div>
<div class="inbox-stats">
<div class="inbox-stat"><div class="inbox-stat-num" id="totalMessages">0</div><div class="inbox-stat-label" data-i18n="totalMessages">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ</div></div>
<div class="inbox-stat"><div class="inbox-stat-num" id="unreadMessages" style="color:var(--green);">0</div><div class="inbox-stat-label" data-i18n="unreadMessages">ÿ∫Ÿäÿ± ŸÖŸÇÿ±Ÿàÿ°ÿ©</div></div>
<div class="inbox-stat"><div class="inbox-stat-num" id="readMessages" style="color:var(--muted);">0</div><div class="inbox-stat-label" data-i18n="readMessages">ŸÖŸÇÿ±Ÿàÿ°ÿ©</div></div>
</div>
<div class="inbox-filters">
<button class="btn btn-green btn-sm" onclick="filterMessages('all')" id="filterAll">üìã ÿßŸÑŸÉŸÑ</button>
<button class="btn btn-gray btn-sm" onclick="filterMessages('unread')" id="filterUnread">üîî ÿ∫Ÿäÿ± ŸÖŸÇÿ±Ÿàÿ°ÿ©</button>
<button class="btn btn-gray btn-sm" onclick="filterMessages('read')" id="filterRead">‚úÖ ŸÖŸÇÿ±Ÿàÿ°ÿ©</button>
<button class="btn btn-red btn-sm" onclick="markAllAsRead()">üëÅÔ∏è ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÉŸÑ ŸÉŸÖŸÇÿ±Ÿàÿ°</button>
</div>
<div class="card">
<div class="card-title">üì• ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸàÿßÿ±ÿØÿ©</div>
<div id="messagesList"></div>
</div>
</div>

<!-- Modal ŸÑÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© -->
<div class="modal-bg" id="messageModal">
<div class="modal" style="max-width:600px;">
<div class="modal-head">
<h3>üìß <span data-i18n="messageDetails">ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©</span></h3>
<button class="modal-close" onclick="closeMessageModal()">√ó</button>
</div>
<div class="modal-body" id="messageDetailContent"></div>
<div class="modal-foot">
<button class="btn btn-red btn-sm" onclick="deleteCurrentMessage()">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>
<button class="btn btn-gray" onclick="closeMessageModal()">ÿ•ÿ∫ŸÑÿßŸÇ</button>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÑŸÑŸÖÿ¥ÿßŸáÿØŸäŸÜ -->
<div class="page" id="pageLive">
<div class="header"><h1>üî¥ <span data-i18n="liveStream">ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</span></h1><p id="liveEventTitle" data-i18n="watchLiveEvents">ÿ¥ÿßŸáÿØ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ© Ÿàÿ¥ÿßÿ±ŸÉ ÿ®ÿßŸÑÿ™ÿµŸàŸäÿ™</p></div>
<div class="live-container">
<div class="live-video-section">
<div class="live-header">
<div class="live-indicator"><div class="live-dot"></div><span data-i18n="liveNow">ŸÖÿ®ÿßÿ¥ÿ± ÿßŸÑÿ¢ŸÜ</span></div>
<div class="live-title" id="liveStreamTitle">ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</div>
</div>
<div class="live-video-wrapper" id="liveVideoWrapper">
<div class="live-offline" id="liveOfflineMsg">
<div class="live-offline-icon">üì∫</div>
<div class="live-offline-text" data-i18n="noLiveStream">ŸÑÿß ŸäŸàÿ¨ÿØ ÿ®ÿ´ ŸÖÿ®ÿßÿ¥ÿ± ÿ≠ÿßŸÑŸäÿßŸã</div>
<p style="font-size:0.85rem;margin-top:10px;" data-i18n="checkBackLater">ÿ™ÿßÿ®ÿπŸÜÿß ŸÑŸÑÿ•ÿπŸÑÿßŸÜ ÿπŸÜ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÇÿßÿØŸÖ</p>
</div>
<div id="liveVideoContainer" style="display:none;width:100%;height:100%;position:absolute;top:0;left:0;">
<iframe id="liveVideoFrame" style="width:100%;height:100%;border:none;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<div id="liveAlternativeOptions" style="display:none;padding:15px;background:var(--dark);border-radius:0 0 15px 15px;text-align:center;">
<p style="margin-bottom:10px;color:var(--muted);font-size:0.9rem;">‚¨ÜÔ∏è ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ∏Ÿáÿ± ÿßŸÑŸÅŸäÿØŸäŸà ÿ£ÿπŸÑÿßŸá:</p>
<button class="btn btn-green" onclick="openLiveInNewWindow()" style="margin:5px;">üì∫ ŸÅÿ™ÿ≠ ÿßŸÑÿ®ÿ´ ŸÅŸä ŸÜÿßŸÅÿ∞ÿ© ÿ¨ÿØŸäÿØÿ©</button>
<a id="liveDirectLink" href="#" target="_blank" class="btn btn-red" style="margin:5px;display:inline-block;">üî¥ ŸÖÿ¥ÿßŸáÿØÿ© ÿπŸÑŸâ YouTube</a>
</div>
</div>
<div class="live-voting-section">
<div class="live-voting-header">
<h3>üó≥Ô∏è <span data-i18n="voteNow">ÿµŸàŸëÿ™ ÿßŸÑÿ¢ŸÜ</span></h3>
<p data-i18n="voteWhileWatching">ÿ¥ÿßÿ±ŸÉ ÿ®ÿµŸàÿ™ŸÉ ÿ£ÿ´ŸÜÿßÿ° ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ®ÿ´</p>
</div>
<div id="liveVotingList"></div>
<div class="live-no-votes" id="liveNoVotes">
<div style="font-size:2rem;margin-bottom:10px;">üó≥Ô∏è</div>
<p data-i18n="noActiveVotesNow">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™ ŸÜÿ¥ÿ∑ÿ© ÿ≠ÿßŸÑŸäÿßŸã</p>
</div>
</div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± -->
<div class="page" id="pageManageLive">
<div class="header"><h1>üé¨ <span data-i18n="manageLive">ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</span></h1><p data-i18n="setupLiveStream">ÿ•ÿπÿØÿßÿØ Ÿàÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</p></div>
<div class="live-admin-panel">
<h3 style="color:var(--gold);margin-bottom:15px;">üì∫ <span data-i18n="streamSettings">ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿ´</span></h3>
<div class="form-group">
<label class="form-label" data-i18n="streamTitle">ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ÿ´</label>
<input class="form-input" id="adminLiveTitle" placeholder="ŸÖÿ´ÿßŸÑ: ÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© 2025">
</div>
<div class="form-group">
<label class="form-label">ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´ (YouTube ÿ£Ÿà Facebook Live)</label>
<div class="live-url-input">
<input class="form-input" id="adminLiveUrl" placeholder="https://www.youtube.com/watch?v=XXXXX">
<button class="btn btn-gold" onclick="previewLiveStream()">üëÅÔ∏è ŸÖÿπÿßŸäŸÜÿ©</button>
</div>
<p style="font-size:0.8rem;color:var(--muted);margin-top:5px;">üí° ÿßŸÜÿ≥ÿÆ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´ ŸÖŸÜ YouTube ÿ£Ÿà Facebook - ÿ™ÿ£ŸÉÿØ ÿ£ŸÜ ÿßŸÑÿ®ÿ´ Ÿäÿ≥ŸÖÿ≠ ÿ®ÿßŸÑÿ™ÿ∂ŸÖŸäŸÜ (embedding)</p>
</div>
<div class="form-group">
<label class="form-label" data-i18n="linkedVote">ÿ±ÿ®ÿ∑ ÿ™ÿµŸàŸäÿ™ ÿ®ÿßŸÑÿ®ÿ´ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
<select class="form-select" id="adminLiveVote">
<option value="">-- ÿ®ÿØŸàŸÜ ÿ™ÿµŸàŸäÿ™ --</option>
</select>
</div>
<div class="form-group" style="margin-top:15px;">
<div class="checkbox-row" style="background:var(--dark);padding:15px;border-radius:10px;">
<input type="checkbox" id="adminLivePublic" checked>
<label for="adminLivePublic" style="font-size:0.95rem;">
<strong style="color:var(--gold);">üëÅÔ∏è ÿ•ÿ∏Ÿáÿßÿ± ŸÑŸÑÿπÿßŸÖÿ©</strong><br>
<span style="font-size:0.8rem;color:var(--muted);">ÿßŸÑÿ≥ŸÖÿßÿ≠ ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ≤Ÿàÿßÿ± ÿ®ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ®ÿ´ (ÿ®ÿØŸàŸÜ ÿßŸÑÿ≠ÿßÿ¨ÿ© ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ)</span>
</label>
</div>
</div>
<div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:15px;">
<button class="btn btn-green" onclick="startLiveStream()">üî¥ <span data-i18n="startStream">ÿ®ÿØÿ° ÿßŸÑÿ®ÿ´</span></button>
<button class="btn btn-red" onclick="stopLiveStream()">‚èπÔ∏è <span data-i18n="stopStream">ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ®ÿ´</span></button>
</div>
<div class="live-status inactive" id="liveStatusPanel">
<div style="font-size:2rem;">üì∫</div>
<div>
<strong id="liveStatusText" data-i18n="streamStopped">ÿßŸÑÿ®ÿ´ ŸÖÿ™ŸàŸÇŸÅ</strong>
<p style="margin:5px 0 0;font-size:0.85rem;color:var(--muted);" id="liveStatusInfo"></p>
</div>
</div>
</div>
<div class="card">
<div class="card-title">üìã <span data-i18n="streamGuide">ÿØŸÑŸäŸÑ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</span></div>
<div style="line-height:1.8;font-size:0.9rem;">
<p><strong>1. YouTube Live:</strong></p>
<ul style="margin:5px 0 15px 20px;color:var(--muted);">
<li>ÿßŸÅÿ™ÿ≠ YouTube Studio ‚Üí "ÿ•ŸÜÿ¥ÿßÿ°" ‚Üí "ÿ®ÿ´ ŸÖÿ®ÿßÿ¥ÿ±"</li>
<li>ŸÅŸä ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿ´ÿå ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑÿ™ÿ∂ŸÖŸäŸÜ</li>
<li>ÿßŸÜÿ≥ÿÆ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´ ŸàÿßŸÑÿµŸÇŸá ŸáŸÜÿß</li>
<li><strong style="color:var(--gold);">ŸÖŸáŸÖ:</strong> ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸäŸÉŸàŸÜ ŸÖÿ´ŸÑ: youtube.com/live/XXXXX</li>
</ul>
<p><strong>2. Facebook Live:</strong></p>
<ul style="margin:5px 0 15px 20px;color:var(--muted);">
<li>ÿßŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ™ŸÉ ÿπŸÑŸâ Facebook</li>
<li>ÿßÿ∂ÿ∫ÿ∑ "ÿ®ÿ´ ŸÖÿ®ÿßÿ¥ÿ±"</li>
<li>ÿßŸÜÿ≥ÿÆ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´ ŸàÿßŸÑÿµŸÇŸá ŸáŸÜÿß</li>
</ul>
<p><strong style="color:var(--red);">‚ö†Ô∏è ŸÖŸÑÿßÿ≠ÿ∏ÿ©:</strong> <span style="color:var(--muted);">ÿ•ÿ∞ÿß ÿ∏Ÿáÿ± ÿÆÿ∑ÿ£ÿå ÿ¨ÿ±ÿ® ŸÅÿ™ÿ≠ ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸÅŸä ŸÜÿßŸÅÿ∞ÿ© ÿ¨ÿØŸäÿØÿ© ŸÑŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸá ŸäÿπŸÖŸÑ.</span></p>
</div>
</div>
</div>

<div class="page" id="pageAdmin">
<div class="header"><h1>‚öôÔ∏è ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</h1></div>
<div class="grid">
<div class="card">
<div class="card-title">üè∑Ô∏è ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∏ŸÖÿ©</div>
<div class="form-group"><label class="form-label">ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä</label><input class="form-input" id="orgNameAr" placeholder="ŸÖÿ´ÿßŸÑ: ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä/ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿä</label><input class="form-input" id="orgNameEn" placeholder="ŸÖÿ´ÿßŸÑ: Det palestinske samfunn i Rogaland"></div>
<button class="btn btn-green" onclick="saveOrgName()">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿßÿ≥ŸÖ</button>
</div>
<div class="card"><div class="card-title">üñºÔ∏è ÿßŸÑÿ¥ÿπÿßÿ±</div><div class="upload-box" id="logoUpload">üì∑ ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ±</div><input type="file" id="logoFile" accept="image/*" style="display:none"></div>
<div class="card"><div class="card-title">üîê ÿßŸÑÿ£ŸÖÿßŸÜ</div><button class="btn btn-gray" id="btnChangePass" style="width:100%;margin-bottom:8px;">üîë ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</button><button class="btn btn-red" id="btnLogout" style="width:100%;">üö™ ÿÆÿ±Ÿàÿ¨</button></div>

<div class="card">
<div class="card-title">üíæ ÿßŸÑŸÜÿ≥ÿÆ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä</div>
<p style="color:var(--muted);font-size:0.85rem;margin-bottom:15px;">ÿßÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ŸÖŸÜ ŸÉŸÑ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿ£Ÿà ÿßÿ≥ÿ™ÿπÿØŸáÿß ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™</p>
<div style="display:grid;gap:10px;">
<button class="btn btn-green" onclick="exportBackup()" style="width:100%;">üì• ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ÿ™ŸÜÿ≤ŸäŸÑ ŸÖŸÑŸÅ)</button>
<button class="btn btn-gold" onclick="document.getElementById('importBackupFile').click()" style="width:100%;">üì§ ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ÿ®ŸäÿßŸÜÿßÿ™ (ŸÖŸÜ ŸÖŸÑŸÅ)</button>
<input type="file" id="importBackupFile" accept=".json" style="display:none" onchange="importBackup(this)">
<button class="btn btn-gray" onclick="exportBackupCloud()" style="width:100%;">‚òÅÔ∏è ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ÿπŸÑŸâ ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿ©</button>
</div>
<div id="backupStatus" style="margin-top:10px;font-size:0.8rem;color:var(--muted);"></div>
</div>
</div>

<!-- ŸÇÿ≥ŸÖ ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© -->
<div class="card">
<div class="card-title">üè† ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</div>
<p style="color:var(--muted);font-size:0.85rem;margin-bottom:20px;">ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ™Ÿä ÿ™ÿ±ŸäÿØ ÿπÿ±ÿ∂Ÿáÿß ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸàÿÆÿµÿµ ŸÖÿ≠ÿ™ŸàÿßŸáÿß</p>

<div class="home-sections-grid">
<!-- 1. ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿ±ÿ≠Ÿäÿ® -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowHero" checked onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üéâ ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿ±ÿ≠Ÿäÿ® (Hero)</span>
<button class="btn btn-sm btn-gray" onclick="toggleEditSection('heroEdit')">‚úèÔ∏è</button>
</div>
<div class="home-section-edit" id="heroEdit" style="display:none;">
<div class="form-group"><label class="form-label">ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä</label><input class="form-input" id="heroTitle" placeholder="ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ ŸÅŸä ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©" onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÜÿµ ÿßŸÑŸÅÿ±ÿπŸä</label><input class="form-input" id="heroSubtitle" placeholder="ŸÜÿ¨ŸÖÿπ ÿ¥ŸÖŸÑŸÜÿß ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ" onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">ŸÜÿµ ÿßŸÑÿ≤ÿ± ÿßŸÑÿ£ŸàŸÑ</label><input class="form-input" id="heroBtn1Text" placeholder="ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸäŸÜÿß" onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">ŸÜÿµ ÿßŸÑÿ≤ÿ± ÿßŸÑÿ´ÿßŸÜŸä</label><input class="form-input" id="heroBtn2Text" placeholder="ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß" onchange="saveHomeSettings()"></div>
</div>
</div>

<!-- 2. ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowStats" checked onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üìä ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</span>
</div>
</div>

<!-- 3. ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowQuickActions" checked onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">‚ö° ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ</span>
<button class="btn btn-sm btn-gray" onclick="toggleEditSection('quickActionsEdit')">‚úèÔ∏è</button>
</div>
<div class="home-section-edit" id="quickActionsEdit" style="display:none;">
<p style="font-size:0.8rem;color:var(--muted);margin-bottom:10px;">ÿßÿÆÿ™ÿ± ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™Ÿä ÿ™ÿ±ŸäÿØ ÿ•ÿ∏Ÿáÿßÿ±Ÿáÿß:</p>
<div class="checkbox-row"><input type="checkbox" id="qaRegister" checked onchange="saveHomeSettings()"><label>üìù ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaVoting" checked onchange="saveHomeSettings()"><label>üó≥Ô∏è ÿßŸÑÿ™ÿµŸàŸäÿ™</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaLive" checked onchange="saveHomeSettings()"><label>üì∫ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaMap" checked onchange="saveHomeSettings()"><label>üó∫Ô∏è ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑŸÖŸÜÿ™ÿ≥ÿ®ŸäŸÜ</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaNews" onchange="saveHomeSettings()"><label>üì∞ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaFinance" onchange="saveHomeSettings()"><label>üí∞ ÿßŸÑŸÖÿßŸÑŸäÿ©</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaBylaws" onchange="saveHomeSettings()"><label>üìú ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaInvitation" onchange="saveHomeSettings()"><label>üì® ŸÖÿ≠ÿ±ÿ± ÿßŸÑÿØÿπŸàÿßÿ™</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaConfInvite" onchange="saveHomeSettings()"><label>üèõÔ∏è ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</label></div>
<div class="checkbox-row"><input type="checkbox" id="qaContact" onchange="saveHomeSettings()"><label>‚úâÔ∏è ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</label></div>
</div>
</div>

<!-- 4. ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑŸÜÿ¥ÿ∑ -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowActiveVote" checked onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üó≥Ô∏è ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑŸÜÿ¥ÿ∑</span>
</div>
</div>

<!-- 5. ÿ¢ÿÆÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ± -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowNews" checked onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üì∞ ÿ¢ÿÆÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</span>
<button class="btn btn-sm btn-gray" onclick="toggleEditSection('newsEdit')">‚úèÔ∏è</button>
</div>
<div class="home-section-edit" id="newsEdit" style="display:none;">
<div class="form-group"><label class="form-label">ÿπÿØÿØ ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©</label><input type="number" class="form-input" id="homeNewsCount" value="3" min="1" max="10" onchange="saveHomeSettings()" style="width:100px;"></div>
</div>
</div>

<!-- 6. ÿπŸÜ ÿßŸÑÿ¨ÿßŸÑŸäÿ© -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowAbout" checked onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üèõÔ∏è ÿπŸÜ ÿßŸÑÿ¨ÿßŸÑŸäÿ©</span>
<button class="btn btn-sm btn-gray" onclick="toggleEditSection('aboutEdit')">‚úèÔ∏è</button>
</div>
<div class="home-section-edit" id="aboutEdit" style="display:none;">
<div class="form-group"><label class="form-label">ŸÜÿ®ÿ∞ÿ© ÿπŸÜ ÿßŸÑÿ¨ÿßŸÑŸäÿ©</label><textarea class="form-textarea" id="homeAboutText" rows="4" placeholder="ŸÜÿ≠ŸÜ ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖŸÜ ÿ£ÿ®ŸÜÿßÿ° ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ..." onchange="saveHomeSettings()"></textarea></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ±ÿ§Ÿäÿ©</label><input class="form-input" id="homeVision" placeholder="ÿ¨ÿßŸÑŸäÿ© ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÖÿ™ŸÖÿßÿ≥ŸÉÿ©..." onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©</label><input class="form-input" id="homeMission" placeholder="ÿÆÿØŸÖÿ© ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ©..." onchange="saveHomeSettings()"></div>
</div>
</div>

<!-- 7. ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ÿßŸÑŸÇÿßÿØŸÖÿ© -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowEvents" onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üìÖ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ÿßŸÑŸÇÿßÿØŸÖÿ©</span>
<button class="btn btn-sm btn-gray" onclick="toggleEditSection('eventsEdit')">‚úèÔ∏è</button>
</div>
<div class="home-section-edit" id="eventsEdit" style="display:none;">
<div id="eventsList"></div>
<button class="btn btn-gold btn-sm" onclick="addEvent()" style="margin-top:10px;">‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿπÿßŸÑŸäÿ©</button>
</div>
</div>

<!-- 8. ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿ™ŸàÿßÿµŸÑ -->
<div class="home-section-item">
<div class="home-section-header">
<label class="toggle-switch"><input type="checkbox" id="homeShowSocial" onchange="saveHomeSettings()"><span class="toggle-slider"></span></label>
<span class="home-section-title">üîó ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä</span>
<button class="btn btn-sm btn-gray" onclick="toggleEditSection('socialEdit')">‚úèÔ∏è</button>
</div>
<div class="home-section-edit" id="socialEdit" style="display:none;">
<div class="form-group"><label class="form-label">ŸÅŸäÿ≥ÿ®ŸàŸÉ</label><input class="form-input" id="socialFacebook" placeholder="https://facebook.com/..." onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">ÿßŸÜÿ≥ÿ™ÿ∫ÿ±ÿßŸÖ</label><input class="form-input" id="socialInstagram" placeholder="https://instagram.com/..." onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">Ÿàÿßÿ™ÿ≥ÿßÿ® (ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©)</label><input class="form-input" id="socialWhatsapp" placeholder="https://chat.whatsapp.com/..." onchange="saveHomeSettings()"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label><input class="form-input" id="socialEmail" placeholder="info@example.com" onchange="saveHomeSettings()"></div>
</div>
</div>
</div>
</div>

<div class="card">
<div class="card-title">üëÅÔ∏è ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿ∏ŸáŸàÿ± ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ</div>
<div class="toggle-row"><span>üì∞ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</span><select class="visibility-select" id="visNews"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üí∞ ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©</span><select class="visibility-select" id="visFinance"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üó∫Ô∏è ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©</span><select class="visibility-select" id="visMap"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üì® ŸÖÿ≠ÿ±ÿ± ÿßŸÑÿØÿπŸàÿßÿ™</span><select class="visibility-select" id="visInvitation"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üèõÔ∏è ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</span><select class="visibility-select" id="visConfInvite"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üìä ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±</span><select class="visibility-select" id="visReports"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üìú ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä</span><select class="visibility-select" id="visBylaws"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
<div class="toggle-row"><span>üó≥Ô∏è ÿßŸÑÿ™ÿµŸàŸäÿ™</span><select class="visibility-select" id="visVoting"><option value="all">ŸÑŸÑÿ¨ŸÖŸäÿπ</option><option value="admin">ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ ŸÅŸÇÿ∑</option><option value="hidden">ŸÖÿÆŸÅŸä</option></select></div>
</div>
</div>
<div class="page" id="pageMembers">
<div class="header"><h1>üë• ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</h1><p>ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÖÿ≥ÿ¨ŸÑŸäŸÜ: <span id="totalMembersCount" style="color:var(--gold);font-weight:bold;">0</span></p></div>
<div class="card">
<div class="card-title"><span>ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</span><div style="display:flex;gap:10px;"><button class="btn btn-gold btn-sm" onclick="regenerateAllCodes()">üîÑ ÿ™ÿ∫ŸäŸäÿ± ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™</button><button class="btn btn-green btn-sm" id="btnAddMember">‚ûï ÿ•ÿ∂ÿßŸÅÿ©</button></div></div>
<div class="form-group" style="margin-bottom:15px;"><input type="text" class="form-input" id="memberSearchInput" placeholder="üîç ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ..." oninput="searchMembers()"></div>
<div id="membersList"></div>
</div>
</div>
<div class="page" id="pageManageTx">
<div class="header"><h1>üí≥ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™</h1></div>
<div class="card">
<div class="card-title">ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπÿßŸÖŸÑÿ© ÿ¨ÿØŸäÿØÿ©</div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÜŸàÿπ</label><select class="form-select" id="txType"><option value="income">ÿ•Ÿäÿ±ÿßÿØ</option><option value="expense">ŸÖÿµÿ±ŸàŸÅ</option></select></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸàÿµŸÅ</label><input class="form-input" id="txDesc"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÖÿ®ŸÑÿ∫ (NOK)</label><input type="number" class="form-input" id="txAmount"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</label><input type="date" class="form-input" id="txDate"></div>
<div class="form-group"><label class="form-label">ÿµŸàÿ± ÿßŸÑŸÅŸàÿßÿ™Ÿäÿ±</label><div class="upload-box" id="txReceiptsUpload">üì∑ ÿ•ÿ∂ÿßŸÅÿ© ŸÅŸàÿßÿ™Ÿäÿ±</div><input type="file" id="txReceiptsFile" accept="image/*" multiple style="display:none"><div class="receipts-preview" id="txReceiptsPreview"></div></div>
<button class="btn btn-green" id="btnSaveTx">üíæ ÿ≠ŸÅÿ∏</button>
</div>
<div style="display:flex;align-items:center;gap:10px;margin:15px 0;flex-wrap:wrap;">
<label style="color:var(--muted);font-size:0.9rem;">üìÖ ŸÅŸÑÿ™ÿ± ÿßŸÑÿ≥ŸÜÿ©:</label>
<select class="form-select" id="adminTxYearFilter" onchange="window.loadAdminTx()" style="width:auto;min-width:120px;">
</select>
</div>
<div class="card"><div class="card-title">üìã ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™</div><div id="adminTxList"></div></div>
</div>
<div class="page" id="pageManageNews">
<div class="header"><h1>üì∞ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</h1></div>
<div class="card">
<div class="card-title">ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿ®ÿ± ÿ¨ÿØŸäÿØ</div>
<div class="form-group"><label class="form-label">ÿßŸÑÿπŸÜŸàÿßŸÜ</label><input class="form-input" id="newNewsTitle"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ</label><textarea class="form-textarea" id="newNewsContent"></textarea></div>
<div class="form-group"><label class="form-label">ÿµŸàÿ± ÿßŸÑÿÆÿ®ÿ±</label><div class="upload-box" id="newsImgsUpload">üì∑ ÿ•ÿ∂ÿßŸÅÿ© ÿµŸàÿ±</div><input type="file" id="newsImgsFile" accept="image/*" multiple style="display:none"><div class="imgs-preview" id="newsImgsPreview"></div></div>
<button class="btn btn-green" id="btnPublishNews">üì§ ŸÜÿ¥ÿ±</button>
</div>
<div class="card"><div class="card-title">üìã ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±</div><div id="adminNewsList"></div></div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ± -->
<div class="page" id="pageGallery">
<div class="header"><h1>üñºÔ∏è ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±</h1><p>ÿµŸàÿ± ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ŸàÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿßÿ™</p></div>
<div id="galleryContent">
<div class="gallery-grid" id="galleryGrid"></div>
</div>
<div id="galleryAlbumView" style="display:none;">
<button class="btn btn-gray" onclick="closeAlbumView()" style="margin-bottom:15px;">‚Üí ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ£ŸÑÿ®ŸàŸÖÿßÿ™</button>
<h3 id="albumViewTitle" style="margin-bottom:15px;"></h3>
<div class="gallery-photos" id="albumPhotos"></div>
</div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿ•ÿØÿßÿ±ÿ© ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ± -->
<div class="page" id="pageManageGallery">
<div class="header"><h1>üñºÔ∏è ÿ•ÿØÿßÿ±ÿ© ŸÖÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±</h1></div>
<div class="card">
<div class="card-title">ÿ•ÿ∂ÿßŸÅÿ© ÿ£ŸÑÿ®ŸàŸÖ ÿ¨ÿØŸäÿØ</div>
<div class="form-group"><label class="form-label">ÿßÿ≥ŸÖ ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ</label><input class="form-input" id="albumTitle" placeholder="ŸÖÿ´ŸÑÿßŸã: ŸÅÿπÿßŸÑŸäÿ© ŸäŸàŸÖ ÿßŸÑÿ£ÿ±ÿ∂ 2026"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸàÿµŸÅ</label><input class="form-input" id="albumDesc" placeholder="ŸàÿµŸÅ ŸÇÿµŸäÿ±"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿµŸàÿ±</label>
<div class="gallery-upload-area" id="albumUploadArea">üì∑ ÿßÿ∂ÿ∫ÿ∑ ÿ£Ÿà ÿßÿ≥ÿ≠ÿ® ÿßŸÑÿµŸàÿ± ŸáŸÜÿß</div>
<input type="file" id="albumFiles" accept="image/*" multiple style="display:none">
<div class="gallery-thumbs" id="albumThumbs"></div>
</div>
<button class="btn btn-green" onclick="saveAlbum()">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ</button>
</div>
<div class="card"><div class="card-title">üìã ÿßŸÑÿ£ŸÑÿ®ŸàŸÖÿßÿ™</div><div id="adminAlbumList"></div></div>
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© -->
<div class="page" id="pagePrivacy">
<div class="header"><h1>üîí ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</h1><p>Personvernerkl√¶ring</p></div>
<div class="privacy-page">
<div class="privacy-tabs">
<button class="privacy-tab active" onclick="switchPrivacyLang('ar')">üáµüá∏ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
<button class="privacy-tab" onclick="switchPrivacyLang('no')">üá≥üá¥ Norsk</button>
</div>

<!-- ÿßŸÑÿπÿ±ÿ®Ÿäÿ© -->
<div class="privacy-lang active" id="privacyAr">
<div class="privacy-card">
<h2>üèõÔ∏è ŸÖŸÜ ŸÜÿ≠ŸÜ</h2>
<p>ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ ŸáŸä ŸÖŸÜÿ∏ŸÖÿ© ÿ™ÿ∑ŸàÿπŸäÿ© ŸÖÿ≥ÿ¨ŸÑÿ© ŸÅŸä ÿßŸÑŸÜÿ±ŸàŸäÿ¨. ŸÜÿ≠ŸÜ ŸÜŸÑÿ™ÿ≤ŸÖ ÿ®ÿ≠ŸÖÿßŸäÿ© ÿÆÿµŸàÿµŸäÿ© ÿ£ÿπÿ∂ÿßÿ¶ŸÜÿß Ÿàÿ≤Ÿàÿßÿ± ŸÖŸàŸÇÿπŸÜÿß ŸàŸÅŸÇÿßŸã ŸÑŸÇÿßŸÜŸàŸÜ ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿä (Personopplysningsloven) ŸàÿßŸÑŸÑÿßÿ¶ÿ≠ÿ© ÿßŸÑÿπÿßŸÖÿ© ŸÑÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (GDPR).</p>
</div>

<div class="privacy-card">
<h2>üìã ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™Ÿä ŸÜÿ¨ŸÖÿπŸáÿß</h2>
<h3>ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°</h3>
<p>ÿπŸÜÿØ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÉÿπÿ∂Ÿàÿå ŸÜÿ¨ŸÖÿπ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ©:</p>
<ul>
<li>ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ</li>
<li>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</li>
<li>ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ≥ŸÉŸÜ (ÿßŸÑŸÖÿØŸäŸÜÿ©)</li>
<li>ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿπÿßÿ¶ŸÑÿ© (ÿπÿØÿØ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿ£ÿ≥ÿ±ÿ©)</li>
</ul>
<h3>ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≤Ÿàÿßÿ±</h3>
<p>ÿπŸÜÿØ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÜŸÖŸàÿ∞ÿ¨ "ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß"ÿå ŸÇÿØ ŸÜÿ¨ŸÖÿπ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ŸàÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä).</p>
<h3>ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ŸÇŸÜŸäÿ©</h3>
<p>ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ≠ŸÑŸä (localStorage) ŸÅŸä ŸÖÿ™ÿµŸÅÿ≠ŸÉ ŸÑÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑÿßÿ™ŸÉ ŸÖÿ´ŸÑ ÿßŸÑŸÑÿ∫ÿ© ŸàÿßŸÑŸÖÿ∏Ÿáÿ±. ŸÑÿß ŸÜÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿßÿ±ÿ™ÿ®ÿßÿ∑ (cookies) ŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ≤Ÿàÿßÿ±.</p>
</div>

<div class="privacy-card">
<h2>üéØ ŸÑŸÖÿßÿ∞ÿß ŸÜÿ¨ŸÖÿπ Ÿáÿ∞Ÿá ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™</h2>
<ul>
<li><strong>ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿπÿ∂ŸàŸäÿ©:</strong> ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸáŸÖ ÿ®ÿ¥ÿ£ŸÜ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ŸàÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©</li>
<li><strong>ÿßŸÑÿ™ŸàÿßÿµŸÑ:</strong> ÿßŸÑÿ±ÿØ ÿπŸÑŸâ ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ŸÉŸÖ Ÿàÿ±ÿ≥ÿßÿ¶ŸÑŸÉŸÖ</li>
<li><strong>ÿßŸÑÿ™ÿµŸàŸäÿ™:</strong> ÿ•ÿØÿßÿ±ÿ© ÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿØÿßÿÆŸÑŸäÿ©</li>
<li><strong>ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™:</strong> ŸÅŸáŸÖ ÿ≠ÿ¨ŸÖ ÿßŸÑÿ¨ÿßŸÑŸäÿ© Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ÿÆÿØŸÖÿßÿ™ŸÜÿß</li>
</ul>
<p>ÿßŸÑÿ£ÿ≥ÿßÿ≥ ÿßŸÑŸÇÿßŸÜŸàŸÜŸä ŸÑŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸáŸà <strong>ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©</strong> (ÿßŸÑŸÖÿßÿØÿ© 6(1)(ÿ£) ŸÖŸÜ GDPR) ÿßŸÑÿ™Ÿä ÿ™ŸÇÿØŸÖŸáÿß ÿπŸÜÿØ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ.</p>
</div>

<div class="privacy-card">
<h2>üîê ŸÉŸäŸÅ ŸÜÿ≠ŸÖŸä ÿ®ŸäÿßŸÜÿßÿ™ŸÉŸÖ</h2>
<ul>
<li>ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿ®ÿ¥ŸÉŸÑ ŸÖÿ¥ŸÅŸëÿ± ŸàŸÖÿ≠ŸÖŸä</li>
<li>ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÇÿ™ÿµÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäŸÜ ÿßŸÑŸÖÿπÿ™ŸÖÿØŸäŸÜ ŸÅŸÇÿ∑</li>
<li>ŸÑÿß ŸÜÿ¥ÿßÿ±ŸÉ ÿ®ŸäÿßŸÜÿßÿ™ŸÉŸÖ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ ÿ´ÿßŸÑÿ´ ÿ®ÿØŸàŸÜ ÿ•ÿ∞ŸÜŸÉŸÖ</li>
<li>ŸÑÿß ŸÜÿ®Ÿäÿπ ÿ£Ÿà ŸÜÿ™ÿßÿ¨ÿ± ÿ®ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿ£ÿ®ÿØÿßŸã</li>
</ul>
</div>

<div class="privacy-card">
<h2>‚öñÔ∏è ÿ≠ŸÇŸàŸÇŸÉŸÖ</h2>
<p>ÿ®ŸÖŸàÿ¨ÿ® ŸÇÿßŸÜŸàŸÜ GDPRÿå ŸÑÿØŸäŸÉŸÖ ÿßŸÑÿ≠ŸÇŸàŸÇ ÿßŸÑÿ™ÿßŸÑŸäÿ©:</p>
<ul>
<li><strong>ÿ≠ŸÇ ÿßŸÑŸàÿµŸàŸÑ:</strong> ÿ∑ŸÑÿ® ŸÜÿ≥ÿÆÿ© ŸÖŸÜ ÿ®ŸäÿßŸÜÿßÿ™ŸÉŸÖ ÿßŸÑÿ¥ÿÆÿµŸäÿ©</li>
<li><strong>ÿ≠ŸÇ ÿßŸÑÿ™ÿµÿ≠Ÿäÿ≠:</strong> ÿ™ÿπÿØŸäŸÑ ÿ£Ÿä ÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©</li>
<li><strong>ÿ≠ŸÇ ÿßŸÑÿ≠ÿ∞ŸÅ:</strong> ÿ∑ŸÑÿ® ÿ≠ÿ∞ŸÅ ÿ®ŸäÿßŸÜÿßÿ™ŸÉŸÖ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ</li>
<li><strong>ÿ≠ŸÇ ÿ≥ÿ≠ÿ® ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©:</strong> ÿ≥ÿ≠ÿ® ŸÖŸàÿßŸÅŸÇÿ™ŸÉŸÖ ÿπŸÑŸâ ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™</li>
<li><strong>ÿ≠ŸÇ ÿ™ŸÇÿØŸäŸÖ ÿ¥ŸÉŸàŸâ:</strong> ÿ™ŸÇÿØŸäŸÖ ÿ¥ŸÉŸàŸâ ŸÑŸáŸäÿ¶ÿ© ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ© (Datatilsynet)</li>
</ul>
</div>

<div class="privacy-card">
<h2>üìû ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</h2>
<p>ŸÑÿ£Ÿä ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± Ÿäÿ™ÿπŸÑŸÇ ÿ®ÿÆÿµŸàÿµŸäÿ© ÿ®ŸäÿßŸÜÿßÿ™ŸÉŸÖ ÿ£Ÿà ŸÑŸÖŸÖÿßÿ±ÿ≥ÿ© ÿ≠ŸÇŸàŸÇŸÉŸÖÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± ÿµŸÅÿ≠ÿ© "ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß" ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπ.</p>
<p style="color:var(--muted);margin-top:15px;font-size:0.85rem;">ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: ŸÅÿ®ÿ±ÿßŸäÿ± 2026</p>
</div>
</div>

<!-- ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ© -->
<div class="privacy-lang" id="privacyNo">
<div class="privacy-card">
<h2>üèõÔ∏è Hvem er vi</h2>
<p>Det palestinske samfunn i Rogaland er en frivillig organisasjon registrert i Norge. Vi forplikter oss til √• beskytte personvernet til v√•re medlemmer og bes√∏kende p√• v√•r nettside i samsvar med den norske personopplysningsloven og EUs personvernforordning (GDPR).</p>
</div>

<div class="privacy-card">
<h2>üìã Hvilke opplysninger samler vi inn</h2>
<h3>Medlemsdata</h3>
<p>Ved registrering som medlem samler vi inn f√∏lgende opplysninger:</p>
<ul>
<li>Fullt navn</li>
<li>Telefonnummer</li>
<li>Bostedsadresse (by)</li>
<li>Familieinformasjon (antall familiemedlemmer)</li>
</ul>
<h3>Bes√∏ksdata</h3>
<p>Ved bruk av ¬´Kontakt oss¬ª-skjemaet kan vi samle inn navn, telefonnummer og e-postadresse (valgfritt).</p>
<h3>Tekniske data</h3>
<p>Vi bruker lokal lagring (localStorage) i nettleseren din for √• lagre dine preferanser som spr√•k og tema. Vi bruker ikke informasjonskapsler (cookies) for √• spore bes√∏kende.</p>
</div>

<div class="privacy-card">
<h2>üéØ Hvorfor samler vi inn disse dataene</h2>
<ul>
<li><strong>Medlemsadministrasjon:</strong> Registrering av medlemmer og kommunikasjon om arrangementer og aktiviteter</li>
<li><strong>Kommunikasjon:</strong> Besvare henvendelser og meldinger</li>
<li><strong>Avstemning:</strong> Administrasjon av interne avstemninger</li>
<li><strong>Statistikk:</strong> Forst√• st√∏rrelsen p√• samfunnet og forbedre v√•re tjenester</li>
</ul>
<p>Det rettslige grunnlaget for behandling av personopplysninger er <strong>samtykke</strong> (artikkel 6(1)(a) i GDPR) som du gir ved registrering.</p>
</div>

<div class="privacy-card">
<h2>üîê Hvordan beskytter vi dine data</h2>
<ul>
<li>Data lagres kryptert og beskyttet</li>
<li>Tilgang til data er begrenset til autoriserte administratorer</li>
<li>Vi deler ikke dine data med tredjeparter uten ditt samtykke</li>
<li>Vi selger eller handler aldri med personopplysninger</li>
</ul>
</div>

<div class="privacy-card">
<h2>‚öñÔ∏è Dine rettigheter</h2>
<p>I henhold til GDPR har du f√∏lgende rettigheter:</p>
<ul>
<li><strong>Rett til innsyn:</strong> Be om en kopi av dine personopplysninger</li>
<li><strong>Rett til retting:</strong> Korrigere eventuelle feilaktige opplysninger</li>
<li><strong>Rett til sletting:</strong> Be om fullstendig sletting av dine data</li>
<li><strong>Rett til √• trekke samtykke:</strong> Trekke tilbake ditt samtykke til databehandling n√•r som helst</li>
<li><strong>Rett til √• klage:</strong> Sende klage til Datatilsynet</li>
</ul>
</div>

<div class="privacy-card">
<h2>üìû Kontakt oss</h2>
<p>For sp√∏rsm√•l om personvern eller for √• ut√∏ve dine rettigheter, ta kontakt via ¬´Kontakt oss¬ª-siden p√• nettsiden v√•r.</p>
<p style="color:var(--muted);margin-top:15px;font-size:0.85rem;">Sist oppdatert: februar 2026</p>
</div>
</div>

</div>
</div>

</main>

<!-- Cookie Consent Banner -->
<div class="cookie-banner" id="cookieBanner" style="display:none;">
<div class="cookie-banner-text">
üîí ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ≠ŸÑŸä ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ. ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ŸÑŸÑŸÖŸàŸÇÿπ ŸÅÿ•ŸÜŸÉ ÿ™ŸàÿßŸÅŸÇ ÿπŸÑŸâ <a onclick="goTo('privacy')">ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</a>.
<br><small>Vi bruker lokal lagring for √• forbedre opplevelsen din. Ved √• bruke nettstedet godtar du v√•r <a onclick="goTo('privacy')">personvernerkl√¶ring</a>.</small>
</div>
<div class="cookie-banner-btns">
<button class="cookie-btn-accept" onclick="acceptCookies()">‚úÖ ŸÖŸàÿßŸÅŸÇ | Godta</button>
</div>
</div>
<button class="mobile-btn" id="mobileBtn">‚ò∞</button>
<button class="theme-toggle" id="themeToggle" title="ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ">üåô</button>
<div class="modal-bg" id="loginModal"><div class="modal"><div class="modal-head"><h3>üîê ÿßŸÑÿØÿÆŸàŸÑ</h3><button class="modal-close" id="closeLogin">√ó</button></div><div class="modal-body"><div class="form-group"><label class="form-label">ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ</label><input type="text" class="form-input" id="usernameInput" placeholder="admin"></div><div class="form-group"><label class="form-label">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label><input type="password" class="form-input" id="passInput"></div></div><div class="modal-foot"><button class="btn btn-gray" id="cancelLogin">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-green" id="confirmLogin">ÿØÿÆŸàŸÑ</button></div></div></div>
<div class="modal-bg" id="passModal"><div class="modal"><div class="modal-head"><h3>üîë ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</h3><button class="modal-close" id="closePass">√ó</button></div><div class="modal-body"><div class="form-group"><label class="form-label">ÿßŸÑÿ≠ÿßŸÑŸäÿ©</label><input type="password" class="form-input" id="oldPass"></div><div class="form-group"><label class="form-label">ÿßŸÑÿ¨ÿØŸäÿØÿ©</label><input type="password" class="form-input" id="newPass"></div><div class="form-group"><label class="form-label">ÿ™ÿ£ŸÉŸäÿØ</label><input type="password" class="form-input" id="confirmPass"></div></div><div class="modal-foot"><button class="btn btn-gray" id="cancelPass">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-green" id="confirmPassBtn">ÿ≠ŸÅÿ∏</button></div></div></div>
<div class="modal-bg" id="memberModal"><div class="modal"><div class="modal-head"><h3 id="memberModalTitle">‚ûï ÿ•ÿ∂ÿßŸÅÿ© ÿπÿ∂Ÿà</h3><button class="modal-close" id="closeMember">√ó</button></div><div class="modal-body">
<input type="hidden" id="memberId">
<div class="form-group"><label class="form-label">ÿßŸÑÿßÿ≥ŸÖ *</label><input class="form-input" id="memberName"></div>
<div class="form-group"><label class="form-label">ÿµŸàÿ±ÿ© ÿßŸÑÿπÿ∂Ÿà</label><div class="upload-box" id="memberImgUpload">üì∑ ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ©</div><input type="file" id="memberImgFile" accept="image/*" style="display:none"><img id="memberImgPreview" class="img-preview"></div>
<div class="form-group"><label class="form-label">ÿßŸÑŸáÿßÿ™ŸÅ</label><input class="form-input" id="memberPhone"></div>
<div class="form-group"><label class="form-label">ÿßŸÑÿ®ÿ±ŸäÿØ</label><input class="form-input" id="memberEmail"></div>
<div class="form-group"><label class="form-label">ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</label><textarea class="form-textarea" id="memberNotes"></textarea></div>
<div class="form-group"><label class="form-label">üìç ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ</label><div class="address-search"><input class="form-input" id="memberAddressSearch" placeholder="ÿßŸÉÿ™ÿ® ÿßŸÑÿπŸÜŸàÿßŸÜ"><button class="btn btn-gold btn-sm" id="btnSearchAddress">üîç</button></div><div class="location-result" id="locationResult"><div id="locationText"></div></div></div>
<div class="form-group"><label class="form-label">ÿ£Ÿà ÿßŸÑÿ•ÿ≠ÿØÿßÿ´Ÿäÿßÿ™</label><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;"><input class="form-input" id="memberLat" placeholder="Lat" type="number" step="any"><input class="form-input" id="memberLng" placeholder="Lng" type="number" step="any"></div><button class="btn btn-gray btn-sm" id="btnGetLoc" style="margin-top:8px;">üìç ŸÖŸàŸÇÿπŸä</button></div>
<div style="margin-top:15px;font-weight:600;">üîí ÿßŸÑÿÆÿµŸàÿµŸäÿ©</div>
<div class="checkbox-row"><input type="checkbox" id="memberShowMap" checked><label>ÿ•ÿ∏Ÿáÿßÿ± ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©</label></div>
<div class="checkbox-row"><input type="checkbox" id="memberShowPhone"><label>ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸáÿßÿ™ŸÅ</label></div>
<div class="checkbox-row"><input type="checkbox" id="memberShowEmail"><label>ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ®ÿ±ŸäÿØ</label></div>
</div><div class="modal-foot"><button class="btn btn-gray" id="cancelMember">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-green" id="saveMember">üíæ ÿ≠ŸÅÿ∏</button></div></div></div>
<div class="modal-bg" id="deleteModal"><div class="modal" style="max-width:350px;"><div class="modal-head"><h3>‚ö†Ô∏è ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ≠ÿ∞ŸÅ</h3><button class="modal-close" id="closeDelete">√ó</button></div><div class="modal-body"><p id="deleteMsg">ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅÿü</p></div><div class="modal-foot"><button class="btn btn-gray" id="cancelDelete">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-red" id="confirmDelete">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button></div></div></div>
<div class="modal-bg" id="editTxModal"><div class="modal"><div class="modal-head"><h3>‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿ©</h3><button class="modal-close" id="closeEditTx">√ó</button></div><div class="modal-body"><input type="hidden" id="editTxId"><div class="form-group"><label class="form-label">ÿßŸÑŸÜŸàÿπ</label><select class="form-select" id="editTxType"><option value="income">ÿ•Ÿäÿ±ÿßÿØ</option><option value="expense">ŸÖÿµÿ±ŸàŸÅ</option></select></div><div class="form-group"><label class="form-label">ÿßŸÑŸàÿµŸÅ</label><input class="form-input" id="editTxDesc"></div><div class="form-group"><label class="form-label">ÿßŸÑŸÖÿ®ŸÑÿ∫</label><input type="number" class="form-input" id="editTxAmount"></div><div class="form-group"><label class="form-label">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</label><input type="date" class="form-input" id="editTxDate"></div><div class="form-group"><label class="form-label">ŸÅŸàÿßÿ™Ÿäÿ±</label><div class="upload-box" id="editTxReceiptsUpload">üì∑ ÿ•ÿ∂ÿßŸÅÿ©</div><input type="file" id="editTxReceiptsFile" accept="image/*" multiple style="display:none"><div class="receipts-preview" id="editTxReceiptsPreview"></div></div></div><div class="modal-foot"><button class="btn btn-gray" id="cancelEditTx">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-green" id="saveEditTx">üíæ ÿ≠ŸÅÿ∏</button></div></div></div>
<div class="modal-bg" id="editNewsModal"><div class="modal"><div class="modal-head"><h3>‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿÆÿ®ÿ±</h3><button class="modal-close" id="closeEditNews">√ó</button></div><div class="modal-body"><input type="hidden" id="editNewsId"><div class="form-group"><label class="form-label">ÿßŸÑÿπŸÜŸàÿßŸÜ</label><input class="form-input" id="editNewsTitle"></div><div class="form-group"><label class="form-label">ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ</label><textarea class="form-textarea" id="editNewsContent"></textarea></div><div class="form-group"><label class="form-label">ÿµŸàÿ±</label><div class="upload-box" id="editNewsImgsUpload">üì∑ ÿ•ÿ∂ÿßŸÅÿ©</div><input type="file" id="editNewsImgsFile" accept="image/*" multiple style="display:none"><div class="imgs-preview" id="editNewsImgsPreview"></div></div></div><div class="modal-foot"><button class="btn btn-gray" id="cancelEditNews">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-green" id="saveEditNews">üíæ ÿ≠ŸÅÿ∏</button></div></div></div>
<div class="modal-bg" id="pendingModal"><div class="modal"><div class="modal-head"><span>üìã ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®</span><button class="modal-close" id="closePending">√ó</button></div><div class="modal-body" id="pendingDetails"></div><div class="modal-foot"><button class="btn btn-gray" id="rejectPending">‚ùå ÿ±ŸÅÿ∂</button><button class="btn btn-green" id="approvePending">‚úÖ ŸÇÿ®ŸàŸÑ</button></div></div></div>
<div class="modal-bg" id="editFamilyModal"><div class="modal" style="max-width:500px;"><div class="modal-head"><span>‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπÿßÿ¶ŸÑÿ©</span><button class="modal-close" onclick="document.getElementById('editFamilyModal').classList.remove('show')">√ó</button></div><div class="modal-body">
<input type="hidden" id="editFamilyId">
<div class="form-group"><label class="form-label">ÿßŸÑÿßÿ≥ŸÖ</label><input class="form-input" id="editFamilyName"></div>
<div class="form-group"><label class="form-label">üì± ÿßŸÑŸáÿßÿ™ŸÅ</label><input class="form-input" id="editFamilyPhone" type="tel"></div>
<div class="form-group"><label class="form-label">üìß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label><input class="form-input" id="editFamilyEmail" type="email"></div>
<div class="form-group"><label class="form-label">üìç ÿßŸÑŸÖÿØŸäŸÜÿ©</label><input class="form-input" id="editFamilyCity"></div>
<div class="form-group"><label class="form-label">üè† ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä</label><input class="form-input" id="editFamilyAddress"></div>
<div class="form-group"><label class="form-label">üáµüá∏ ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ£ÿµŸÑŸä</label><input class="form-input" id="editFamilyOrigin"></div>
<div class="form-group"><label class="form-label">üìç ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿπŸÑŸâ ÿßŸÑÿÆÿßÿ±ÿ∑ÿ©</label>
<div style="display:flex;gap:10px;margin-bottom:10px;">
<input class="form-input" id="editFamilyLat" placeholder="ÿÆÿ∑ ÿßŸÑÿπÿ±ÿ∂" style="flex:1;">
<input class="form-input" id="editFamilyLng" placeholder="ÿÆÿ∑ ÿßŸÑÿ∑ŸàŸÑ" style="flex:1;">
</div>
<button class="btn btn-gray btn-sm" type="button" onclick="getCurrentLocationForEdit()">üìç ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä</button>
</div>
<div class="form-group"><label class="form-label">üîí ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸàÿµŸäÿ©</label>
<div class="checkbox-group" style="display:flex;flex-direction:column;gap:10px;margin-top:10px;">
<label class="checkbox-label"><input type="checkbox" id="editFamilyShowMap"> ÿßŸÑÿ∏ŸáŸàÿ± ÿπŸÑŸâ ÿßŸÑÿÆÿßÿ±ÿ∑ÿ©</label>
<label class="checkbox-label"><input type="checkbox" id="editFamilyShowPhone"> ÿ•ÿ∏Ÿáÿßÿ± ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°</label>
<label class="checkbox-label"><input type="checkbox" id="editFamilyShowEmail"> ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ®ÿ±ŸäÿØ ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°</label>
</div>
</div>
<div class="form-group"><label class="form-label">üìù ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</label><textarea class="form-textarea" id="editFamilyNotes" rows="2"></textarea></div>
</div><div class="modal-foot"><button class="btn btn-gray" onclick="document.getElementById('editFamilyModal').classList.remove('show')">ÿ•ŸÑÿ∫ÿßÿ°</button><button class="btn btn-green" onclick="saveFamilyEdit()">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™</button></div></div></div>

<!-- Modal ŸÖÿ≠ÿ±ÿ± ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ∑ÿ®ÿßÿπÿ© -->
<div class="modal-bg" id="printFormModal">
<div class="modal" style="max-width:900px;max-height:90vh;overflow:hidden;">
<div class="modal-head">
<h3>üìÑ ŸÖÿ≠ÿ±ÿ± ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ∑ÿ®ÿßÿπÿ©</h3>
<button class="modal-close" onclick="closePrintFormEditor()">√ó</button>
</div>
<div class="modal-body" style="padding:0;overflow:auto;max-height:calc(90vh - 140px);">
<div style="padding:15px;background:var(--dark);border-bottom:1px solid var(--border);">
<p style="color:var(--gold);margin-bottom:10px;">‚úèÔ∏è ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ£Ÿä ŸÜÿµ ŸÑÿ™ÿπÿØŸäŸÑŸá ŸÖÿ®ÿßÿ¥ÿ±ÿ©</p>
<div style="display:flex;gap:10px;flex-wrap:wrap;">
<div class="form-group" style="margin:0;flex:1;min-width:150px;">
<label class="form-label" style="font-size:0.75rem;">ÿπÿØÿØ ÿßŸÑÿµŸÅŸàŸÅ</label>
<input type="number" class="form-input" id="printFormRows" value="20" min="5" max="50" style="padding:8px;" onchange="updatePrintFormPreview()">
</div>
<div class="form-group" style="margin:0;flex:1;min-width:150px;">
<label class="form-label" style="font-size:0.75rem;">ÿßŸÑÿ≥ŸÜÿ©</label>
<input type="text" class="form-input" id="printFormYear" value="2025" style="padding:8px;" onchange="updatePrintFormPreview()">
</div>
</div>
</div>
<div id="printFormPreview" style="padding:20px;background:white;min-height:500px;"></div>
</div>
<div class="modal-foot">
<button class="btn btn-gray" onclick="closePrintFormEditor()">ÿ•ÿ∫ŸÑÿßŸÇ</button>
<button class="btn btn-green" onclick="printEditableForm()">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</button>
<button class="btn btn-red" onclick="downloadEditableFormPDF()">üìÑ ÿ™ÿ≠ŸÖŸäŸÑ PDF</button>
</div>
</div>
</div>

<div class="lightbox" id="lightbox"><button class="lightbox-close" id="closeLightbox">√ó</button><img id="lightboxImg"></div>
<div class="toast" id="toast"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="api.js"></script>
<script>
(function(){
// ====== ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÄ Backend API ======
var API_URL = 'http://localhost:5000/api';
var USE_BACKEND = true; // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÄ Backend

// ====== ÿ•ÿπÿØÿßÿØÿßÿ™ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≥ÿ≠ÿßÿ®Ÿäÿ© (ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä) ======
// ‚ö†Ô∏è ÿ£ÿØÿÆŸÑ ŸÖŸÅÿßÿ™Ÿäÿ≠ŸÉ ŸáŸÜÿß ÿ®ÿπÿØ ÿßŸÑŸÜÿ¥ÿ± - ŸÑÿß ÿ™ÿ¥ÿßÿ±ŸÉ Ÿáÿ∞ÿß ÿßŸÑŸÖŸÑŸÅ ŸÖÿπ ÿ£ÿ≠ÿØ
var JSONBIN_API_KEY = '';
var JSONBIN_BIN_ID = '';
var USE_CLOUD = false; // ŸÅÿπŸëŸÑ Ÿáÿ∞ÿß Ÿàÿ£ÿØÿÆŸÑ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿ£ÿπŸÑÿßŸá ŸÑŸÑŸÖÿ≤ÿßŸÖŸÜÿ© ÿßŸÑÿ≥ÿ≠ÿßÿ®Ÿäÿ©

var isAdmin=false,adminPass="1234",myMap=null,markers=[],centerMarker=null,deleteId=null,deleteType=null,memberImg="",newsImgs=[],editNewsImgs=[],txReceipts=[],editTxReceipts=[],currentPendingId=null,currentUser=null;

// ====== ÿØÿßŸÑÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿßŸÑŸÄ Backend ======
async function loadDataFromBackend(){
if(!USE_BACKEND || !window.API) return;

try{
// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°
var membersRes = await window.API.Members.getAll();
if(membersRes.success && membersRes.members){
appData.members = membersRes.members.map(function(m){
return {
id: m._id,
name: m.name,
phone: m.phone,
email: m.email,
city: m.city,
address: m.address,
originCity: m.originCity,
lat: m.lat,
lng: m.lng,
img: m.img,
notes: m.notes,
voteCode: m.voteCode,
familyMembers: m.familyMembers || [],
familySize: m.familySize || 1,
showMap: m.showMap,
showPhone: m.showPhone,
showEmail: m.showEmail
};
});
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±
var newsRes = await window.API.News.getAll();
if(newsRes.success && newsRes.news){
appData.news = newsRes.news.map(function(n){
return {
id: n._id,
title: n.title,
content: n.content,
imgs: n.images || [],
date: n.publishDate || n.createdAt
};
});
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ©
var txRes = await window.API.Transactions.getAll();
if(txRes.success && txRes.transactions){
appData.tx = txRes.transactions.map(function(t){
return {
id: t._id,
type: t.type,
desc: t.description,
amount: t.amount,
receipts: t.receipts || [],
date: t.date || t.createdAt
};
});
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™
var votesRes = await window.API.Votes.getAll();
if(votesRes.success && votesRes.votes){
appData.votes = votesRes.votes.map(function(v){
return {
id: v._id,
title: v.title,
question: v.question,
type: v.type,
options: v.options || [],
maxSelections: v.maxSelections || 1,
votes: v.votes || {yes:0,no:0},
voters: v.voters || [],
status: v.status
};
});
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ
if(isAdmin){
var msgsRes = await window.API.Messages.getAll();
if(msgsRes.success && msgsRes.messages){
// Get local deletions and read status
var deletedMsgs = JSON.parse(localStorage.getItem('deletedMessages') || '[]');
var readMsgs = JSON.parse(localStorage.getItem('readMessages') || '[]');

appData.messages = msgsRes.messages
.filter(function(m){ return deletedMsgs.indexOf(m._id) === -1; }) // Filter deleted
.map(function(m){
return {
id: m._id,
_id: m._id,
name: m.name,
phone: m.phone,
email: m.email,
subject: m.subject,
message: m.message,
read: m.read || readMsgs.indexOf(m._id) > -1, // Check local read status
date: m.createdAt
};
});
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®
var pendingRes = await window.API.Pending.getAll('pending');
if(pendingRes.success && pendingRes.requests){
appData.pending = pendingRes.requests.map(function(p){
return {
_id: p._id,
id: p._id,
name: p.name,
phone: p.phone,
email: p.email,
city: p.city,
address: p.address,
originCity: p.originCity,
lat: p.lat,
lng: p.lng,
familySize: p.familySize,
familyMembers: p.familyMembers || [],
notes: p.notes,
showMap: p.showMap,
showPhone: p.showPhone,
showEmail: p.showEmail,
date: p.createdAt
};
});
}
}

// ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿ±ÿ∂
loadNews();
loadFinance();
loadMembers();
loadMarkers();
loadCount();
loadVoting();
updateInboxBadge();
if(isAdmin){
loadAdminNews();
loadAdminTx();
loadPending();
}

console.log('‚úÖ Data loaded from Backend');
}catch(e){
console.error('Error loading from backend:',e);
}
}

// ====== ŸÜÿ∏ÿßŸÖ ÿ™ÿπÿØÿØ ÿßŸÑŸÑÿ∫ÿßÿ™ ======
var currentLang = localStorage.getItem('appLang') || 'ar';
var translations = {
ar: {
// ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
publicPages: 'ÿßŸÑÿµŸÅÿ≠ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©',
home: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
bylaws: 'ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä',
voting: 'ÿßŸÑÿ™ÿµŸàŸäÿ™',
news: 'ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
finance: 'ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©',
map: 'ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑŸÖŸÜÿ™ÿ≥ÿ®ŸäŸÜ',
register: 'ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®',
invitations: 'ŸÖÿ≠ÿ±ÿ± ÿßŸÑÿØÿπŸàÿßÿ™',
adminPanel: 'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©',
settings: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™',
manageMembers: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°',
pendingRequests: 'ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®',
registrationSheet: 'ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ',
manageTransactions: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™',
manageNews: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
manageVoting: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™',
adminLogin: 'ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ',
logout: 'ÿÆÿ±Ÿàÿ¨',
visitors: 'ÿßŸÑÿ≤Ÿàÿßÿ±',
// ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
welcome: 'ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ',
latestNews: 'ÿ¢ÿÆÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
budget: 'ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©',
members: 'ÿßŸÑÿ£ÿπÿ∂ÿßÿ°',
noNews: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿÆÿ®ÿßÿ±',
// ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©
financialAccounting: 'ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÖÿßŸÑŸäÿ©',
balance: 'ÿßŸÑÿ±ÿµŸäÿØ',
income: 'ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™',
expenses: 'ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™',
transactions: 'ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™',
// ÿßŸÑÿ™ÿµŸàŸäÿ™
voteTitle: 'ÿßŸÑÿ™ÿµŸàŸäÿ™',
voteDescription: 'ÿ¥ÿßÿ±ŸÉ ÿ®ÿ±ÿ£ŸäŸÉ ŸÅŸä ŸÇÿ±ÿßÿ±ÿßÿ™ ÿßŸÑÿ¨ÿßŸÑŸäÿ©',
enterVoteCode: 'ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™',
confirmVote: 'ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿµŸàŸäÿ™',
agree: 'ŸÖŸàÿßŸÅŸÇ',
disagree: 'ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ',
totalVotes: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿµŸàÿßÿ™',
membersCount: 'ÿπÿØÿØ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°',
noActiveVotes: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™ ŸÜÿ¥ÿ∑ÿ© ÿ≠ÿßŸÑŸäÿßŸã',
open: 'ŸÖŸÅÿ™Ÿàÿ≠',
closed: 'ŸÖÿ∫ŸÑŸÇ',
// ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™
createNewVote: 'ÿ•ŸÜÿ¥ÿßÿ° ÿ™ÿµŸàŸäÿ™ ÿ¨ÿØŸäÿØ',
voteType: 'ŸÜŸàÿπ ÿßŸÑÿ™ÿµŸàŸäÿ™',
yesNo: 'ŸÖŸàÿßŸÅŸÇ / ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ',
multipleChoice: 'ÿÆŸäÿßÿ±ÿßÿ™ ŸÖÿ™ÿπÿØÿØÿ© (ŸÖÿ±ÿ¥ÿ≠ŸäŸÜ / ÿßÿÆÿ™Ÿäÿßÿ±ÿßÿ™)',
optionsCandidates: 'ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ / ÿßŸÑŸÖÿ±ÿ¥ÿ≠ŸäŸÜ (ŸÉŸÑ ÿ≥ÿ∑ÿ± ÿÆŸäÿßÿ±)',
maxSelectionsAllowed: 'ÿπÿØÿØ ÿßŸÑÿ£ÿµŸàÿßÿ™ ÿßŸÑŸÖÿ≥ŸÖŸàÿ≠ ŸÑŸÉŸÑ ÿπÿ∂Ÿà',
createVote: 'ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿµŸàŸäÿ™',
currentVotes: 'ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©',
closeVote: 'ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™',
reopenVote: 'ÿ•ÿπÿßÿØÿ© ŸÅÿ™ÿ≠',
showCodes: 'ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÖŸàÿ≤',
whoVoted: 'ŸÖŸÜ ÿµŸàŸëÿ™',
delete: 'ÿ≠ÿ∞ŸÅ',
// ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©
membersMap: 'ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑŸÖŸÜÿ™ÿ≥ÿ®ŸäŸÜ',
all: 'ÿßŸÑŸÉŸÑ',
myLocation: 'ŸÖŸàŸÇÿπŸä',
bestMeetingLocation: 'ÿ£ŸÅÿ∂ŸÑ ŸÖŸàŸÇÿπ ŸÑŸÑÿßÿ¨ÿ™ŸÖÿßÿπ',
onMap: 'ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©',
hidden: 'ŸÖÿÆŸÅŸä',
cities: 'ŸÖÿØŸäŸÜÿ©',
statistics: 'ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',
// ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®
registrationForm: 'ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®',
joinUs: 'ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ',
personalInfo: 'ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ©',
fullName: 'ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ',
phone: 'ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ',
email: 'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
residenceInfo: 'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≥ŸÉŸÜ',
city: 'ÿßŸÑŸÖÿØŸäŸÜÿ© / ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©',
fullAddress: 'ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑŸÉÿßŸÖŸÑ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)',
search: 'ÿ®ÿ≠ÿ´',
currentLocation: 'ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä',
palestinianOrigin: 'ÿßŸÑÿ£ÿµŸÑ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä',
originCity: 'ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ£ÿµŸÑŸä ŸÅŸä ŸÅŸÑÿ≥ÿ∑ŸäŸÜ',
familyMembers: 'ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
familySize: 'ÿπÿØÿØ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿ£ÿ≥ÿ±ÿ© (ÿ®ŸÖÿß ŸÅŸäŸáŸÖ ÿ£ŸÜÿ™)',
addFamilyMember: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿ±ÿØ ŸÖŸÜ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
additionalNotes: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©',
anyNotes: 'ŸáŸÑ ŸÑÿØŸäŸÉ ÿ£Ÿä ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ£Ÿà ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ÿü',
privacySettings: 'ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸàÿµŸäÿ©',
showOnMap: 'ÿ•ÿ∏Ÿáÿßÿ± ŸÖŸàŸÇÿπŸä ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©',
showPhoneToMembers: 'ÿ•ÿ∏Ÿáÿßÿ± ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅŸä ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°',
showEmailToMembers: 'ÿ•ÿ∏Ÿáÿßÿ± ÿ®ÿ±ŸäÿØŸä ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°',
agreeToJoin: 'ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ŸÑŸÑŸÖŸÑÿ™ŸÇŸâ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ŸàÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿ£ŸáÿØÿßŸÅŸá',
submitRequest: 'ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ® ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®',
requestSent: 'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠!',
thankYou: 'ÿ¥ŸÉÿ±ÿßŸã ŸÑÿßŸÜÿ∂ŸÖÿßŸÖŸÉ ŸÑŸÑŸÖŸÑÿ™ŸÇŸâ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ',
willContact: 'ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ∑ŸÑÿ®ŸÉ ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã',
submitAnother: 'ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ® ÿ¢ÿÆÿ±',
backToHome: 'ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
// ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä
internalBylaws: 'ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©',
editBylaws: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ',
goals: 'ÿßŸÑÿ£ŸáÿØÿßŸÅ',
membership: 'ÿßŸÑÿπÿ∂ŸàŸäÿ©',
adminBoard: 'ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©',
elections: 'ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™',
conferences: 'ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±ÿßÿ™',
financeBylaws: 'ÿßŸÑŸÖÿßŸÑŸäÿ©',
school: 'ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©',
penalties: 'ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™',
// ÿπÿßŸÖ
save: 'ÿ≠ŸÅÿ∏',
cancel: 'ÿ•ŸÑÿ∫ÿßÿ°',
edit: 'ÿ™ÿπÿØŸäŸÑ',
add: 'ÿ•ÿ∂ÿßŸÅÿ©',
confirm: 'ÿ™ÿ£ŸÉŸäÿØ',
yes: 'ŸÜÿπŸÖ',
no: 'ŸÑÿß',
pending: 'ŸÖÿπŸÑŸÇ',
approved: 'ŸÖŸÇÿ®ŸàŸÑ',
rejected: 'ŸÖÿ±ŸÅŸàÿ∂',
accept: 'ŸÇÿ®ŸàŸÑ',
reject: 'ÿ±ŸÅÿ∂',
required: 'ŸÖÿ∑ŸÑŸàÿ®',
optional: 'ÿßÿÆÿ™Ÿäÿßÿ±Ÿä',
// ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ
contactUs: 'ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß',
contactDescription: 'ÿ£ÿ±ÿ≥ŸÑ ŸÑŸÜÿß ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ£Ÿà ÿßŸÇÿ™ÿ±ÿßÿ≠ŸÉ',
yourName: 'ÿßÿ≥ŸÖŸÉ',
subject: 'ÿßŸÑŸÖŸàÿ∂Ÿàÿπ',
message: 'ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©',
sendMessage: 'ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©',
messageSent: 'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠!',
messageThankYou: 'ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ÿ≥ŸÜÿ±ÿØ ÿπŸÑŸäŸÉ ŸÅŸä ÿ£ŸÇÿ±ÿ® ŸàŸÇÿ™.',
sendAnother: 'ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ£ÿÆÿ±Ÿâ',
inbox: 'ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ',
inboxDescription: 'ÿ•ÿØÿßÿ±ÿ© ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≤Ÿàÿßÿ± ŸàÿßŸÑÿ£ÿπÿ∂ÿßÿ°',
totalMessages: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ',
unreadMessages: 'ÿ∫Ÿäÿ± ŸÖŸÇÿ±Ÿàÿ°ÿ©',
readMessages: 'ŸÖŸÇÿ±Ÿàÿ°ÿ©',
messageDetails: 'ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©',
noMessages: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ±ÿ≥ÿßÿ¶ŸÑ',
markAsRead: 'ÿ™ÿ≠ÿØŸäÿØ ŸÉŸÖŸÇÿ±Ÿàÿ°',
suggestion: 'ÿßŸÇÿ™ÿ±ÿßÿ≠',
inquiry: 'ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±',
complaint: 'ÿ¥ŸÉŸàŸâ',
helpRequest: 'ÿ∑ŸÑÿ® ŸÖÿ≥ÿßÿπÿØÿ©',
volunteer: 'ÿ™ÿ∑Ÿàÿπ',
other: 'ÿ£ÿÆÿ±Ÿâ',
// ÿ•ÿ∂ÿßŸÅÿßÿ™ ÿ¨ÿØŸäÿØÿ©
createManageVotes: 'ÿ•ŸÜÿ¥ÿßÿ° Ÿàÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™',
questionDescription: 'ÿßŸÑÿ≥ÿ§ÿßŸÑ / ÿßŸÑŸàÿµŸÅ',
voteTitleLabel: 'ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ÿµŸàŸäÿ™',
maxSelectionsExample: 'ŸÖÿ´ÿßŸÑ: 1 = ÿµŸàÿ™ Ÿàÿßÿ≠ÿØ ŸÅŸÇÿ∑ÿå 3 = ŸäŸÖŸÉŸÜ ÿßÿÆÿ™Ÿäÿßÿ± 3 ŸÖÿ±ÿ¥ÿ≠ŸäŸÜ',
enterFullName: 'ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ÿßŸÑŸÉÿßŸÖŸÑ',
forMapDisplay: 'ŸÑŸÑÿ∏ŸáŸàÿ± ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©',
originCityExample: 'ŸÖÿ´ÿßŸÑ: ÿ∫ÿ≤ÿ©ÿå ŸÜÿßÿ®ŸÑÿ≥ÿå ÿßŸÑŸÇÿØÿ≥',
writeHere: 'ÿßŸÉÿ™ÿ® ŸáŸÜÿß...',
voteTitleExample: 'ŸÖÿ´ÿßŸÑ: ÿßŸÜÿ™ÿÆÿßÿ® ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©',
questionExample: 'ŸÖÿ´ÿßŸÑ: ÿßÿÆÿ™ÿ± 3 ŸÖÿ±ÿ¥ÿ≠ŸäŸÜ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©',
selections: 'ÿßÿÆÿ™Ÿäÿßÿ±ÿßÿ™',
canSelect: 'ŸäŸÖŸÉŸÜŸÉ ÿßÿÆÿ™Ÿäÿßÿ±',
oneOption: 'ÿÆŸäÿßÿ± Ÿàÿßÿ≠ÿØ',
twoOptions: 'ÿÆŸäÿßÿ±ŸäŸÜ',
options: 'ÿÆŸäÿßÿ±ÿßÿ™',
currentResults: 'ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ©',
votersCount: 'ÿπÿØÿØ ÿßŸÑŸÖÿµŸàÿ™ŸäŸÜ',
voteCodes: 'ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™',
votersList: 'ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖÿµŸàÿ™ŸäŸÜ',
voted: 'ÿµŸàŸëÿ™',
notVoted: 'ŸÑŸÖ ŸäÿµŸàŸëÿ™',
copyAllCodes: 'ŸÜÿ≥ÿÆ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ±ŸÖŸàÿ≤',
noVotes: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™',
pendingRequest: 'ÿ∑ŸÑÿ® ŸÖÿπŸÑŸÇ',
approvedFamily: 'ÿπÿßÿ¶ŸÑÿ© ŸÖŸÇÿ®ŸàŸÑÿ©',
pendingRequests: 'ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®',
reviewManageRequests: 'ŸÖÿ±ÿßÿ¨ÿπÿ© Ÿàÿ•ÿØÿßÿ±ÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®',
incomingRequests: 'ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©',
approvedFamilies: 'ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ©',
noPendingRequests: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ©',
noApprovedFamilies: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπÿßÿ¶ŸÑÿßÿ™ ŸÖŸÇÿ®ŸàŸÑÿ© ÿ®ÿπÿØ',
date: 'ÿßŸÑÿ™ÿßÿ±ŸäÿÆ',
time: 'ÿßŸÑŸàŸÇÿ™',
close: 'ÿ•ÿ∫ŸÑÿßŸÇ',
atSameLocation: 'ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑŸÖŸàŸÇÿπ',
noData: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™',
// ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©
familyMember: 'ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
familyMemberName: 'ÿßÿ≥ŸÖ ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
relation: 'ÿµŸÑÿ© ÿßŸÑŸÇÿ±ÿßÿ®ÿ©',
choose: 'ÿßÿÆÿ™ÿ±',
spouse: 'ÿ≤Ÿàÿ¨/ÿ≤Ÿàÿ¨ÿ©',
son: 'ÿßÿ®ŸÜ',
daughter: 'ÿßÿ®ŸÜÿ©',
father: 'ÿ£ÿ®',
mother: 'ÿ£ŸÖ',
brother: 'ÿ£ÿÆ',
sister: 'ÿ£ÿÆÿ™',
fillRequiredFields: 'Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©',
requestSentSuccess: 'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠!',
// ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±
liveStream: 'ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±',
manageLive: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±',
watchLiveEvents: 'ÿ¥ÿßŸáÿØ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ© Ÿàÿ¥ÿßÿ±ŸÉ ÿ®ÿßŸÑÿ™ÿµŸàŸäÿ™',
liveNow: 'ŸÖÿ®ÿßÿ¥ÿ± ÿßŸÑÿ¢ŸÜ',
noLiveStream: 'ŸÑÿß ŸäŸàÿ¨ÿØ ÿ®ÿ´ ŸÖÿ®ÿßÿ¥ÿ± ÿ≠ÿßŸÑŸäÿßŸã',
checkBackLater: 'ÿ™ÿßÿ®ÿπŸÜÿß ŸÑŸÑÿ•ÿπŸÑÿßŸÜ ÿπŸÜ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÇÿßÿØŸÖ',
voteNow: 'ÿµŸàŸëÿ™ ÿßŸÑÿ¢ŸÜ',
voteWhileWatching: 'ÿ¥ÿßÿ±ŸÉ ÿ®ÿµŸàÿ™ŸÉ ÿ£ÿ´ŸÜÿßÿ° ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ®ÿ´',
noActiveVotesNow: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™ ŸÜÿ¥ÿ∑ÿ© ÿ≠ÿßŸÑŸäÿßŸã',
setupLiveStream: 'ÿ•ÿπÿØÿßÿØ Ÿàÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±',
streamSettings: 'ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿ´',
streamTitle: 'ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ÿ´',
linkedVote: 'ÿ±ÿ®ÿ∑ ÿ™ÿµŸàŸäÿ™ ÿ®ÿßŸÑÿ®ÿ´',
startStream: 'ÿ®ÿØÿ° ÿßŸÑÿ®ÿ´',
stopStream: 'ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ®ÿ´',
streamStopped: 'ÿßŸÑÿ®ÿ´ ŸÖÿ™ŸàŸÇŸÅ',
streamActive: 'ÿßŸÑÿ®ÿ´ ŸÜÿ¥ÿ∑',
streamGuide: 'ÿØŸÑŸäŸÑ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±',
preview: 'ŸÖÿπÿßŸäŸÜÿ©',
chooseOption: 'ÿßÿÆÿ™ÿ± ÿÆŸäÿßÿ±ÿßŸã'
},
en: {
// Main menu
publicPages: 'Public Pages',
home: 'Home',
bylaws: 'Bylaws',
voting: 'Voting',
news: 'News',
finance: 'Finance',
map: 'Members Map',
register: 'Registration',
invitations: 'Invitations',
adminPanel: 'Admin Panel',
settings: 'Settings',
manageMembers: 'Manage Members',
pendingRequests: 'Pending Requests',
registrationSheet: 'Registration Sheet',
manageTransactions: 'Manage Transactions',
manageNews: 'Manage News',
manageVoting: 'Manage Voting',
adminLogin: 'Admin Login',
logout: 'Logout',
visitors: 'Visitors',
// Home page
welcome: 'Welcome',
latestNews: 'Latest News',
budget: 'Budget',
members: 'Members',
noNews: 'No news',
// Finance
financialAccounting: 'Financial Accounting',
balance: 'Balance',
income: 'Income',
expenses: 'Expenses',
transactions: 'Transactions',
// Voting
voteTitle: 'Voting',
voteDescription: 'Share your opinion on community decisions',
enterVoteCode: 'Enter vote code',
confirmVote: 'Confirm Vote',
agree: 'Agree',
disagree: 'Disagree',
totalVotes: 'Total Votes',
membersCount: 'Members Count',
noActiveVotes: 'No active votes currently',
open: 'Open',
closed: 'Closed',
// Voting management
createNewVote: 'Create New Vote',
voteType: 'Vote Type',
yesNo: 'Yes / No',
multipleChoice: 'Multiple Choice (candidates / options)',
optionsCandidates: 'Options / Candidates (one per line)',
maxSelectionsAllowed: 'Max selections allowed per member',
createVote: 'Create Vote',
currentVotes: 'Current Votes',
closeVote: 'Close Vote',
reopenVote: 'Reopen',
showCodes: 'Show Codes',
whoVoted: 'Who Voted',
delete: 'Delete',
// Map
membersMap: 'Members Map',
all: 'All',
myLocation: 'My Location',
bestMeetingLocation: 'Best Meeting Location',
onMap: 'On Map',
hidden: 'Hidden',
cities: 'Cities',
statistics: 'Statistics',
// Registration form
registrationForm: 'Registration Form',
joinUs: 'Join the Palestinian Community in Rogaland',
personalInfo: 'Personal Information',
fullName: 'Full Name',
phone: 'Phone Number',
email: 'Email',
residenceInfo: 'Residence Information',
city: 'City / Area',
fullAddress: 'Full Address (optional)',
search: 'Search',
currentLocation: 'Current Location',
palestinianOrigin: 'Palestinian Origin',
originCity: 'Original City in Palestine',
familyMembers: 'Family Members',
familySize: 'Number of family members (including you)',
addFamilyMember: 'Add Family Member',
additionalNotes: 'Additional Notes',
anyNotes: 'Do you have any notes or suggestions?',
privacySettings: 'Privacy Settings',
showOnMap: 'Show my location on the map',
showPhoneToMembers: 'Show my phone to members',
showEmailToMembers: 'Show my email to members',
agreeToJoin: 'I agree to join and commit to its goals',
submitRequest: 'Submit Registration',
requestSent: 'Your request has been sent!',
thankYou: 'Thank you for joining the Palestinian Community',
willContact: 'We will review your request and contact you soon',
submitAnother: 'Submit Another',
backToHome: 'Back to Home',
// Bylaws
internalBylaws: 'Internal Bylaws of the Palestinian Community',
editBylaws: 'Edit Bylaws',
goals: 'Goals',
membership: 'Membership',
adminBoard: 'Administrative Board',
elections: 'Elections',
conferences: 'Conferences',
financeBylaws: 'Finance',
school: 'School',
penalties: 'Penalties',
// General
save: 'Save',
cancel: 'Cancel',
edit: 'Edit',
add: 'Add',
confirm: 'Confirm',
yes: 'Yes',
no: 'No',
pending: 'Pending',
approved: 'Approved',
rejected: 'Rejected',
accept: 'Accept',
reject: 'Reject',
required: 'Required',
optional: 'Optional',
// Messages
contactUs: 'Contact Us',
contactDescription: 'Send us your message or suggestion',
yourName: 'Your Name',
subject: 'Subject',
message: 'Message',
sendMessage: 'Send Message',
messageSent: 'Your message has been sent!',
messageThankYou: 'Thank you for contacting us. We will reply soon.',
sendAnother: 'Send Another Message',
inbox: 'Inbox',
inboxDescription: 'Manage visitor and member messages',
totalMessages: 'Total Messages',
unreadMessages: 'Unread',
readMessages: 'Read',
messageDetails: 'Message Details',
noMessages: 'No messages',
markAsRead: 'Mark as Read',
suggestion: 'Suggestion',
inquiry: 'Inquiry',
complaint: 'Complaint',
helpRequest: 'Help Request',
volunteer: 'Volunteer',
other: 'Other',
// Additional
createManageVotes: 'Create and manage votes',
questionDescription: 'Question / Description',
voteTitleLabel: 'Vote Title',
maxSelectionsExample: 'Example: 1 = one vote only, 3 = can select 3 candidates',
enterFullName: 'Enter your full name',
forMapDisplay: 'To appear on the map',
originCityExample: 'Example: Gaza, Nablus, Jerusalem',
writeHere: 'Write here...',
voteTitleExample: 'Example: Election of board members',
questionExample: 'Example: Choose 3 candidates for the board',
selections: 'selections',
canSelect: 'You can select',
oneOption: 'one option',
twoOptions: 'two options',
options: 'options',
currentResults: 'Current Results',
votersCount: 'Voters Count',
voteCodes: 'Vote Codes',
votersList: 'Voters List',
voted: 'Voted',
notVoted: 'Not voted',
copyAllCodes: 'Copy all codes',
noVotes: 'No votes',
pendingRequest: 'Pending request',
approvedFamily: 'Approved family',
reviewManageRequests: 'Review and manage requests',
incomingRequests: 'Incoming Requests',
approvedFamilies: 'Approved Families',
noPendingRequests: 'No pending requests',
noApprovedFamilies: 'No approved families yet',
date: 'Date',
time: 'Time',
close: 'Close',
atSameLocation: 'at same location',
noData: 'No data',
// Family members
familyMember: 'Family Member',
familyMemberName: 'Family member name',
relation: 'Relationship',
choose: 'Choose',
spouse: 'Spouse',
son: 'Son',
daughter: 'Daughter',
father: 'Father',
mother: 'Mother',
brother: 'Brother',
sister: 'Sister',
fillRequiredFields: 'Please fill required fields',
requestSentSuccess: 'Request sent successfully!',
// Live Stream
liveStream: 'Live Stream',
manageLive: 'Manage Live Stream',
watchLiveEvents: 'Watch events live and participate in voting',
liveNow: 'Live Now',
noLiveStream: 'No live stream currently',
checkBackLater: 'Check back for upcoming broadcasts',
voteNow: 'Vote Now',
voteWhileWatching: 'Cast your vote while watching',
noActiveVotesNow: 'No active votes currently',
setupLiveStream: 'Setup and start live stream',
streamSettings: 'Stream Settings',
streamTitle: 'Stream Title',
linkedVote: 'Link vote to stream',
startStream: 'Start Stream',
stopStream: 'Stop Stream',
streamStopped: 'Stream stopped',
streamActive: 'Stream active',
streamGuide: 'Live Stream Guide',
preview: 'Preview',
chooseOption: 'Choose an option'
},
no: {
// Hovedmeny
publicPages: 'Offentlige Sider',
home: 'Hjem',
bylaws: 'Vedtekter',
voting: 'Avstemning',
news: 'Nyheter',
finance: '√òkonomi',
map: 'Medlemskart',
register: 'Registrering',
invitations: 'Invitasjoner',
adminPanel: 'Administrasjon',
settings: 'Innstillinger',
manageMembers: 'Administrer Medlemmer',
pendingRequests: 'Ventende Foresp√∏rsler',
registrationSheet: 'Registreringsskjema',
manageTransactions: 'Administrer Transaksjoner',
manageNews: 'Administrer Nyheter',
manageVoting: 'Administrer Avstemning',
adminLogin: 'Admin Logg Inn',
logout: 'Logg Ut',
visitors: 'Bes√∏kende',
// Hjemmeside
welcome: 'Velkommen',
latestNews: 'Siste Nyheter',
budget: 'Budsjett',
members: 'Medlemmer',
noNews: 'Ingen nyheter',
// √òkonomi
financialAccounting: 'Finansregnskap',
balance: 'Saldo',
income: 'Inntekter',
expenses: 'Utgifter',
transactions: 'Transaksjoner',
// Avstemning
voteTitle: 'Avstemning',
voteDescription: 'Del din mening om fellesskapsbeslutninger',
enterVoteCode: 'Skriv inn stemmekode',
confirmVote: 'Bekreft Stemme',
agree: 'Enig',
disagree: 'Uenig',
totalVotes: 'Totalt Stemmer',
membersCount: 'Antall Medlemmer',
noActiveVotes: 'Ingen aktive avstemninger for √∏yeblikket',
open: '√Öpen',
closed: 'Lukket',
// Avstemningsadministrasjon
createNewVote: 'Opprett Ny Avstemning',
voteType: 'Avstemningstype',
yesNo: 'Ja / Nei',
multipleChoice: 'Flervalg (kandidater / alternativer)',
optionsCandidates: 'Alternativer / Kandidater (√©n per linje)',
maxSelectionsAllowed: 'Maks valg tillatt per medlem',
createVote: 'Opprett Avstemning',
currentVotes: 'Gjeldende Avstemninger',
closeVote: 'Lukk Avstemning',
reopenVote: 'Gjen√•pne',
showCodes: 'Vis Koder',
whoVoted: 'Hvem Stemte',
delete: 'Slett',
// Kart
membersMap: 'Medlemskart',
all: 'Alle',
myLocation: 'Min Posisjon',
bestMeetingLocation: 'Beste M√∏tested',
onMap: 'P√• Kartet',
hidden: 'Skjult',
cities: 'Byer',
statistics: 'Statistikk',
// Registreringsskjema
registrationForm: 'Registreringsskjema',
joinUs: 'Bli med i den Palestinske Forsamlingen i Rogaland',
personalInfo: 'Personlig Informasjon',
fullName: 'Fullt Navn',
phone: 'Telefonnummer',
email: 'E-post',
residenceInfo: 'Bostedinformasjon',
city: 'By / Omr√•de',
fullAddress: 'Full Adresse (valgfritt)',
search: 'S√∏k',
currentLocation: 'N√•v√¶rende Posisjon',
palestinianOrigin: 'Palestinsk Opprinnelse',
originCity: 'Opprinnelig By i Palestina',
familyMembers: 'Familiemedlemmer',
familySize: 'Antall familiemedlemmer (inkludert deg)',
addFamilyMember: 'Legg til Familiemedlem',
additionalNotes: 'Tilleggsinformasjon',
anyNotes: 'Har du noen notater eller forslag?',
privacySettings: 'Personverninnstillinger',
showOnMap: 'Vis min posisjon p√• kartet',
showPhoneToMembers: 'Vis mitt telefonnummer til medlemmer',
showEmailToMembers: 'Vis min e-post til medlemmer',
agreeToJoin: 'Jeg samtykker i √• bli med og forplikte meg til m√•lene',
submitRequest: 'Send Registrering',
requestSent: 'Din foresp√∏rsel er sendt!',
thankYou: 'Takk for at du ble med i den Palestinske Forsamlingen',
willContact: 'Vi vil gjennomg√• foresp√∏rselen din og kontakte deg snart',
submitAnother: 'Send en Annen',
backToHome: 'Tilbake til Hjem',
// Vedtekter
internalBylaws: 'Interne Vedtekter for det Palestinske Samfunnet',
editBylaws: 'Rediger Vedtekter',
goals: 'M√•l',
membership: 'Medlemskap',
adminBoard: 'Administrasjonsstyre',
elections: 'Valg',
conferences: 'Konferanser',
financeBylaws: '√òkonomi',
school: 'Skole',
penalties: 'Straffer',
// Generelt
save: 'Lagre',
cancel: 'Avbryt',
edit: 'Rediger',
add: 'Legg til',
confirm: 'Bekreft',
yes: 'Ja',
no: 'Nei',
pending: 'Venter',
approved: 'Godkjent',
rejected: 'Avvist',
accept: 'Godta',
reject: 'Avvis',
required: 'P√•krevd',
optional: 'Valgfritt',
// Meldinger
contactUs: 'Kontakt Oss',
contactDescription: 'Send oss din melding eller forslag',
yourName: 'Ditt Navn',
subject: 'Emne',
message: 'Melding',
sendMessage: 'Send Melding',
messageSent: 'Din melding er sendt!',
messageThankYou: 'Takk for at du kontaktet oss. Vi svarer snart.',
sendAnother: 'Send en Annen Melding',
inbox: 'Innboks',
inboxDescription: 'Administrer bes√∏kende og medlemsmeldinger',
totalMessages: 'Totalt Meldinger',
unreadMessages: 'Uleste',
readMessages: 'Leste',
messageDetails: 'Meldingsdetaljer',
noMessages: 'Ingen meldinger',
markAsRead: 'Merk som Lest',
suggestion: 'Forslag',
inquiry: 'Foresp√∏rsel',
complaint: 'Klage',
helpRequest: 'Hjelpeforesp√∏rsel',
volunteer: 'Frivillig',
other: 'Annet',
// Tillegg
createManageVotes: 'Opprett og administrer avstemninger',
questionDescription: 'Sp√∏rsm√•l / Beskrivelse',
voteTitleLabel: 'Avstemningstitel',
maxSelectionsExample: 'Eksempel: 1 = √©n stemme, 3 = kan velge 3 kandidater',
enterFullName: 'Skriv inn ditt fulle navn',
forMapDisplay: 'For √• vises p√• kartet',
originCityExample: 'Eksempel: Gaza, Nablus, Jerusalem',
writeHere: 'Skriv her...',
voteTitleExample: 'Eksempel: Valg av styremedlemmer',
questionExample: 'Eksempel: Velg 3 kandidater til styret',
selections: 'valg',
canSelect: 'Du kan velge',
oneOption: 'ett alternativ',
twoOptions: 'to alternativer',
options: 'alternativer',
currentResults: 'N√•v√¶rende Resultater',
votersCount: 'Antall Stemmere',
voteCodes: 'Stemmekoder',
votersList: 'Stemmeliste',
voted: 'Stemt',
notVoted: 'Ikke stemt',
copyAllCodes: 'Kopier alle koder',
noVotes: 'Ingen avstemninger',
pendingRequest: 'Ventende foresp√∏rsel',
approvedFamily: 'Godkjent familie',
reviewManageRequests: 'Gjennomg√• og administrer foresp√∏rsler',
incomingRequests: 'Innkommende Foresp√∏rsler',
approvedFamilies: 'Godkjente Familier',
noPendingRequests: 'Ingen ventende foresp√∏rsler',
noApprovedFamilies: 'Ingen godkjente familier enn√•',
date: 'Dato',
time: 'Tid',
close: 'Lukk',
atSameLocation: 'p√• samme sted',
noData: 'Ingen data',
// Familiemedlemmer
familyMember: 'Familiemedlem',
familyMemberName: 'Familiemedlemmets navn',
relation: 'Relasjon',
choose: 'Velg',
spouse: 'Ektefelle',
son: 'S√∏nn',
daughter: 'Datter',
father: 'Far',
mother: 'Mor',
brother: 'Bror',
sister: 'S√∏ster',
fillRequiredFields: 'Vennligst fyll ut obligatoriske felt',
requestSentSuccess: 'Foresp√∏rsel sendt!',
// Direktesending
liveStream: 'Direktesending',
manageLive: 'Administrer Direktesending',
watchLiveEvents: 'Se arrangementer live og delta i avstemning',
liveNow: 'Direkte N√•',
noLiveStream: 'Ingen direktesending for √∏yeblikket',
checkBackLater: 'Kom tilbake for kommende sendinger',
voteNow: 'Stem N√•',
voteWhileWatching: 'Avgi din stemme mens du ser p√•',
noActiveVotesNow: 'Ingen aktive avstemninger for √∏yeblikket',
setupLiveStream: 'Sett opp og start direktesending',
streamSettings: 'Sendeinnstillinger',
streamTitle: 'Sendetittel',
linkedVote: 'Koble avstemning til sending',
startStream: 'Start Sending',
stopStream: 'Stopp Sending',
streamStopped: 'Sending stoppet',
streamActive: 'Sending aktiv',
streamGuide: 'Direktesendingsguide',
preview: 'Forh√•ndsvisning',
chooseOption: 'Velg et alternativ'
}
};

function t(key) {
return translations[currentLang][key] || translations['ar'][key] || key;
}

window.setLanguage = function(lang) {
currentLang = lang;
localStorage.setItem('appLang', lang);

// Update direction
var html = document.documentElement;
if(lang === 'ar') {
html.setAttribute('dir', 'rtl');
html.setAttribute('lang', 'ar');
} else {
html.setAttribute('dir', 'ltr');
html.setAttribute('lang', lang);
}

// Update language buttons
document.querySelectorAll('.lang-btn').forEach(function(btn) {
btn.classList.remove('active');
if(btn.getAttribute('data-lang') === lang) {
btn.classList.add('active');
}
});

// Translate all elements with data-i18n
document.querySelectorAll('[data-i18n]').forEach(function(el) {
var key = el.getAttribute('data-i18n');
if(translations[lang][key]) {
el.textContent = translations[lang][key];
}
});

// Translate placeholders
document.querySelectorAll('[data-placeholder]').forEach(function(el) {
var key = el.getAttribute('data-placeholder');
if(translations[lang][key]) {
el.placeholder = translations[lang][key];
}
});

// Translate select options
document.querySelectorAll('select option[data-i18n]').forEach(function(el) {
var key = el.getAttribute('data-i18n');
if(translations[lang][key]) {
el.textContent = translations[lang][key];
}
});

// Update page titles and headers
updatePageTitles();

// Refresh dynamic content
if(typeof loadVoting === 'function') loadVoting();
if(typeof loadAdminVoting === 'function') loadAdminVoting();
if(typeof loadMessages === 'function') loadMessages();
}

function updatePageTitles() {
// Update organization name in header
var orgName = appData.orgName ? appData.orgName.ar : 'ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ';
var orgNameEn = appData.orgName ? appData.orgName.en : 'Det palestinske samfunn i Rogaland';

if(currentLang === 'ar') {
document.querySelector('.org-name').textContent = orgName;
document.querySelector('.org-sub').textContent = orgNameEn;
} else if(currentLang === 'en') {
document.querySelector('.org-name').textContent = orgNameEn;
document.querySelector('.org-sub').textContent = orgName;
} else {
document.querySelector('.org-name').textContent = orgNameEn;
document.querySelector('.org-sub').textContent = orgName;
}

// Update page headers
var homeHeader = document.querySelector('#pageHome .header h1');
if(homeHeader) {
if(currentLang === 'ar') homeHeader.innerHTML = 'üáµüá∏ ' + orgName;
else homeHeader.innerHTML = 'üáµüá∏ ' + orgNameEn;
}

var homeP = document.querySelector('#pageHome .header p');
if(homeP) homeP.textContent = t('welcome');

// Finance page
var financeH1 = document.querySelector('#pageFinance .header h1');
if(financeH1) financeH1.textContent = 'üí∞ ' + t('financialAccounting');

// Voting page
var votingH1 = document.querySelector('#pageVoting .header h1');
if(votingH1) votingH1.textContent = 'üó≥Ô∏è ' + t('voteTitle');
var votingP = document.querySelector('#pageVoting .header p');
if(votingP) votingP.textContent = t('voteDescription');

// Map page
var mapH1 = document.querySelector('#pageMap .header h1');
if(mapH1) mapH1.textContent = 'üó∫Ô∏è ' + t('membersMap');

// Bylaws page
var bylawsH1 = document.querySelector('#pageBylaws .header h1');
if(bylawsH1) bylawsH1.textContent = 'üìú ' + t('bylaws');
var bylawsP = document.querySelector('#pageBylaws .header p');
if(bylawsP) bylawsP.textContent = t('internalBylaws');

// News page
var newsH1 = document.querySelector('#pageNews .header h1');
if(newsH1) newsH1.textContent = 'üì∞ ' + t('news');

// Register page
var regH1 = document.querySelector('#pageRegister .header h1');
if(regH1) regH1.textContent = 'üìù ' + t('registrationForm');
var regP = document.querySelector('#pageRegister .header p');
if(regP) regP.textContent = t('joinUs');

// Update login button
var loginBtn = document.getElementById('loginBtn');
if(loginBtn) {
var span = loginBtn.querySelector('span[data-i18n]');
if(span) span.textContent = isAdmin ? t('logout') : t('adminLogin');
}
}

function initLanguage() {
var savedLang = localStorage.getItem('appLang') || 'ar';
setLanguage(savedLang);
}

// ========== Home Page Functions - Early Definition ==========
window.toggleEditSection = function(id){
    var el = document.getElementById(id);
    if(el){
        el.style.display = el.style.display === 'none' ? 'block' : 'none';
    }
};

window.addEvent = function(){
    if(!appData.homeSettings) appData.homeSettings = {};
    if(!appData.homeSettings.events) appData.homeSettings.events = [];
    
    appData.homeSettings.events.push({
        date: new Date().toISOString().split('T')[0],
        title: 'ŸÅÿπÿßŸÑŸäÿ© ÿ¨ÿØŸäÿØÿ©',
        description: ''
    });
    
    localStorage.setItem('appData', JSON.stringify(appData));
    if(typeof renderEventsList === 'function') renderEventsList();
    if(typeof renderHomePage === 'function') renderHomePage();
};

window.updateEvent = function(index, field, value){
    if(appData.homeSettings && appData.homeSettings.events && appData.homeSettings.events[index]){
        appData.homeSettings.events[index][field] = value;
        localStorage.setItem('appData', JSON.stringify(appData));
        if(typeof renderHomePage === 'function') renderHomePage();
    }
};

window.removeEvent = function(index){
    if(appData.homeSettings && appData.homeSettings.events){
        appData.homeSettings.events.splice(index, 1);
        localStorage.setItem('appData', JSON.stringify(appData));
        if(typeof renderEventsList === 'function') renderEventsList();
        if(typeof renderHomePage === 'function') renderHomePage();
    }
};

var appData=JSON.parse(localStorage.getItem("appData"))||{news:[],tx:[],members:[],pending:[],approved:[],logo:null,visibility:{news:"all",finance:"all",map:"all",invitation:"all"},adminPass:"1234",votes:[],messages:[],homeSettings:{}};
if(!appData.visibility)appData.visibility={news:"all",finance:"all",map:"all",invitation:"all",bylaws:"all"};
if(!appData.pending)appData.pending=[];
if(!appData.approved)appData.approved=[];
if(!appData.sheet)appData.sheet=[];
if(!appData.orgName)appData.orgName={ar:"ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ",en:"Det palestinske samfunn i Rogaland"};
if(!appData.sheetArchive)appData.sheetArchive=[];
if(!appData.homeSettings){
  appData.homeSettings={
    showHero:true,
    showStats:true,
    showQuickActions:true,
    showActiveVote:true,
    showNews:true,
    showAbout:true,
    showEvents:false,
    showSocial:false,
    heroTitle:"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ ŸÅŸä ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©",
    heroSubtitle:"ŸÜÿ¨ŸÖÿπ ÿ¥ŸÖŸÑŸÜÿß ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ - ÿßŸÑŸÜÿ±ŸàŸäÿ¨",
    heroBtn1:"üìù ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸäŸÜÿß",
    heroBtn2:"‚úâÔ∏è ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß",
    newsCount:3,
    aboutText:"ŸÜÿ≠ŸÜ ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖŸÜ ÿ£ÿ®ŸÜÿßÿ° ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ - ÿßŸÑŸÜÿ±ŸàŸäÿ¨ÿå ŸÜÿ≥ÿπŸâ ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ŸáŸàŸäÿ™ŸÜÿß Ÿàÿ™ÿ±ÿßÿ´ŸÜÿß ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä Ÿàÿ™ŸÇŸàŸäÿ© ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑ ÿ®ŸäŸÜ ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ©.",
    vision:"ÿ¨ÿßŸÑŸäÿ© ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÖÿ™ŸÖÿßÿ≥ŸÉÿ© ŸàŸÖÿ§ÿ´ÿ±ÿ©",
    mission:"ÿÆÿØŸÖÿ© ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸàÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸáŸàŸäÿ©",
    events:[],
    socialFacebook:"",
    socialInstagram:"",
    socialWhatsapp:"",
    socialEmail:""
  };
}
if(!appData.bylaws)appData.bylaws={chapters:[
{id:1,title:"ÿßŸÑÿ£ŸáÿØÿßŸÅ",icon:"üéØ",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ´ÿßŸÜŸä - ÿßŸÑŸÖÿßÿØÿ© 9",color:"#009639",sections:[
{title:"ÿ™ÿ±ÿ≥ŸäÿÆ ÿßŸÑŸáŸàŸäÿ© ÿßŸÑŸàÿ∑ŸÜŸäÿ©",icon:"üè≥Ô∏è",items:["ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑŸÇŸäŸÖ ŸàÿßŸÑŸÖÿ®ÿßÿØÿ¶ ÿßŸÑŸàÿ∑ŸÜŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©","ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸáŸàŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿßŸÑŸÖŸáÿ¨ÿ±"]},
{title:"ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©",icon:"ü§ù",items:["ÿ™ŸÇŸàŸäÿ© ÿ£Ÿàÿßÿµÿ± ÿßŸÑŸÖÿ≠ÿ®ÿ© ŸàÿßŸÑÿ£ÿÆŸàÿ© ŸàÿßŸÑÿ™ÿ∂ÿßŸÖŸÜ","ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ¥ÿπŸàÿ± ÿ®ÿßŸÑÿßŸÜÿ™ŸÖÿßÿ° ÿ®ŸäŸÜ ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ©"]},
{title:"ÿØÿπŸÖ ÿßŸÑŸÇÿ∂Ÿäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©",icon:"üáµüá∏",items:["ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÉÿßŸÖŸÑ ŸÑŸÜÿ∂ÿßŸÑ ÿßŸÑÿ¥ÿπÿ® ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä","ÿ®ŸÉÿßŸÅÿ© ÿ£ÿ¥ŸÉÿßŸÑŸá ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿ© ŸàŸÅŸÇ ÿßŸÑŸÇŸàÿßŸÜŸäŸÜ ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ©"]},
{title:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿä",icon:"üåç",items:["ÿ®ŸÜÿßÿ° ÿ¨ÿ≥Ÿàÿ± ÿßŸÑÿµÿØÿßŸÇÿ© ŸàÿßŸÑÿ™ÿπÿßŸàŸÜ","ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ™ŸÅÿßŸáŸÖ ÿßŸÑŸÖÿ™ÿ®ÿßÿØŸÑ ŸÖÿπ ÿßŸÑŸÖÿ§ÿ≥ÿ≥ÿßÿ™ ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ©"]}
]},
{id:2,title:"ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"üë•",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ´ÿßŸÑÿ´ - ÿßŸÑŸÖŸàÿßÿØ 10-16",color:"#CE1126",sections:[
{title:"ŸÅÿ¶ÿßÿ™ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"üìã",items:["ÿßŸÑÿπÿ∂Ÿà ÿßŸÑÿπÿßŸÖŸÑ: ÿßŸÑŸÖÿ≥ÿØÿØ ŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™Ÿá","ÿßŸÑÿπÿ∂Ÿà ÿßŸÑŸÖÿ±ÿßŸÇÿ®: ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ≥ÿØÿØ ÿ£Ÿà ŸÖŸÜ ÿπŸÖÿ±Ÿá 14-18","ÿπÿ∂Ÿà ÿßŸÑÿ¥ÿ±ŸÅ: ŸÖŸÜ ŸÇÿØŸÖ ÿÆÿØŸÖÿßÿ™ ŸÉÿ®Ÿäÿ±ÿ© ŸÑŸÑÿ¨ÿßŸÑŸäÿ©"]},
{title:"ÿ≠ŸÇŸàŸÇ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°",icon:"‚úÖ",items:["ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ŸàÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©","ÿßŸÑÿ™ÿπÿ®Ÿäÿ± ÿπŸÜ ÿßŸÑÿ±ÿ£Ÿä ÿØŸäŸÖŸÇÿ±ÿßÿ∑ŸäÿßŸã","ÿ≠ŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸàÿßŸÑÿ™ÿ±ÿ¥ÿ≠ (ŸÑŸÑÿπÿ∂Ÿà ÿßŸÑÿπÿßŸÖŸÑ)"]},
{title:"ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"üìù",items:["ÿ™ÿπÿ®ÿ¶ÿ© ŸÜŸÖŸàÿ∞ÿ¨ ÿ∑ŸÑÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ","ÿØŸÅÿπ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ≥ŸÜŸàŸä","ÿ•ŸÉŸÖÿßŸÑ 18 ÿπÿßŸÖÿßŸã ŸÑŸÑÿ™ÿ±ÿ¥ÿ≠ ÿ£Ÿà ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®"]},
{title:"ÿ≤ŸàÿßŸÑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"‚ùå",items:["ÿßŸÑÿ•ÿÆŸÑÿßŸÑ ÿ®ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©","ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿÆÿßÿ±ÿ¨ ŸÜÿ∑ÿßŸÇ ÿßŸÑÿ¨ÿßŸÑŸäÿ©","ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ® ÿßŸÜÿ≥ÿ≠ÿßÿ®","ÿßŸÑŸàŸÅÿßÿ©"]}
]},
{id:3,title:"ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©",icon:"‚öôÔ∏è",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ≥ÿßÿØÿ≥ - ÿßŸÑŸÖŸàÿßÿØ 36-47",color:"#F39C12",sections:[
{title:"ÿ™ŸÉŸàŸäŸÜ ÿßŸÑŸáŸäÿ¶ÿ©",icon:"üëî",items:["1-50 ÿπÿ∂Ÿà ‚Üê 5 ÿ£ÿπÿ∂ÿßÿ° ŸáŸäÿ¶ÿ©","51-150 ÿπÿ∂Ÿà ‚Üê 7 ÿ£ÿπÿ∂ÿßÿ°","151-250 ÿπÿ∂Ÿà ‚Üê 9 ÿ£ÿπÿ∂ÿßÿ°","ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 250 ‚Üê 11 ÿπÿ∂Ÿà"]},
{title:"ÿßŸÑŸÖŸÜÿßÿµÿ®",icon:"‚≠ê",items:["ÿßŸÑÿ±ÿ¶Ÿäÿ≥: Ÿäÿ±ÿ£ÿ≥ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ŸàŸäŸÖÿ´ŸÑ ÿßŸÑÿ¨ÿßŸÑŸäÿ©","ŸÜÿßÿ¶ÿ® ÿßŸÑÿ±ÿ¶Ÿäÿ≥: ŸäŸÜŸàÿ® ÿπŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥","ÿ£ŸÖŸäŸÜ ÿßŸÑÿ≥ÿ±: ÿßŸÑŸÖÿ≠ÿßÿ∂ÿ± ŸàÿßŸÑŸàÿ´ÿßÿ¶ŸÇ","ÿ£ŸÖŸäŸÜ ÿßŸÑÿµŸÜÿØŸàŸÇ: ÿßŸÑÿ•ÿ¥ÿ±ÿßŸÅ ÿßŸÑŸÖÿßŸÑŸä","ŸÖÿ≥ÿ§ŸàŸÑ ÿßŸÑÿπŸÑÿßŸÇÿßÿ™: ÿßŸÑÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿ±ÿ≥ŸÖŸä","ŸÖÿ≥ÿ§ŸàŸÑ ÿßŸÑÿ¥ÿ§ŸàŸÜ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©","ŸÖÿ≥ÿ§ŸàŸÑ ÿßŸÑÿ¥ÿ§ŸàŸÜ ÿßŸÑÿ´ŸÇÿßŸÅŸäÿ©"]},
{title:"ÿ≥ŸÇŸàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"‚ö†Ô∏è",items:["ÿßŸÑÿ™ÿ∫Ÿäÿ® 3 ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿ®ÿØŸàŸÜ ÿπÿ∞ÿ±","ÿßŸÑÿ≥ŸÅÿ± ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 3 ÿ£ÿ¥Ÿáÿ±","ÿßŸÑÿ•ÿ≥ÿßÿ°ÿ© ŸÑÿ≥ŸÖÿπÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ©"]}
]},
{id:4,title:"ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™",icon:"üó≥Ô∏è",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ±ÿßÿ®ÿπ - ÿßŸÑŸÖŸàÿßÿØ 17-20",color:"#3498DB",sections:[
{title:"ÿ•ÿ¨ÿ±ÿßÿ° ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™",icon:"üìä",items:["ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿπ ÿßŸÑÿ≥ÿ±Ÿä","ŸÅÿ±ÿ≤ ÿßŸÑÿ£ÿµŸàÿßÿ™ ÿπŸÑŸÜÿßŸã ÿ£ŸÖÿßŸÖ ÿßŸÑÿ¨ŸÖŸäÿπ","ÿßŸÑŸÅÿßÿ¶ÿ≤ŸàŸÜ ÿ®ÿ£ÿπŸÑŸâ ÿßŸÑÿ£ÿµŸàÿßÿ™"]},
{title:"ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿ™ÿ±ÿ¥ÿ≠",icon:"üìã",items:["ŸÖÿ±Ÿàÿ± 6 ÿ¥ŸáŸàÿ± ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ","ÿ•ÿ™ŸÖÿßŸÖ 18 ÿπÿßŸÖÿßŸã ŸäŸàŸÖ ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®","ÿ™ÿ≥ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™","ÿ•ŸÇÿßŸÖÿ© ŸÇÿßŸÜŸàŸÜŸäÿ© ŸÑŸÑÿ™ÿ±ÿ¥ÿ≠"]}
]},
{id:5,title:"ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±ÿßÿ™",icon:"üèõÔ∏è",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿÆÿßŸÖÿ≥ - ÿßŸÑŸÖŸàÿßÿØ 21-35",color:"#9B59B6",sections:[
{title:"ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿπÿßŸÖ",icon:"üé§",items:["ŸäÿπŸÇÿØ ÿ≥ŸÜŸàŸäÿßŸã ÿ®ÿØÿπŸàÿ© ŸÖŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©","ÿßŸÑÿ•ÿπŸÑÿßŸÜ ŸÇÿ®ŸÑ ÿ£ÿ≥ÿ®ŸàÿπŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ","ÿßŸÑŸÜÿµÿßÿ®: ÿ´ŸÑÿ´Ÿä ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ"]},
{title:"ÿßŸÑÿ¨ŸÖÿπŸäÿ© ÿßŸÑÿπŸÖŸàŸÖŸäÿ©",icon:"üë•",items:["ÿ™ŸÜÿπŸÇÿØ ŸÖÿ±ÿ© ŸÉŸÑ 6 ÿ¥ŸáŸàÿ± ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ","ÿßŸÑŸÜÿµÿßÿ®: ÿßŸÑŸÜÿµŸÅ ÿ≤ÿßÿ¶ÿØ Ÿàÿßÿ≠ÿØ","ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿπŸÑŸäÿß ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ÿπŸÜÿØ ÿßŸÜÿπŸÇÿßÿØŸáÿß"]},
{title:"ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™",icon:"‚úîÔ∏è",items:["ÿßŸÑÿ£ÿ∫ŸÑÿ®Ÿäÿ© ÿßŸÑŸÜÿ≥ÿ®Ÿäÿ© ŸÑŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿπÿßÿØŸä","ÿ´ŸÑÿ´Ÿä ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ŸÑÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä"]}
]},
{id:6,title:"ÿßŸÑŸÖÿßŸÑŸäÿ©",icon:"üí∞",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ≥ÿßÿ®ÿπ",color:"#E74C3C",sections:[
{title:"ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©",icon:"üíµ",items:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ® ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ≥ŸÜŸàŸä","ÿßŸÑŸÖÿ≥ÿßÿπÿØÿßÿ™ ŸàÿßŸÑÿ™ÿ®ÿ±ÿπÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ¥ÿ±Ÿàÿ∑ÿ©","ÿØÿÆŸÑ ÿßŸÑŸÜÿ¥ÿßÿ∑ÿßÿ™ ŸàÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™"]},
{title:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ŸÖŸàÿßŸÑ",icon:"üè¶",items:["ÿ™ŸàÿØÿπ ŸÅŸä ÿßŸÑÿ®ŸÜŸÉ ÿ®ÿßÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÑŸäÿ©","ÿßŸÑÿ±ÿ¶Ÿäÿ≥ Ÿàÿ£ŸÖŸäŸÜ ÿßŸÑÿµŸÜÿØŸàŸÇ ŸÖÿ≥ÿ§ŸàŸÑÿßŸÜ","ŸÜÿ∏ÿßŸÖ ŸÖÿ≠ÿßÿ≥ÿ®Ÿä ŸàŸÅŸÇ ÿßŸÑŸÇŸàÿßŸÜŸäŸÜ ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ©"]},
{title:"ÿßŸÑÿ±ŸÇÿßÿ®ÿ©",icon:"üîç",items:["ŸÖÿØŸÇŸÇ ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÇÿßŸÜŸàŸÜŸä ŸÖÿπÿ™ŸÖÿØ","ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖÿßŸÑŸäÿ© ÿØŸàÿ±Ÿäÿ©","ÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ© ŸàÿßŸÑŸÖÿµÿØÿßŸÇŸäÿ©"]}
]},
{id:7,title:"ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©",icon:"üè´",subtitle:"ÿßŸÑŸÖÿØÿ±ÿ≥ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",color:"#1ABC9C",sections:[
{title:"ÿßŸÑÿ£ŸáÿØÿßŸÅ",icon:"üìö",items:["ÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©","ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿßÿ´ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä","ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑŸáŸàŸäÿ© ÿßŸÑŸàÿ∑ŸÜŸäÿ©"]},
{title:"ÿßŸÑÿ•ÿØÿßÿ±ÿ©",icon:"üë®‚Äçüíº",items:["ŸÖÿ¨ŸÑÿ≥ ÿ•ÿØÿßÿ±ÿ© ŸÖŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©","ŸÖÿØŸäÿ± ŸÖÿπŸäŸÜ ŸÖŸÜ ÿßŸÑŸáŸäÿ¶ÿ©","ŸÖŸÖÿ´ŸÑ ÿπŸÜ ÿ£ŸàŸÑŸäÿßÿ° ÿßŸÑÿ£ŸÖŸàÿ±"]},
{title:"ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©",icon:"üé≠",items:["ŸÅÿ±ŸÇÿ© ÿØÿ®ŸÉÿ© ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©","ŸÅÿπÿßŸÑŸäÿßÿ™ ÿ™ÿ±ÿßÿ´Ÿäÿ© Ÿàÿ´ŸÇÿßŸÅŸäÿ©","ÿßŸÑÿ™ŸàÿπŸäÿ© ÿßŸÑŸàÿ∑ŸÜŸäÿ©"]}
]},
{id:8,title:"ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™",icon:"‚öñÔ∏è",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ´ÿßŸÖŸÜ",color:"#F39C12",sections:[
{title:"ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™",icon:"üìú",items:["ÿßŸÑÿ™ŸÜÿ®ŸäŸá","ÿßŸÑŸÑŸàŸÖ","ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±","ÿ™ÿ¨ŸÖŸäÿØ ÿßŸÑÿπÿ∂ŸàŸäÿ©","ÿßŸÑŸÅÿµŸÑ ŸÖŸÜ ÿßŸÑÿπÿ∂ŸàŸäÿ©"]},
{title:"ÿßŸÑÿ∂Ÿàÿßÿ®ÿ∑",icon:"‚ö†Ô∏è",items:["ÿßŸÑÿ®ÿ≠ÿ´ ŸàÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿÆŸÑŸÑ","ÿØÿπŸàÿ© ÿßŸÑÿπÿ∂Ÿà ŸÑŸÑŸÖÿ±ÿßÿ¨ÿπÿ©","ÿßŸÑŸÜŸÇÿßÿ¥ ŸÅŸä ÿßÿ¨ÿ™ŸÖÿßÿπ ŸÖÿ∫ŸÑŸÇ","ÿ•ÿ®ŸÑÿßÿ∫ ÿßŸÑÿπÿ∂Ÿà ÿ®ÿßŸÑŸÇÿ±ÿßÿ± ÿÆÿ∑ŸäÿßŸã"]}
]}
]};
function save(){
appData.adminPass=adminPass;
localStorage.setItem("appData",JSON.stringify(appData));
// Firebase save
if(window._fbREF && window._fbSetDoc){
var c=JSON.parse(JSON.stringify(appData));
for(var k in c)if(typeof c[k]==='string'&&c[k].length>900000)delete c[k];
window._fbSetDoc(window._fbREF,c).then(function(){console.log("‚úÖ Firebase ŸÖÿ≠ŸÅŸàÿ∏");}).catch(function(e){console.error("‚ùå Firebase:",e);});
}
}
function loadFromCloud(callback){
if(window._fbREF && window._fbGetDoc){
window._fbGetDoc(window._fbREF).then(function(snap){
if(snap.exists()){
var cloud=snap.data();
var logo=appData.logo;
Object.keys(cloud).forEach(function(k){appData[k]=cloud[k];});
if(logo&&!appData.logo)appData.logo=logo;
if(appData.adminPass)adminPass=appData.adminPass;
localStorage.setItem("appData",JSON.stringify(appData));
}
if(callback)callback();
}).catch(function(e){console.log("Firebase load error:",e);if(callback)callback();});
}else{if(callback)callback();}
}
function toast(m,e){var t=document.getElementById("toast");t.textContent=m;t.className="toast show"+(e?" error":"");setTimeout(function(){t.className="toast";},3000);}
function fmtDate(d){var dt=new Date(d),ms=["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"];return dt.getDate()+" "+ms[dt.getMonth()]+" "+dt.getFullYear();}

// ========== Home Page Customization Functions ==========
window.toggleEditSection = function(id){
    var el = document.getElementById(id);
    if(el){
        el.style.display = el.style.display === 'none' ? 'block' : 'none';
    }
};

window.saveHomeSettings = function(){
    var hs = appData.homeSettings;
    
    // Get toggle values
    hs.showHero = document.getElementById('homeShowHero')?.checked ?? true;
    hs.showStats = document.getElementById('homeShowStats')?.checked ?? true;
    hs.showQuickActions = document.getElementById('homeShowQuickActions')?.checked ?? true;
    hs.showActiveVote = document.getElementById('homeShowActiveVote')?.checked ?? true;
    hs.showNews = document.getElementById('homeShowNews')?.checked ?? true;
    hs.showAbout = document.getElementById('homeShowAbout')?.checked ?? true;
    hs.showEvents = document.getElementById('homeShowEvents')?.checked ?? false;
    hs.showSocial = document.getElementById('homeShowSocial')?.checked ?? false;
    
    // Get content values
    hs.heroTitle = document.getElementById('heroTitle')?.value || hs.heroTitle;
    hs.heroSubtitle = document.getElementById('heroSubtitle')?.value || hs.heroSubtitle;
    hs.heroBtn1 = document.getElementById('heroBtn1Text')?.value || hs.heroBtn1;
    hs.heroBtn2 = document.getElementById('heroBtn2Text')?.value || hs.heroBtn2;
    hs.newsCount = parseInt(document.getElementById('homeNewsCount')?.value) || 3;
    hs.aboutText = document.getElementById('homeAboutText')?.value || hs.aboutText;
    hs.vision = document.getElementById('homeVision')?.value || hs.vision;
    hs.mission = document.getElementById('homeMission')?.value || hs.mission;
    
    // Social links
    hs.socialFacebook = document.getElementById('socialFacebook')?.value || '';
    hs.socialInstagram = document.getElementById('socialInstagram')?.value || '';
    hs.socialWhatsapp = document.getElementById('socialWhatsapp')?.value || '';
    hs.socialEmail = document.getElementById('socialEmail')?.value || '';
    
    // Quick Access Buttons
    if(!hs.quickBtns) hs.quickBtns = {};
    var qaIds = ['qaRegister','qaVoting','qaLive','qaMap','qaNews','qaFinance','qaBylaws','qaInvitation','qaConfInvite','qaContact'];
    var qaKeys = ['register','voting','live','map','news','finance','bylaws','invitation','confInvite','contact'];
    for(var i=0; i<qaIds.length; i++){
        var el = document.getElementById(qaIds[i]);
        if(el) hs.quickBtns[qaKeys[i]] = el.checked;
    }
    
    save();
    renderHomePage();
    toast('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ‚úÖ');
};

window.loadHomeSettings = function(){
    var hs = appData.homeSettings || {};
    
    // Set toggle values
    if(document.getElementById('homeShowHero')) document.getElementById('homeShowHero').checked = hs.showHero !== false;
    if(document.getElementById('homeShowStats')) document.getElementById('homeShowStats').checked = hs.showStats !== false;
    if(document.getElementById('homeShowQuickActions')) document.getElementById('homeShowQuickActions').checked = hs.showQuickActions !== false;
    if(document.getElementById('homeShowActiveVote')) document.getElementById('homeShowActiveVote').checked = hs.showActiveVote !== false;
    if(document.getElementById('homeShowNews')) document.getElementById('homeShowNews').checked = hs.showNews !== false;
    if(document.getElementById('homeShowAbout')) document.getElementById('homeShowAbout').checked = hs.showAbout !== false;
    if(document.getElementById('homeShowEvents')) document.getElementById('homeShowEvents').checked = hs.showEvents === true;
    if(document.getElementById('homeShowSocial')) document.getElementById('homeShowSocial').checked = hs.showSocial === true;
    
    // Set content values
    if(document.getElementById('heroTitle')) document.getElementById('heroTitle').value = hs.heroTitle || '';
    if(document.getElementById('heroSubtitle')) document.getElementById('heroSubtitle').value = hs.heroSubtitle || '';
    if(document.getElementById('heroBtn1Text')) document.getElementById('heroBtn1Text').value = hs.heroBtn1 || '';
    if(document.getElementById('heroBtn2Text')) document.getElementById('heroBtn2Text').value = hs.heroBtn2 || '';
    if(document.getElementById('homeNewsCount')) document.getElementById('homeNewsCount').value = hs.newsCount || 3;
    if(document.getElementById('homeAboutText')) document.getElementById('homeAboutText').value = hs.aboutText || '';
    if(document.getElementById('homeVision')) document.getElementById('homeVision').value = hs.vision || '';
    if(document.getElementById('homeMission')) document.getElementById('homeMission').value = hs.mission || '';
    
    // Social links
    if(document.getElementById('socialFacebook')) document.getElementById('socialFacebook').value = hs.socialFacebook || '';
    if(document.getElementById('socialInstagram')) document.getElementById('socialInstagram').value = hs.socialInstagram || '';
    if(document.getElementById('socialWhatsapp')) document.getElementById('socialWhatsapp').value = hs.socialWhatsapp || '';
    if(document.getElementById('socialEmail')) document.getElementById('socialEmail').value = hs.socialEmail || '';
    
    // Quick Access Buttons
    var qb = hs.quickBtns || {};
    if(document.getElementById('qaRegister')) document.getElementById('qaRegister').checked = qb.register !== false;
    if(document.getElementById('qaVoting')) document.getElementById('qaVoting').checked = qb.voting !== false;
    if(document.getElementById('qaLive')) document.getElementById('qaLive').checked = qb.live !== false;
    if(document.getElementById('qaMap')) document.getElementById('qaMap').checked = qb.map !== false;
    if(document.getElementById('qaNews')) document.getElementById('qaNews').checked = qb.news === true;
    if(document.getElementById('qaFinance')) document.getElementById('qaFinance').checked = qb.finance === true;
    if(document.getElementById('qaBylaws')) document.getElementById('qaBylaws').checked = qb.bylaws === true;
    if(document.getElementById('qaInvitation')) document.getElementById('qaInvitation').checked = qb.invitation === true;
    if(document.getElementById('qaConfInvite')) document.getElementById('qaConfInvite').checked = qb.confInvite === true;
    if(document.getElementById('qaContact')) document.getElementById('qaContact').checked = qb.contact === true;
    
    renderEventsList();
};

window.renderHomePage = function(){
    var hs = appData.homeSettings || {};
    
    // Show/Hide sections
    var heroSection = document.getElementById('heroSection');
    var statsSection = document.getElementById('statsSection');
    var quickActionsSection = document.getElementById('quickActionsSection');
    var activeVoteSection = document.getElementById('activeVoteSection');
    var newsSection = document.getElementById('newsSection');
    var aboutSection = document.getElementById('aboutSection');
    var eventsSection = document.getElementById('eventsSection');
    var socialSection = document.getElementById('socialSection');
    
    if(heroSection) heroSection.style.display = hs.showHero !== false ? 'block' : 'none';
    if(statsSection) statsSection.style.display = hs.showStats !== false ? 'block' : 'none';
    if(quickActionsSection) quickActionsSection.style.display = hs.showQuickActions !== false ? 'block' : 'none';
    if(newsSection) newsSection.style.display = hs.showNews !== false ? 'block' : 'none';
    if(aboutSection) aboutSection.style.display = hs.showAbout !== false ? 'block' : 'none';
    if(eventsSection) eventsSection.style.display = hs.showEvents === true ? 'block' : 'none';
    if(socialSection) socialSection.style.display = hs.showSocial === true ? 'block' : 'none';
    
    // Update Hero content
    if(document.getElementById('heroTitleDisplay')) document.getElementById('heroTitleDisplay').textContent = hs.heroTitle || 'ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ ŸÅŸä ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©';
    if(document.getElementById('heroSubtitleDisplay')) document.getElementById('heroSubtitleDisplay').textContent = hs.heroSubtitle || 'ŸÜÿ¨ŸÖÿπ ÿ¥ŸÖŸÑŸÜÿß ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ - ÿßŸÑŸÜÿ±ŸàŸäÿ¨';
    if(document.getElementById('heroBtn1Display')) document.getElementById('heroBtn1Display').textContent = hs.heroBtn1 || 'üìù ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸäŸÜÿß';
    if(document.getElementById('heroBtn2Display')) document.getElementById('heroBtn2Display').textContent = hs.heroBtn2 || '‚úâÔ∏è ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß';
    
    // Update About content
    if(document.getElementById('aboutTextDisplay')) document.getElementById('aboutTextDisplay').textContent = hs.aboutText || '';
    if(document.getElementById('visionDisplay')) document.getElementById('visionDisplay').textContent = hs.vision || '';
    if(document.getElementById('missionDisplay')) document.getElementById('missionDisplay').textContent = hs.mission || '';
    
    // Update stats
    updateHomeStats();
    
    // Check for active votes
    checkActiveVotes();
    
    // Render news
    renderHomeNews();
    
    // Render quick access buttons
    renderQuickAccessBtns();
    
    // Render events
    renderHomeEvents();
    
    // Render social links
    renderSocialLinks();
};

window.renderQuickAccessBtns = function(){
    var grid = document.getElementById('quickActionsGrid');
    if(!grid) return;
    var hs = appData.homeSettings || {};
    var qb = hs.quickBtns || {};
    var allBtns = [
        {id:'register', icon:'üìù', label:'ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ®', def:true},
        {id:'voting', icon:'üó≥Ô∏è', label:'ÿßŸÑÿ™ÿµŸàŸäÿ™', def:true},
        {id:'live', icon:'üì∫', label:'ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±', def:true},
        {id:'map', icon:'üó∫Ô∏è', label:'ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑŸÖŸÜÿ™ÿ≥ÿ®ŸäŸÜ', def:true},
        {id:'news', icon:'üì∞', label:'ÿßŸÑÿ£ÿÆÿ®ÿßÿ±', def:false},
        {id:'finance', icon:'üí∞', label:'ÿßŸÑŸÖÿßŸÑŸäÿ©', def:false},
        {id:'bylaws', icon:'üìú', label:'ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä', def:false},
        {id:'invitation', icon:'üì®', label:'ŸÖÿ≠ÿ±ÿ± ÿßŸÑÿØÿπŸàÿßÿ™', def:false},
        {id:'confInvite', icon:'üèõÔ∏è', label:'ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±', def:false},
        {id:'contact', icon:'‚úâÔ∏è', label:'ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß', def:false}
    ];
    var h = '';
    allBtns.forEach(function(b){
        var show = qb[b.id] !== undefined ? qb[b.id] : b.def;
        if(show){
            h += '<button class="quick-action-btn" onclick="goTo(\''+b.id+'\')">';
            h += '<span class="quick-icon">'+b.icon+'</span>';
            h += '<span class="quick-label">'+b.label+'</span>';
            h += '</button>';
        }
    });
    grid.innerHTML = h;
};

window.updateHomeStats = function(){
    var membersCount = appData.members ? appData.members.length : 0;
    var familiesCount = appData.approved ? appData.approved.length : 0;
    var newsCount = appData.news ? appData.news.length : 0;
    var activeVotes = appData.votes ? appData.votes.filter(function(v){return v.active;}).length : 0;
    
    if(document.getElementById('statMembersHome')) document.getElementById('statMembersHome').textContent = membersCount;
    if(document.getElementById('statFamiliesHome')) document.getElementById('statFamiliesHome').textContent = familiesCount;
    if(document.getElementById('statNewsHome')) document.getElementById('statNewsHome').textContent = newsCount;
    if(document.getElementById('statVotesHome')) document.getElementById('statVotesHome').textContent = activeVotes;
};

window.checkActiveVotes = function(){
    var activeVoteSection = document.getElementById('activeVoteSection');
    var hs = appData.homeSettings || {};
    
    if(!activeVoteSection || hs.showActiveVote === false) return;
    
    var activeVotes = appData.votes ? appData.votes.filter(function(v){return v.active;}) : [];
    
    if(activeVotes.length > 0){
        activeVoteSection.style.display = 'block';
        var vote = activeVotes[0];
        if(document.getElementById('activeVoteTitle')) document.getElementById('activeVoteTitle').textContent = vote.title || 'ÿ™ÿµŸàŸäÿ™ ŸÜÿ¥ÿ∑';
        if(document.getElementById('activeVoteDesc')) document.getElementById('activeVoteDesc').textContent = vote.question || 'ÿ¥ÿßÿ±ŸÉ ŸÅŸä ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿ¢ŸÜ';
    } else {
        activeVoteSection.style.display = 'none';
    }
};

window.renderHomeNews = function(){
    var container = document.getElementById('homeNewsGrid');
    if(!container) return;
    
    var hs = appData.homeSettings || {};
    var count = hs.newsCount || 3;
    var news = appData.news ? appData.news.slice(0, count) : [];
    
    if(news.length === 0){
        container.innerHTML = '<div class="empty-home-news"><p style="color:var(--muted);text-align:center;padding:40px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿÆÿ®ÿßÿ± ÿ≠ÿßŸÑŸäÿßŸã</p></div>';
        return;
    }
    
    var html = '';
    news.forEach(function(n){
        var img = n.images && n.images.length > 0 ? '<img src="'+n.images[0]+'" class="news-card-home-img">' : '<div class="news-card-home-img">üì∞</div>';
        html += '<div class="news-card-home" onclick="goTo(\'news\')">';
        html += img;
        html += '<div class="news-card-home-body">';
        html += '<div class="news-card-home-date">'+fmtDate(n.date)+'</div>';
        html += '<div class="news-card-home-title">'+n.title+'</div>';
        html += '</div></div>';
    });
    
    container.innerHTML = html;
};

window.renderHomeEvents = function(){
    var container = document.getElementById('homeEventsList');
    if(!container) return;
    
    var hs = appData.homeSettings || {};
    var events = hs.events || [];
    
    if(events.length === 0){
        container.innerHTML = '<p style="color:var(--muted);text-align:center;padding:20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÅÿπÿßŸÑŸäÿßÿ™ ŸÇÿßÿØŸÖÿ©</p>';
        return;
    }
    
    // Sort by date ascending
    var sorted = events.slice().sort(function(a,b){return new Date(a.date)-new Date(b.date);});
    var today = new Date();
    today.setHours(0,0,0,0);
    
    var months = ['ŸäŸÜÿßŸäÿ±','ŸÅÿ®ÿ±ÿßŸäÿ±','ŸÖÿßÿ±ÿ≥','ÿ£ÿ®ÿ±ŸäŸÑ','ŸÖÿßŸäŸà','ŸäŸàŸÜŸäŸà','ŸäŸàŸÑŸäŸà','ÿ£ÿ∫ÿ≥ÿ∑ÿ≥','ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±','ÿ£ŸÉÿ™Ÿàÿ®ÿ±','ŸÜŸàŸÅŸÖÿ®ÿ±','ÿØŸäÿ≥ŸÖÿ®ÿ±'];
    
    var html = '';
    sorted.forEach(function(ev){
        var date = new Date(ev.date);
        var day = date.getDate();
        var month = months[date.getMonth()];
        
        // Countdown
        var diff = Math.ceil((date - today) / (1000*60*60*24));
        var countdown = '';
        if(diff === 0) countdown = 'üî¥ ÿßŸÑŸäŸàŸÖ!';
        else if(diff === 1) countdown = 'ÿ∫ÿØÿßŸã';
        else if(diff > 0 && diff <= 30) countdown = 'ÿ®ÿπÿØ ' + diff + ' ŸäŸàŸÖ';
        else if(diff > 30) countdown = month;
        else countdown = 'ÿßŸÜÿ™Ÿáÿ™';
        
        if(diff < 0) return; // Skip past events
        
        html += '<div class="upcoming-event">';
        html += '<div class="upcoming-event-date"><div class="upcoming-event-day">'+day+'</div><div class="upcoming-event-month">'+month+'</div></div>';
        html += '<div class="upcoming-event-info"><div class="upcoming-event-title">'+ev.title+'</div><div class="upcoming-event-desc">'+(ev.description || '')+'</div></div>';
        html += '<div class="upcoming-event-countdown">'+countdown+'</div>';
        html += '</div>';
    });
    
    container.innerHTML = html || '<p style="color:var(--muted);text-align:center;padding:20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÅÿπÿßŸÑŸäÿßÿ™ ŸÇÿßÿØŸÖÿ©</p>';
};

window.renderSocialLinks = function(){
    var container = document.getElementById('socialLinksDisplay');
    if(!container) return;
    
    var hs = appData.homeSettings || {};
    var html = '';
    
    if(hs.socialFacebook){
        html += '<a href="'+hs.socialFacebook+'" target="_blank" class="social-link"><span class="social-link-icon">üìò</span><span>ŸÅŸäÿ≥ÿ®ŸàŸÉ</span></a>';
    }
    if(hs.socialInstagram){
        html += '<a href="'+hs.socialInstagram+'" target="_blank" class="social-link"><span class="social-link-icon">üì∑</span><span>ÿßŸÜÿ≥ÿ™ÿ∫ÿ±ÿßŸÖ</span></a>';
    }
    if(hs.socialWhatsapp){
        html += '<a href="'+hs.socialWhatsapp+'" target="_blank" class="social-link"><span class="social-link-icon">üí¨</span><span>Ÿàÿßÿ™ÿ≥ÿßÿ®</span></a>';
    }
    if(hs.socialEmail){
        html += '<a href="mailto:'+hs.socialEmail+'" class="social-link"><span class="social-link-icon">üìß</span><span>ÿßŸÑÿ®ÿ±ŸäÿØ</span></a>';
    }
    
    container.innerHTML = html || '<p style="color:var(--muted);">ŸÑŸÖ Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ±Ÿàÿßÿ®ÿ∑</p>';
}

// Events Management
window.renderEventsList = function(){
    var container = document.getElementById('eventsList');
    if(!container) return;
    
    var hs = appData.homeSettings || {};
    var events = hs.events || [];
    
    var html = '';
    events.forEach(function(ev, index){
        html += '<div class="event-item">';
        html += '<input type="date" class="form-input event-date" value="'+ev.date+'" onchange="updateEvent('+index+', \'date\', this.value)">';
        html += '<input type="text" class="form-input" value="'+ev.title+'" placeholder="ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÅÿπÿßŸÑŸäÿ©" onchange="updateEvent('+index+', \'title\', this.value)">';
        html += '<button class="btn btn-red btn-sm" onclick="removeEvent('+index+')">üóëÔ∏è</button>';
        html += '</div>';
    });
    
    container.innerHTML = html;
}

window.addEvent = function(){
    var hs = appData.homeSettings;
    if(!hs.events) hs.events = [];
    
    hs.events.push({
        date: new Date().toISOString().split('T')[0],
        title: 'ŸÅÿπÿßŸÑŸäÿ© ÿ¨ÿØŸäÿØÿ©',
        description: ''
    });
    
    save();
    renderEventsList();
    renderHomePage();
}

window.updateEvent = function(index, field, value){
    var hs = appData.homeSettings;
    if(hs.events && hs.events[index]){
        hs.events[index][field] = value;
        save();
        renderHomePage();
    }
}

window.removeEvent = function(index){
    var hs = appData.homeSettings;
    if(hs.events){
        hs.events.splice(index, 1);
        save();
        renderEventsList();
        renderHomePage();
    }
}

function updateVisibility(){
var sections={news:"btnNews",finance:"btnFinance",map:"btnMap",invitation:"btnInvitation",confInvite:"btnConfInvite",reports:"btnReports",bylaws:"btnBylaws",voting:"btnVoting"};
for(var key in sections){var btn=document.getElementById(sections[key]);var vis=appData.visibility[key]||"all";if(vis==="hidden")btn.classList.add("hidden");else if(vis==="admin"){if(isAdmin)btn.classList.remove("hidden");else btn.classList.add("hidden");}else btn.classList.remove("hidden");}
document.getElementById("visNews").value=appData.visibility.news||"all";document.getElementById("visFinance").value=appData.visibility.finance||"all";document.getElementById("visMap").value=appData.visibility.map||"all";document.getElementById("visInvitation").value=appData.visibility.invitation||"all";document.getElementById("visConfInvite").value=appData.visibility.confInvite||"all";document.getElementById("visReports").value=appData.visibility.reports||"all";document.getElementById("visBylaws").value=appData.visibility.bylaws||"all";document.getElementById("visVoting").value=appData.visibility.voting||"all";
if(isAdmin){document.getElementById("btnFindCenter").classList.remove("hidden");document.getElementById("mapAdminStats").classList.remove("hidden");document.getElementById("btnEditBylaws").classList.remove("hidden");}else{document.getElementById("btnFindCenter").classList.add("hidden");document.getElementById("mapAdminStats").classList.add("hidden");document.getElementById("centerInfo").classList.remove("show");document.getElementById("btnEditBylaws").classList.add("hidden");}
}
window.goTo=function(p){var bs=document.querySelectorAll(".nav-btn");for(var i=0;i<bs.length;i++)bs[i].classList.remove("active");var b=document.getElementById("btn"+p.charAt(0).toUpperCase()+p.slice(1));if(b)b.classList.add("active");var ps=document.querySelectorAll(".page");for(var j=0;j<ps.length;j++)ps[j].classList.remove("active");var pg=document.getElementById("page"+p.charAt(0).toUpperCase()+p.slice(1));if(pg)pg.classList.add("active");if(p==="map"&&!myMap)setTimeout(initMap,300);if(p==="members")loadMembers();if(p==="manageTx")loadAdminTx();if(p==="manageNews")loadAdminNews();document.getElementById("sidebar").classList.remove("open");}
function loadLogo(){if(appData.logo){document.getElementById("logoContainer").innerHTML='<img src="'+appData.logo+'">';document.getElementById("invLogo").innerHTML='<img src="'+appData.logo+'">';}}
function loadNews(){var g=document.getElementById("newsGrid");if(!g)return;g.innerHTML="";for(var i=0;i<appData.news.length;i++){var n=appData.news[i];var imgs=n.imgs||[];if(n.img&&imgs.length===0)imgs=[n.img];var galleryHtml='';if(imgs.length>0){var sliderId='newsSlider_'+i;galleryHtml='<div class="news-gallery-wrapper">';galleryHtml+='<div class="news-gallery-slider" id="'+sliderId+'">';for(var k=0;k<imgs.length;k++){galleryHtml+='<div class="news-gallery-slide"><img src="'+imgs[k]+'" onclick="showLightbox(\''+imgs[k]+'\')"></div>';}galleryHtml+='</div>';if(imgs.length>1){galleryHtml+='<button class="news-gallery-btn news-gallery-prev" onclick="slideNews(\''+sliderId+'\',-1)">‚ùØ</button>';galleryHtml+='<button class="news-gallery-btn news-gallery-next" onclick="slideNews(\''+sliderId+'\',1)">‚ùÆ</button>';galleryHtml+='<div class="news-gallery-counter" id="'+sliderId+'_counter">'+imgs.length+' / 1</div>';galleryHtml+='<div class="news-gallery-dots" id="'+sliderId+'_dots">';for(var d=0;d<imgs.length;d++){galleryHtml+='<button class="news-gallery-dot'+(d===0?' active':'')+'" onclick="goToSlide(\''+sliderId+'\','+d+')"></button>';}galleryHtml+='</div>';}galleryHtml+='</div>';}g.innerHTML+='<div class="news-card"><div class="news-card-body"><div class="news-card-date">'+fmtDate(n.date)+'</div><div class="news-card-title">'+n.title+'</div><div class="news-card-text">'+n.content+'</div></div>'+galleryHtml+'</div>';}renderHomeNews();}
function loadAdminNews(){var l=document.getElementById("adminNewsList");l.innerHTML="";if(appData.news.length===0){l.innerHTML='<p style="color:var(--muted);text-align:center;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿÆÿ®ÿßÿ±</p>';return;}for(var i=0;i<appData.news.length;i++){var n=appData.news[i];var newsId=n.id||n._id;l.innerHTML+='<div class="member-item" data-newsid="'+newsId+'"><div class="member-info"><div class="member-name">'+n.title+'</div><div class="member-city">'+fmtDate(n.date)+'</div></div><div class="news-actions"><button class="btn btn-gray btn-sm news-edit-btn" data-newsid="'+newsId+'">‚úèÔ∏è</button><button class="btn btn-red btn-sm news-delete-btn" data-newsid="'+newsId+'">üóëÔ∏è</button></div></div>';}attachNewsListeners();}
function populateYearFilter(selectId){
var sel=document.getElementById(selectId);if(!sel)return;
var years={};for(var i=0;i<appData.tx.length;i++){var d=appData.tx[i].date;if(d){var y=new Date(d).getFullYear();if(!isNaN(y))years[y]=true;}}
var currentYear=new Date().getFullYear();years[currentYear]=true;
var sortedYears=Object.keys(years).sort(function(a,b){return b-a;});
var currentVal=sel.value;
sel.innerHTML='<option value="all">üìä ÿßŸÑŸÉŸÑ</option>';
for(var j=0;j<sortedYears.length;j++){sel.innerHTML+='<option value="'+sortedYears[j]+'">üìÖ '+sortedYears[j]+'</option>';}
if(!currentVal||currentVal===''){sel.value=String(currentYear);}else{sel.value=currentVal;}
}
function getFilteredTx(selectId){
var sel=document.getElementById(selectId);
var year=sel?sel.value:'all';
if(year==='all')return appData.tx.slice();
return appData.tx.filter(function(t){return t.date&&new Date(t.date).getFullYear()===parseInt(year);});
}
window.loadFinance = function(){populateYearFilter('financeYearFilter');var filtered=getFilteredTx('financeYearFilter');var inc=0,exp=0;for(var i=0;i<filtered.length;i++){if(filtered[i].type==="income")inc+=filtered[i].amount;else exp+=filtered[i].amount;}var bal=inc-exp;var statBal=document.getElementById("statBalance");var statInc=document.getElementById("statIncome");var statExp=document.getElementById("statExpense");if(statBal)statBal.textContent=bal.toLocaleString()+" NOK";if(statInc)statInc.textContent=inc.toLocaleString()+" NOK";if(statExp)statExp.textContent=exp.toLocaleString()+" NOK";var sel=document.getElementById('financeYearFilter');var yearLabel=sel&&sel.value!=='all'?' ('+sel.value+')':'';var lbl1=document.getElementById('finBalanceLabel');var lbl2=document.getElementById('finIncomeLabel');var lbl3=document.getElementById('finExpenseLabel');if(lbl1)lbl1.textContent='ÿßŸÑÿ±ÿµŸäÿØ'+yearLabel;if(lbl2)lbl2.textContent='ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™'+yearLabel;if(lbl3)lbl3.textContent='ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™'+yearLabel;var list=document.getElementById("txList");if(list){list.innerHTML="";if(filtered.length===0){list.innerHTML='<p style="color:var(--muted);text-align:center;padding:20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™</p>';return;}for(var j=0;j<filtered.length;j++){var t=filtered[j];var rh="";if(t.receipts&&t.receipts.length>0){rh='<div class="tx-receipts">';for(var k=0;k<t.receipts.length;k++)rh+='<img src="'+t.receipts[k]+'" class="tx-receipt-img" onclick="showLightbox(\''+t.receipts[k]+'\')">';rh+='</div>';}list.innerHTML+='<div class="tx-item"><div class="tx-icon '+(t.type==="income"?"inc":"exp")+'">'+(t.type==="income"?"üì•":"üì§")+'</div><div class="tx-info"><div class="tx-title">'+t.desc+'</div><div class="tx-date">'+fmtDate(t.date)+'</div></div><div class="tx-amount '+(t.type==="income"?"inc":"exp")+'">'+(t.type==="income"?"+":"-")+t.amount.toLocaleString()+' NOK</div>'+rh+'</div>';}}}
window.loadAdminTx = function(){populateYearFilter('adminTxYearFilter');var filtered=getFilteredTx('adminTxYearFilter');var list=document.getElementById("adminTxList");list.innerHTML="";if(filtered.length===0){list.innerHTML='<p style="color:var(--muted);text-align:center;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™</p>';return;}for(var j=0;j<filtered.length;j++){var t=filtered[j];var txId=t.id||t._id;var rh="";if(t.receipts&&t.receipts.length>0){rh='<div class="tx-receipts">';for(var k=0;k<t.receipts.length;k++)rh+='<img src="'+t.receipts[k]+'" class="tx-receipt-img" onclick="showLightbox(\''+t.receipts[k]+'\')">';rh+='</div>';}list.innerHTML+='<div class="tx-item" data-txid="'+txId+'"><div class="tx-icon '+(t.type==="income"?"inc":"exp")+'">'+(t.type==="income"?"üì•":"üì§")+'</div><div class="tx-info"><div class="tx-title">'+t.desc+'</div><div class="tx-date">'+fmtDate(t.date)+'</div></div><div class="tx-amount '+(t.type==="income"?"inc":"exp")+'">'+(t.type==="income"?"+":"-")+t.amount.toLocaleString()+' NOK</div><div class="tx-actions"><button class="btn btn-gray btn-sm tx-edit-btn" data-txid="'+txId+'">‚úèÔ∏è</button><button class="btn btn-red btn-sm tx-delete-btn" data-txid="'+txId+'">üóëÔ∏è</button></div>'+rh+'</div>';}attachTxListeners();}
function loadCount(){updateHomeStats();}
function loadMembers(filter){
var l=document.getElementById("membersList");
var countEl=document.getElementById("totalMembersCount");
l.innerHTML="";

var totalCount=appData.members?appData.members.length:0;
if(countEl)countEl.textContent=totalCount;

if(!appData.members||appData.members.length===0){l.innerHTML='<p style="text-align:center;color:var(--muted);">ŸÑÿß ŸäŸàÿ¨ÿØ ÿ£ÿπÿ∂ÿßÿ°</p>';return;}

var filtered=appData.members;
if(filter&&filter.trim()){
var search=filter.trim().toLowerCase();
filtered=appData.members.filter(function(m){
return (m.name&&m.name.toLowerCase().indexOf(search)>-1)||
(m.phone&&m.phone.indexOf(search)>-1)||
(m.voteCode&&m.voteCode.toLowerCase().indexOf(search)>-1);
});
}

if(filtered.length===0){l.innerHTML='<p style="text-align:center;color:var(--muted);">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ŸÑŸÑÿ®ÿ≠ÿ´</p>';return;}

for(var i=0;i<filtered.length;i++){
var m=filtered[i];
var memberId = m.id || m._id;
if(!m.voteCode){m.voteCode=generateMemberCode();save();}
var bg=m.showMap?'<span class="badge badge-green">üìç</span>':'<span class="badge badge-red">üìç</span>';
var av=m.img?'<img src="'+m.img+'">':'üë§';
var phoneDisplay=m.phone?'<div class="member-phone">üì± '+m.phone+'</div>':'';
l.innerHTML+='<div class="member-item" data-memberid="'+memberId+'"><div class="member-avatar">'+av+'</div><div class="member-info"><div class="member-name">'+m.name+' '+bg+'</div><div class="member-city">'+(m.addressText||"")+'</div>'+phoneDisplay+'<div class="member-code">üîë ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™: <span style="font-family:monospace;color:var(--gold);font-weight:bold;letter-spacing:2px;">'+m.voteCode+'</span></div></div><div class="member-actions"><button class="btn btn-gray btn-sm member-edit-btn" data-memberid="'+memberId+'">‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ</button><button class="btn btn-red btn-sm member-delete-btn" data-memberid="'+memberId+'">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button></div></div>';
}

// Attach event listeners
attachMemberListeners();
}

function attachMemberListeners(){
// Edit member
document.querySelectorAll('.member-edit-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var memberId = this.getAttribute('data-memberid');
editM(memberId);
};
});

// Delete member
document.querySelectorAll('.member-delete-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var memberId = this.getAttribute('data-memberid');
delM(memberId);
};
});
}

window.searchMembers=function(){
var query=document.getElementById("memberSearchInput").value;
loadMembers(query);
}
var markerClusterGroup=null;
function initMap(){if(myMap)return;try{myMap=L.map("map").setView([58.97,5.73],9);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(myMap);loadMarkers();}catch(e){}}
function loadMarkers(){
if(!myMap)return;

// Remove old cluster group if exists
if(markerClusterGroup){
myMap.removeLayer(markerClusterGroup);
}
markers=[];

// Create new cluster group with custom options
markerClusterGroup=L.markerClusterGroup({
maxClusterRadius:50,
spiderfyOnMaxZoom:true,
showCoverageOnHover:false,
zoomToBoundsOnClick:true,
disableClusteringAtZoom:16,
iconCreateFunction:function(cluster){
var count=cluster.getChildCount();
var size='small';
var cssClass='marker-cluster-small';
if(count>10){size='medium';cssClass='marker-cluster-medium';}
if(count>30){size='large';cssClass='marker-cluster-large';}
return L.divIcon({
html:'<div><span>'+count+'</span></div>',
className:'marker-cluster '+cssClass,
iconSize:L.point(40,40)
});
}
});

var cities={},onMap=0,hidden=0;
var gi=L.divIcon({className:'',html:'<div style="background:#009639;width:24px;height:24px;border-radius:50%;border:3px solid #fff;box-shadow:0 2px 6px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]});

// Group members by exact location
var locationGroups={};
for(var j=0;j<appData.members.length;j++){
var m=appData.members[j];
if(m.showMap&&m.lat&&m.lng){
var locKey=m.lat.toFixed(5)+','+m.lng.toFixed(5);
if(!locationGroups[locKey])locationGroups[locKey]=[];
locationGroups[locKey].push(m);
var ck=m.addressText||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ";
cities[ck]=(cities[ck]||0)+1;
onMap++;
}else{
hidden++;
}
}

// Create markers
for(var locKey in locationGroups){
var membersAtLoc=locationGroups[locKey];
var firstMember=membersAtLoc[0];

if(membersAtLoc.length===1){
// Single member at location
var pc='<div style="text-align:center;min-width:150px;">';
if(firstMember.img)pc+='<img src="'+firstMember.img+'" style="width:60px;height:60px;border-radius:50%;object-fit:cover;margin-bottom:8px;border:3px solid var(--green);">';
pc+='<strong style="font-size:1rem;">'+firstMember.name+'</strong>';
if(firstMember.addressText)pc+='<br><span style="color:#666;font-size:0.85rem;">üìç '+firstMember.addressText+'</span>';
if(firstMember.showPhone&&firstMember.phone)pc+='<br><a href="tel:'+firstMember.phone+'" style="color:#009639;">üì± '+firstMember.phone+'</a>';
if(firstMember.showEmail&&firstMember.email)pc+='<br><a href="mailto:'+firstMember.email+'" style="color:#009639;">üìß '+firstMember.email+'</a>';
pc+='</div>';
var mk=L.marker([firstMember.lat,firstMember.lng],{icon:gi}).bindPopup(pc);
markerClusterGroup.addLayer(mk);
markers.push(mk);
}else{
// Multiple members at same location - create special marker with count
var multiIcon=L.divIcon({
className:'',
html:'<div style="background:linear-gradient(135deg,#009639,#CE1126);width:32px;height:32px;border-radius:50%;border:3px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,0.4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:14px;">'+membersAtLoc.length+'</div>',
iconSize:[32,32],
iconAnchor:[16,16]
});

// Create popup with list of members
var popupContent='<div class="spiderfy-popup" style="min-width:200px;"><div style="text-align:center;padding-bottom:10px;border-bottom:2px solid var(--green);margin-bottom:10px;"><strong style="color:#009639;">üë• '+membersAtLoc.length+' '+t('members')+' '+t('atSameLocation')+'</strong></div>';
for(var k=0;k<membersAtLoc.length;k++){
var mem=membersAtLoc[k];
popupContent+='<div class="member-item" onclick="showMemberDetail('+mem.id+')">';
if(mem.img)popupContent+='<img src="'+mem.img+'" style="width:35px;height:35px;border-radius:50%;object-fit:cover;float:right;margin-left:10px;border:2px solid #009639;">';
popupContent+='<strong>'+mem.name+'</strong>';
if(mem.showPhone&&mem.phone)popupContent+='<br><span style="font-size:0.8rem;color:#666;">üì± '+mem.phone+'</span>';
popupContent+='<div style="clear:both;"></div></div>';
}
popupContent+='</div>';

var mk=L.marker([firstMember.lat,firstMember.lng],{icon:multiIcon}).bindPopup(popupContent,{maxWidth:300,maxHeight:300});
markerClusterGroup.addLayer(mk);
markers.push(mk);
}
}

myMap.addLayer(markerClusterGroup);

var st=document.getElementById("mapStats"),h='';
for(var c in cities)h+='<span style="background:var(--dark);padding:5px 10px;border-radius:5px;margin:3px;display:inline-block;">'+c+': '+cities[c]+'</span>';
st.innerHTML=h||t('noData');
document.getElementById("mapMembersCount").textContent=onMap;
document.getElementById("mapHiddenCount").textContent=hidden;
document.getElementById("mapCitiesCount").textContent=Object.keys(cities).length;
}

window.showMemberDetail=function(memberId){
var member=appData.members.find(function(m){return m.id===memberId;});
if(!member)return;
var pc='<div style="text-align:center;min-width:180px;">';
if(member.img)pc+='<img src="'+member.img+'" style="width:70px;height:70px;border-radius:50%;object-fit:cover;margin-bottom:10px;border:3px solid var(--green);">';
pc+='<h3 style="margin:0 0 5px;color:#009639;">'+member.name+'</h3>';
if(member.addressText)pc+='<p style="margin:5px 0;color:#666;font-size:0.85rem;">üìç '+member.addressText+'</p>';
if(member.showPhone&&member.phone)pc+='<p style="margin:5px 0;"><a href="tel:'+member.phone+'" style="color:#009639;text-decoration:none;">üì± '+member.phone+'</a></p>';
if(member.showEmail&&member.email)pc+='<p style="margin:5px 0;"><a href="mailto:'+member.email+'" style="color:#009639;text-decoration:none;">üìß '+member.email+'</a></p>';
pc+='</div>';
showModal('üë§ '+member.name,pc);
}
function findCenter(){var lats=[],lngs=[];for(var i=0;i<appData.members.length;i++){var m=appData.members[i];if(m.showMap&&m.lat&&m.lng){lats.push(m.lat);lngs.push(m.lng);}}if(lats.length<2){toast("Ÿäÿ¨ÿ® Ÿàÿ¨ŸàÿØ ÿπÿ∂ŸàŸäŸÜ",true);return;}var avgLat=lats.reduce(function(a,b){return a+b;},0)/lats.length;var avgLng=lngs.reduce(function(a,b){return a+b;},0)/lngs.length;if(centerMarker)myMap.removeLayer(centerMarker);var gdi=L.divIcon({className:'',html:'<div style="background:#C9A227;width:30px;height:30px;border-radius:50%;border:3px solid #fff;display:flex;align-items:center;justify-content:center;font-size:16px;box-shadow:0 2px 10px rgba(0,0,0,0.3);">üéØ</div>',iconSize:[30,30],iconAnchor:[15,15]});centerMarker=L.marker([avgLat,avgLng],{icon:gdi}).addTo(myMap).bindPopup('<strong>üéØ ÿ£ŸÅÿ∂ŸÑ ŸÖŸàŸÇÿπ</strong>').openPopup();myMap.setView([avgLat,avgLng],11);document.getElementById("centerCoords").textContent="Lat: "+avgLat.toFixed(4)+", Lng: "+avgLng.toFixed(4);document.getElementById("centerInfo").classList.add("show");toast("ÿ™ŸÖ");}
function searchAddress(a,cb){fetch("https://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(a)).then(function(r){return r.json();}).then(function(d){if(d&&d.length>0)cb(null,{lat:parseFloat(d[0].lat),lng:parseFloat(d[0].lon),display:d[0].display_name});else cb("ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ±",null);}).catch(function(){cb("ÿÆÿ∑ÿ£",null);});}
function updateInv(){document.getElementById("pTitle").textContent=document.getElementById("iTitle").value;document.getElementById("pSub").textContent=document.getElementById("iSub").value;document.getElementById("pText").textContent=document.getElementById("iText").value;document.getElementById("pDate").textContent=document.getElementById("iDate").value;document.getElementById("pFrom").textContent=document.getElementById("iFrom").value;document.getElementById("pTo").textContent=document.getElementById("iTo").value;document.getElementById("pLoc").textContent=document.getElementById("iLoc").value;document.getElementById("pWelcome").textContent=document.getElementById("iWelcome").value;}

// === Conference Invitation ===
var confAg=['ÿßŸÅÿ™ÿ™ÿßÿ≠ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿ®ÿ™ŸÑÿßŸàÿ© ÿ¢Ÿäÿßÿ™ ŸÖŸÜ ÿßŸÑÿ∞ŸÉÿ± ÿßŸÑÿ≠ŸÉŸäŸÖ','ÿßŸÑŸÜÿ¥ŸäÿØ ÿßŸÑŸàÿ∑ŸÜŸä ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä','ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ•ÿØÿßÿ±Ÿä','ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸä','ÿßÿ≥ÿ™ŸÇÿßŸÑÿ© ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©','ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ÿ¶ÿßÿ≥ÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±','ŸÖŸÜÿßŸÇÿ¥ÿ© ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿπŸÑŸâ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä','ŸÅÿ™ÿ≠ ÿ®ÿßÿ® ÿßŸÑÿ™ÿ±ÿ¥ÿ≠ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©','ÿ•ÿ¨ÿ±ÿßÿ° ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™'];
function initConfInv(){renderConfAgEd();updConfPrev();var up=document.getElementById('confLogoUp'),f=document.getElementById('confLogoF');if(up&&f){up.onclick=function(){f.click();};f.onchange=function(){if(this.files&&this.files[0]){var r=new FileReader();r.onload=function(e){up.innerHTML='<img src="'+e.target.result+'" style="max-width:100%;max-height:50px;border-radius:8px;">';var prev=document.getElementById('confLogoPrev');var img=document.getElementById('confLogoImg');if(prev&&img){img.src=e.target.result;prev.style.display='block';}var ctrl=document.getElementById('logoControls');if(ctrl)ctrl.style.display='block';window.updLogoStyle();};r.readAsDataURL(this.files[0]);}};}document.getElementById('confClrHead').onchange=updConfPrev;document.getElementById('confClrTitle').onchange=updConfPrev;}
window.updLogoStyle=function(){var prev=document.getElementById('confLogoPrev');if(!prev)return;var sz=document.getElementById('logoSize'),tp=document.getElementById('logoTop'),lf=document.getElementById('logoLeft');var size=sz?sz.value:80,top=tp?tp.value:42,left=lf?lf.value:50;prev.style.width=size+'px';prev.style.height=size+'px';prev.style.top=top+'%';prev.style.left=left+'%';if(document.getElementById('logoSizeVal'))document.getElementById('logoSizeVal').textContent=size+'px';if(document.getElementById('logoTopVal'))document.getElementById('logoTopVal').textContent=top+'%';if(document.getElementById('logoLeftVal'))document.getElementById('logoLeftVal').textContent=left+'%';};
function renderConfAgEd(){var c=document.getElementById('confAgendaEd');if(!c)return;var h='';confAg.forEach(function(t,i){h+='<div class="conf-edit-item"><button type="button" class="btn btn-red btn-sm" onclick="remConfAg('+i+')" style="padding:4px 8px;">‚úï</button><span class="conf-edit-num">'+(i+1)+'</span><input type="text" class="form-input" value="'+t+'" onchange="updConfAgI('+i+',this.value)"></div>';});c.innerHTML=h;}
function updConfPrev(){var e;e=document.getElementById('confOrgAr');if(e)document.getElementById('confOrgArP').textContent=e.value;e=document.getElementById('confOrgEn');if(e)document.getElementById('confOrgEnP').textContent=e.value;e=document.getElementById('confVrs');if(e)document.getElementById('confVrsP').textContent='Ô¥ø'+e.value+'Ô¥æ';e=document.getElementById('confVrsRef');if(e)document.getElementById('confVrsRefP').textContent=e.value;e=document.getElementById('confInvTxt');if(e)document.getElementById('confInvTxtP').textContent=e.value;e=document.getElementById('confTtl');if(e)document.getElementById('confTtlP').textContent='('+e.value+')';e=document.getElementById('confDt');if(e)document.getElementById('confDtP').textContent=e.value;e=document.getElementById('confTmReg');if(e)document.getElementById('confTmRegP').textContent=e.value;e=document.getElementById('confTmStr');if(e)document.getElementById('confTmStrP').textContent=e.value;e=document.getElementById('confAddr');if(e)document.getElementById('confAddrP').textContent=e.value;e=document.getElementById('confFtr');if(e)document.getElementById('confFtrP').textContent=e.value;var hc=document.getElementById('confClrHead')?.value||'#009639',tc=document.getElementById('confClrTitle')?.value||'#CE1126';var hEl=document.getElementById('confHeadEl'),dEl=document.getElementById('confDetEl'),tBox=document.getElementById('confTtlBox');if(hEl)hEl.style.background='linear-gradient(135deg,'+hc+','+drkClr(hc,20)+')';if(dEl)dEl.style.background='linear-gradient(135deg,'+hc+','+drkClr(hc,20)+')';if(tBox)tBox.style.background=tc;var domeSvg=document.querySelector('.conf-dome svg');if(domeSvg){var ellipses=domeSvg.querySelectorAll('ellipse');if(ellipses[1])ellipses[1].setAttribute('fill',hc);}renderConfAgPrev();}
function drkClr(c,p){var n=parseInt(c.replace('#',''),16),a=Math.round(2.55*p),R=(n>>16)-a,G=(n>>8&0xFF)-a,B=(n&0xFF)-a;if(R<0)R=0;if(G<0)G=0;if(B<0)B=0;return'#'+(0x1000000+R*0x10000+G*0x100+B).toString(16).slice(1);}
function renderConfAgPrev(){var c=document.getElementById('confAgendaP');if(!c)return;var ac=document.getElementById('confClrHead')?.value||'#009639',h='';confAg.forEach(function(t,i){h+='<div class="conf-agenda-row"><span class="conf-agenda-n" style="background:'+ac+';">'+(i+1)+'</span><span class="conf-agenda-t">'+t+'</span></div>';});c.innerHTML=h;}
function addConfAg(){confAg.push('ÿ®ŸÜÿØ ÿ¨ÿØŸäÿØ');renderConfAgEd();renderConfAgPrev();}
function remConfAg(i){confAg.splice(i,1);renderConfAgEd();renderConfAgPrev();}
function updConfAgI(i,v){confAg[i]=v;renderConfAgPrev();}
function printConfCard(){var p=document.getElementById('confCardPrev');if(!p)return;var w=window.open('','_blank');w.document.write('<html dir="rtl"><head><title>ÿØÿπŸàÿ© ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±</title><link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box;font-family:"Tajawal",sans-serif}body{padding:20px}</style></head><body>'+p.outerHTML+'</body></html>');w.document.close();w.onload=function(){w.print();};}
function dlConfImg(){var p=document.getElementById('confCardPrev');if(!p)return;if(typeof html2canvas==='undefined'){toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ...');var s=document.createElement('script');s.src='https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';s.onload=function(){dlConfImg();};document.head.appendChild(s);return;}html2canvas(p,{scale:2,useCORS:true,backgroundColor:'#fff'}).then(function(c){var a=document.createElement('a');a.download='conference-invitation.png';a.href=c.toDataURL('image/png');a.click();toast('ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ© ‚úÖ');});}
function dlConfPDF(){var p=document.getElementById('confCardPrev');if(!p)return;if(typeof html2canvas==='undefined'||typeof jspdf==='undefined'){toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ...');var s1=document.createElement('script');s1.src='https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';s1.onload=function(){var s2=document.createElement('script');s2.src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';s2.onload=function(){dlConfPDF();};document.head.appendChild(s2);};document.head.appendChild(s1);return;}html2canvas(p,{scale:2,useCORS:true,backgroundColor:'#fff'}).then(function(c){var img=c.toDataURL('image/png'),pdf=new jspdf.jsPDF('p','mm','a4'),w=190,h=(c.height*w)/c.width;pdf.addImage(img,'PNG',10,10,w,h);pdf.save('conference-invitation.pdf');toast('ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ PDF ‚úÖ');});}
function showAdmin(){var el;el=document.getElementById("visitorBox");if(el)el.classList.remove("hidden");el=document.getElementById("adminTitle");if(el)el.classList.remove("hidden");el=document.getElementById("btnAdmin");if(el)el.classList.remove("hidden");el=document.getElementById("btnMembers");if(el)el.classList.remove("hidden");el=document.getElementById("btnPending");if(el)el.classList.remove("hidden");el=document.getElementById("btnRegistrationSheet");if(el)el.classList.remove("hidden");el=document.getElementById("btnManageTx");if(el)el.classList.remove("hidden");el=document.getElementById("btnManageNews");if(el)el.classList.remove("hidden");el=document.getElementById("btnManageVoting");if(el)el.classList.remove("hidden");el=document.getElementById("btnInbox");if(el)el.classList.remove("hidden");el=document.getElementById("btnManageLive");if(el)el.classList.remove("hidden");el=document.getElementById("btnManageGallery");if(el)el.classList.remove("hidden");el=document.getElementById("btnLive");if(el)el.classList.remove("hidden");el=document.getElementById("btnEditBylaws");if(el)el.classList.remove("hidden");el=document.getElementById("loginBtn");if(el){el.textContent="üö™ ÿÆÿ±Ÿàÿ¨";el.classList.add("logout");}updateVisibility();}
function hideAdmin(){var el;el=document.getElementById("visitorBox");if(el)el.classList.add("hidden");el=document.getElementById("adminTitle");if(el)el.classList.add("hidden");el=document.getElementById("btnAdmin");if(el)el.classList.add("hidden");el=document.getElementById("btnMembers");if(el)el.classList.add("hidden");el=document.getElementById("btnPending");if(el)el.classList.add("hidden");el=document.getElementById("btnRegistrationSheet");if(el)el.classList.add("hidden");el=document.getElementById("btnManageTx");if(el)el.classList.add("hidden");el=document.getElementById("btnManageNews");if(el)el.classList.add("hidden");el=document.getElementById("btnManageVoting");if(el)el.classList.add("hidden");el=document.getElementById("btnInbox");if(el)el.classList.add("hidden");el=document.getElementById("btnManageLive");if(el)el.classList.add("hidden");el=document.getElementById("btnManageGallery");if(el)el.classList.add("hidden");el=document.getElementById("btnEditBylaws");if(el)el.classList.add("hidden");el=document.getElementById("bylawsEditSection");if(el)el.classList.remove("show");el=document.getElementById("loginBtn");if(el){el.textContent="üîê ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ";el.classList.remove("logout");}updateVisibility();loadLiveStreamStatus();}
function openMemberModal(m){document.getElementById("memberModalTitle").textContent=m?"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ":"‚ûï ÿ•ÿ∂ÿßŸÅÿ©";document.getElementById("memberId").value=m?m.id:"";document.getElementById("memberName").value=m?m.name:"";document.getElementById("memberPhone").value=m?m.phone||"":"";document.getElementById("memberEmail").value=m?m.email||"":"";document.getElementById("memberNotes").value=m?m.notes||"":"";document.getElementById("memberLat").value=m?m.lat||"":"";document.getElementById("memberLng").value=m?m.lng||"":"";document.getElementById("memberAddressSearch").value=m?m.addressText||"":"";document.getElementById("memberShowMap").checked=m?m.showMap:true;document.getElementById("memberShowPhone").checked=m?m.showPhone:false;document.getElementById("memberShowEmail").checked=m?m.showEmail:false;memberImg=m?m.img||"":"";if(memberImg){document.getElementById("memberImgPreview").src=memberImg;document.getElementById("memberImgPreview").style.display="block";}else{document.getElementById("memberImgPreview").style.display="none";}document.getElementById("locationResult").classList.remove("show");document.getElementById("memberModal").classList.add("show");}
async function saveMemberData(){
var nm=document.getElementById("memberName").value.trim();
if(!nm){toast("ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ",true);return;}

var id=document.getElementById("memberId").value;
var d={
name:nm,
img:memberImg,
addressText:document.getElementById("memberAddressSearch").value.trim(),
phone:document.getElementById("memberPhone").value.trim(),
email:document.getElementById("memberEmail").value.trim(),
notes:document.getElementById("memberNotes").value.trim(),
lat:parseFloat(document.getElementById("memberLat").value)||null,
lng:parseFloat(document.getElementById("memberLng").value)||null,
showMap:document.getElementById("memberShowMap").checked,
showPhone:document.getElementById("memberShowPhone").checked,
showEmail:document.getElementById("memberShowEmail").checked
};

if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...");
var result;
if(id){
result = await window.API.Members.update(id, d);
}else{
result = await window.API.Members.create(d);
}
if(result.success){
toast(id?"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ‚úÖ":"ÿ™ŸÖ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ‚úÖ");
await loadDataFromBackend();
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
toast(err.message||"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",true);
}
}else{
d.id=id?parseInt(id):Date.now();
if(id){
for(var i=0;i<appData.members.length;i++)
if(appData.members[i].id===parseInt(id)){appData.members[i]=d;break;}
toast("ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´");
}else{
appData.members.push(d);
toast("ÿ™ŸÖ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©");
}
save();
loadMembers();
loadCount();
loadMarkers();
}

memberImg="";
document.getElementById("memberModal").classList.remove("show");
}
function renderNewsImgs(){var p=document.getElementById("newsImgsPreview");p.innerHTML="";for(var i=0;i<newsImgs.length;i++)p.innerHTML+='<div class="imgs-preview-item"><img src="'+newsImgs[i]+'"><button class="remove-img" onclick="removeNewsImg('+i+')">√ó</button></div>';}
function renderEditNewsImgs(){var p=document.getElementById("editNewsImgsPreview");p.innerHTML="";for(var i=0;i<editNewsImgs.length;i++)p.innerHTML+='<div class="imgs-preview-item"><img src="'+editNewsImgs[i]+'"><button class="remove-img" onclick="removeEditNewsImg('+i+')">√ó</button></div>';}
function renderTxReceipts(){var p=document.getElementById("txReceiptsPreview");p.innerHTML="";for(var i=0;i<txReceipts.length;i++)p.innerHTML+='<div class="receipt-preview-item"><img src="'+txReceipts[i]+'"><button class="remove-receipt" onclick="removeTxReceipt('+i+')">√ó</button></div>';}
function renderEditTxReceipts(){var p=document.getElementById("editTxReceiptsPreview");p.innerHTML="";for(var i=0;i<editTxReceipts.length;i++)p.innerHTML+='<div class="receipt-preview-item"><img src="'+editTxReceipts[i]+'"><button class="remove-receipt" onclick="removeEditTxReceipt('+i+')">√ó</button></div>';}
window.removeNewsImg=function(i){newsImgs.splice(i,1);renderNewsImgs();};window.removeEditNewsImg=function(i){editNewsImgs.splice(i,1);renderEditNewsImgs();};window.removeTxReceipt=function(i){txReceipts.splice(i,1);renderTxReceipts();};window.removeEditTxReceipt=function(i){editTxReceipts.splice(i,1);renderEditTxReceipts();};
window.showLightbox=function(s){document.getElementById("lightboxImg").src=s;document.getElementById("lightbox").classList.add("show");};

// News Gallery Slider
var newsSliderStates={};
window.slideNews=function(sliderId,dir){
var slider=document.getElementById(sliderId);if(!slider)return;
var total=slider.children.length;
if(!newsSliderStates[sliderId])newsSliderStates[sliderId]=0;
newsSliderStates[sliderId]+=dir;
if(newsSliderStates[sliderId]<0)newsSliderStates[sliderId]=total-1;
if(newsSliderStates[sliderId]>=total)newsSliderStates[sliderId]=0;
var idx=newsSliderStates[sliderId];
slider.style.transform='translateX('+(-idx*100)+'%)';
var counter=document.getElementById(sliderId+'_counter');
if(counter)counter.textContent=total+' / '+(idx+1);
var dots=document.querySelectorAll('#'+sliderId+'_dots .news-gallery-dot');
for(var i=0;i<dots.length;i++){dots[i].classList.toggle('active',i===idx);}
};
window.goToSlide=function(sliderId,idx){
var slider=document.getElementById(sliderId);if(!slider)return;
var total=slider.children.length;
newsSliderStates[sliderId]=idx;
slider.style.transform='translateX('+(-idx*100)+'%)';
var counter=document.getElementById(sliderId+'_counter');
if(counter)counter.textContent=total+' / '+(idx+1);
var dots=document.querySelectorAll('#'+sliderId+'_dots .news-gallery-dot');
for(var i=0;i<dots.length;i++){dots[i].classList.toggle('active',i===idx);}
};

// Touch swipe support for news gallery
document.addEventListener('touchstart',function(e){
var wrapper=e.target.closest('.news-gallery-wrapper');
if(!wrapper)return;
wrapper._touchStartX=e.touches[0].clientX;
},{passive:true});
document.addEventListener('touchend',function(e){
var wrapper=e.target.closest('.news-gallery-wrapper');
if(!wrapper||!wrapper._touchStartX)return;
var diff=wrapper._touchStartX-e.changedTouches[0].clientX;
var slider=wrapper.querySelector('.news-gallery-slider');
if(!slider)return;
var sliderId=slider.id;
if(Math.abs(diff)>50){
slideNews(sliderId,diff>0?1:-1);
}
wrapper._touchStartX=null;
},{passive:true});
window.editM=function(id){
id = String(id);
var m = appData.members.find(function(x){return String(x.id||x._id)===id;});
if(m) openMemberModal(m);
};
window.delM=function(id){
id = String(id);
deleteId=id;
deleteType="member";
document.getElementById("deleteMsg").textContent="ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿπÿ∂Ÿàÿü";
document.getElementById("deleteModal").classList.add("show");
};
window.editTx=function(id){
id = String(id);
var t = appData.tx.find(function(x){return String(x.id||x._id)===id;});
if(!t)return;
document.getElementById("editTxId").value=id;
document.getElementById("editTxType").value=t.type;
document.getElementById("editTxDesc").value=t.desc;
document.getElementById("editTxAmount").value=t.amount;
document.getElementById("editTxDate").value=t.date||"";
editTxReceipts=t.receipts?t.receipts.slice():[];
renderEditTxReceipts();
document.getElementById("editTxModal").classList.add("show");
};

function attachTxListeners(){
document.querySelectorAll('.tx-edit-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var txId = this.getAttribute('data-txid');
editTx(txId);
};
});
document.querySelectorAll('.tx-delete-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var txId = this.getAttribute('data-txid');
delTx(txId);
};
});
}

window.delTx=function(id){deleteId=String(id);deleteType="tx";document.getElementById("deleteMsg").textContent="ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿπÿßŸÖŸÑÿ©ÿü";document.getElementById("deleteModal").classList.add("show");};

window.editNews=function(id){
id = String(id);
var n = appData.news.find(function(x){return String(x.id||x._id)===id;});
if(!n)return;
document.getElementById("editNewsId").value=id;
document.getElementById("editNewsTitle").value=n.title;
document.getElementById("editNewsContent").value=n.content;
editNewsImgs=n.imgs?n.imgs.slice():(n.img?[n.img]:[]);
renderEditNewsImgs();
document.getElementById("editNewsModal").classList.add("show");
};

function attachNewsListeners(){
document.querySelectorAll('.news-edit-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var newsId = this.getAttribute('data-newsid');
editNews(newsId);
};
});
document.querySelectorAll('.news-delete-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var newsId = this.getAttribute('data-newsid');
delNews(newsId);
};
});
}

window.delNews=function(id){deleteId=String(id);deleteType="news";document.getElementById("deleteMsg").textContent="ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿÆÿ®ÿ±ÿü";document.getElementById("deleteModal").classList.add("show");};
function loadPending(){
var pl=document.getElementById("pendingList");
var al=document.getElementById("approvedList");
if(!pl)return;
document.getElementById("pendingCount").textContent=appData.pending.length;
document.getElementById("approvedCount").textContent=appData.approved.length;
pl.innerHTML="";
if(appData.pending.length===0){
pl.innerHTML='<p style="text-align:center;color:var(--muted);padding:20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ© üéâ</p>';
}else{
for(var i=0;i<appData.pending.length;i++){
var p=appData.pending[i];
var familyHtml='';
if(p.familyMembers&&p.familyMembers.length>0){
familyHtml='<div class="pending-family-section"><div class="pending-family-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ '+t('familyMembers')+' ('+p.familyMembers.length+')</div>';
for(var f=0;f<p.familyMembers.length;f++){
var fm=p.familyMembers[f];
familyHtml+='<div class="pending-family-member"><strong>'+fm.name+'</strong>';
if(fm.relation)familyHtml+=' <span style="color:var(--muted);font-size:0.8rem;">('+fm.relation+')</span>';
if(fm.phone)familyHtml+='<br><span style="font-size:0.85rem;">üì± '+fm.phone+'</span>';
if(fm.email)familyHtml+='<br><span style="font-size:0.85rem;">üìß '+fm.email+'</span>';
// ÿπÿ±ÿ∂ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸàÿµŸäÿ© ŸÑŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©
familyHtml+='<div style="margin-top:8px;padding:8px;background:rgba(0,0,0,0.2);border-radius:6px;font-size:0.75rem;">';
familyHtml+='<span style="color:var(--gold);">üîí '+t('privacySettings')+':</span> ';
familyHtml+=(fm.showMap?'‚úÖ':'‚ùå')+' '+t('map')+' | ';
familyHtml+=(fm.showPhone?'‚úÖ':'‚ùå')+' '+t('phone')+' | ';
familyHtml+=(fm.showEmail?'‚úÖ':'‚ùå')+' '+t('email');
familyHtml+='</div>';
familyHtml+='</div>';
}
familyHtml+='</div>';
}
pl.innerHTML+='<div class="pending-card"><div class="pending-card-header"><div class="pending-card-info"><h3>üáµüá∏ '+p.name+'</h3><p>üìÖ '+(p.date||p.createdAt||'')+'</p></div><div class="pending-card-badge">ŸÖÿπŸÑŸÇ</div></div><div class="pending-card-details"><div class="pending-detail-item"><label>üì± ÿßŸÑŸáÿßÿ™ŸÅ</label><span>'+p.phone+'</span></div>'+(p.email?'<div class="pending-detail-item"><label>üìß ÿßŸÑÿ®ÿ±ŸäÿØ</label><span>'+p.email+'</span></div>':'')+'<div class="pending-detail-item"><label>üìç ÿßŸÑŸÖÿØŸäŸÜÿ©</label><span>'+p.city+'</span></div>'+(p.originCity?'<div class="pending-detail-item"><label>üáµüá∏ ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ£ÿµŸÑŸä</label><span>'+p.originCity+'</span></div>':'')+'</div><div class="pending-privacy-options"><div class="pending-privacy-title">üîí ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸàÿµŸäÿ© ÿßŸÑŸÖÿÆÿ™ÿßÿ±ÿ©:</div><div class="pending-privacy-item">'+(p.showMap?'‚úÖ':'‚ùå')+' ÿßŸÑÿ∏ŸáŸàÿ± ÿπŸÑŸâ ÿßŸÑÿÆÿßÿ±ÿ∑ÿ©</div><div class="pending-privacy-item">'+(p.showPhone?'‚úÖ':'‚ùå')+' ÿ•ÿ∏Ÿáÿßÿ± ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</div><div class="pending-privacy-item">'+(p.showEmail?'‚úÖ':'‚ùå')+' ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</div></div>'+familyHtml+(p.notes?'<div style="background:rgba(255,255,255,0.05);padding:10px;border-radius:8px;margin-bottom:15px;"><label style="font-size:0.7rem;color:var(--muted);">üìù ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</label><p style="margin:5px 0 0;font-size:0.9rem;">'+p.notes+'</p></div>':'')+'<div class="pending-card-actions"><button class="btn btn-red" onclick="rejectPendingDirect(\''+(p._id||p.id)+'\')">‚ùå ÿ±ŸÅÿ∂</button><button class="btn btn-green" onclick="approvePendingDirect(\''+(p._id||p.id)+'\')">‚úÖ ŸÇÿ®ŸàŸÑ Ÿàÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°</button></div></div>';
}
}
if(al){
al.innerHTML="";
if(appData.approved.length===0){
al.innerHTML='<p style="text-align:center;color:var(--muted);padding:20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπÿßÿ¶ŸÑÿßÿ™ ŸÖŸÇÿ®ŸàŸÑÿ© ÿ®ÿπÿØ</p>';
}else{
for(var j=0;j<appData.approved.length;j++){
var fam=appData.approved[j];
var famId = fam.id || fam._id;
var totalMembers=1+(fam.familyMembers?fam.familyMembers.length:0);
var membersHtml='<div class="family-member-row head"><div class="family-member-avatar">üë§</div><div class="family-member-info"><h4>'+fam.name+'</h4><p>üì± '+(fam.phone||'')+(fam.email?' | üìß '+fam.email:'')+'</p></div><div class="family-member-badge">ÿ±ÿ® ÿßŸÑÿ£ÿ≥ÿ±ÿ©</div></div>';
if(fam.familyMembers&&fam.familyMembers.length>0){
for(var k=0;k<fam.familyMembers.length;k++){
var member=fam.familyMembers[k];
membersHtml+='<div class="family-member-row"><div class="family-member-avatar">üë§</div><div class="family-member-info"><h4>'+member.name+'</h4><p>'+(member.relation?member.relation:'')+(member.phone?' | üì± '+member.phone:'')+'</p></div></div>';
}
}
al.innerHTML+='<div class="family-card" id="family_'+famId+'" data-famid="'+famId+'"><div class="family-card-header" data-famid="'+famId+'"><h3>üè† ÿπÿßÿ¶ŸÑÿ© '+fam.name+' <span class="family-count">'+totalMembers+' ÿ£ŸÅÿ±ÿßÿØ</span></h3><div><span class="family-date">üìÖ '+(fam.approvedDate||'')+'</span> <span class="expand-icon">‚ñº</span></div></div><div class="family-card-body"><div style="margin-bottom:10px;padding:10px;background:rgba(255,255,255,0.03);border-radius:8px;"><span style="color:var(--muted);font-size:0.85rem;">üìç '+(fam.city||'')+(fam.originCity?' | üáµüá∏ '+fam.originCity:'')+'</span></div>'+membersHtml+'<div class="family-actions"><button class="btn btn-gray btn-sm family-edit-btn" data-famid="'+famId+'">‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ</button><button class="btn btn-red btn-sm family-delete-btn" data-famid="'+famId+'">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button></div></div></div>';
}
// Attach family event listeners
attachFamilyListeners();
}
}
}

function attachFamilyListeners(){
// Toggle family card
document.querySelectorAll('.family-card-header').forEach(function(header){
header.onclick = function(){
var famId = this.getAttribute('data-famid');
toggleFamily(famId);
};
});
// Edit family
document.querySelectorAll('.family-edit-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var famId = this.getAttribute('data-famid');
editFamily(famId);
};
});
// Delete family
document.querySelectorAll('.family-delete-btn').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var famId = this.getAttribute('data-famid');
deleteFamily(famId);
};
});
}

window.toggleFamily=function(id){
id = String(id);
var card=document.getElementById("family_"+id);
if(card)card.classList.toggle("open");
};

window.editFamily=function(id){
id = String(id);
var fam=appData.approved.find(function(f){return String(f.id||f._id)===id;});
if(!fam)return;

document.getElementById("editFamilyId").value=id;
document.getElementById("editFamilyName").value=fam.name||"";
document.getElementById("editFamilyPhone").value=fam.phone||"";
document.getElementById("editFamilyEmail").value=fam.email||"";
document.getElementById("editFamilyCity").value=fam.city||"";
document.getElementById("editFamilyAddress").value=fam.address||"";
document.getElementById("editFamilyOrigin").value=fam.originCity||"";
document.getElementById("editFamilyLat").value=fam.lat||"";
document.getElementById("editFamilyLng").value=fam.lng||"";
document.getElementById("editFamilyShowMap").checked=fam.showMap||false;
document.getElementById("editFamilyShowPhone").checked=fam.showPhone||false;
document.getElementById("editFamilyShowEmail").checked=fam.showEmail||false;
document.getElementById("editFamilyNotes").value=fam.notes||"";

document.getElementById("editFamilyModal").classList.add("show");
};

window.getCurrentLocationForEdit=function(){
if(navigator.geolocation){
toast("ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ...");
navigator.geolocation.getCurrentPosition(function(pos){
document.getElementById("editFamilyLat").value=pos.coords.latitude;
document.getElementById("editFamilyLng").value=pos.coords.longitude;
toast("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ‚úÖ");
},function(){toast("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ",true);});
}else{toast("ÿßŸÑŸÖŸàŸÇÿπ ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ",true);}
};

window.saveFamilyEdit=function(){
var id=String(document.getElementById("editFamilyId").value);
var fam=appData.approved.find(function(f){return String(f.id||f._id)===id;});
if(!fam)return;

var oldName=fam.name;
var newName=document.getElementById("editFamilyName").value.trim();
var newPhone=document.getElementById("editFamilyPhone").value.trim();
var newEmail=document.getElementById("editFamilyEmail").value.trim();
var newCity=document.getElementById("editFamilyCity").value.trim();
var newAddress=document.getElementById("editFamilyAddress").value.trim();
var newOrigin=document.getElementById("editFamilyOrigin").value.trim();
var newLat=parseFloat(document.getElementById("editFamilyLat").value)||null;
var newLng=parseFloat(document.getElementById("editFamilyLng").value)||null;
var newShowMap=document.getElementById("editFamilyShowMap").checked;
var newShowPhone=document.getElementById("editFamilyShowPhone").checked;
var newShowEmail=document.getElementById("editFamilyShowEmail").checked;
var newNotes=document.getElementById("editFamilyNotes").value.trim();

// ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπÿßÿ¶ŸÑÿ©
fam.name=newName;
fam.phone=newPhone;
fam.email=newEmail;
fam.city=newCity;
fam.address=newAddress;
fam.originCity=newOrigin;
fam.lat=newLat;
fam.lng=newLng;
fam.showMap=newShowMap;
fam.showPhone=newShowPhone;
fam.showEmail=newShowEmail;
fam.notes=newNotes;

// ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿ∂Ÿà ŸÅŸä ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ° (ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÇÿØŸäŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ)
var member=appData.members.find(function(m){
return m.name===oldName || (m.phone && m.phone===newPhone);
});
if(member){
member.name=newName;
member.phone=newPhone;
member.email=newEmail;
member.addressText=newCity+(newAddress?" - "+newAddress:"");
member.lat=newLat;
member.lng=newLng;
member.showMap=newShowMap;
member.showPhone=newShowPhone;
member.showEmail=newShowEmail;
member.notes=newNotes;
}

save();
loadPending();
loadMembers();
loadMarkers();
document.getElementById("editFamilyModal").classList.remove("show");
toast("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ‚úÖ");
};
window.deleteFamily=function(id){
id=String(id);
if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿπÿßÿ¶ŸÑÿ©ÿü")){
appData.approved=appData.approved.filter(function(f){return String(f.id||f._id)!==id;});
save();
loadPending();
toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ");
}
};
window.toggleApproved=function(){var al=document.getElementById("approvedList");al.style.display=al.style.display==="none"?"block":"none";};
window.viewPending=function(id){for(var i=0;i<appData.pending.length;i++){if(appData.pending[i].id===id){var p=appData.pending[i];currentPendingId=id;var html='<div style="text-align:center;margin-bottom:20px;"><div style="font-size:2rem;">üáµüá∏</div><div style="font-weight:700;font-size:1.1rem;">'+p.name+'</div></div>';html+='<div style="background:var(--dark);padding:15px;border-radius:10px;margin-bottom:15px;">';html+='<div style="margin-bottom:8px;"><strong>üì± ÿßŸÑŸáÿßÿ™ŸÅ:</strong> '+p.phone+'</div>';if(p.email)html+='<div style="margin-bottom:8px;"><strong>üìß ÿßŸÑÿ®ÿ±ŸäÿØ:</strong> '+p.email+'</div>';html+='<div style="margin-bottom:8px;"><strong>üìç ÿßŸÑŸÖÿØŸäŸÜÿ©:</strong> '+p.city+'</div>';if(p.address)html+='<div style="margin-bottom:8px;"><strong>üè† ÿßŸÑÿπŸÜŸàÿßŸÜ:</strong> '+p.address+'</div>';if(p.originCity)html+='<div style="margin-bottom:8px;"><strong>üáµüá∏ ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ£ÿµŸÑŸä:</strong> '+p.originCity+'</div>';if(p.familySize)html+='<div style="margin-bottom:8px;"><strong>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÿπÿØÿØ ÿßŸÑÿ£ÿ≥ÿ±ÿ©:</strong> '+p.familySize+'</div>';if(p.notes)html+='<div style="margin-bottom:8px;"><strong>üìù ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:</strong> '+p.notes+'</div>';html+='</div>';document.getElementById("pendingDetails").innerHTML=html;document.getElementById("pendingModal").classList.add("show");break;}}};
window.approvePendingDirect=async function(id){
id = String(id);
// ÿßÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑ŸÑÿ® ŸÇÿ®ŸÑ ÿßŸÑÿ≠ÿ∞ŸÅ
var p=appData.pending.find(function(x){return String(x.id||x._id)===id;});
if(!p){
toast("ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ®",true);
return;
}

// ÿßÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ŸÖŸÜ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑ŸÑÿ®
var pendingCopy = JSON.parse(JSON.stringify(p));

if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®...");
var result = await window.API.Pending.approve(id);
if(result.success){
// ÿ£ŸàŸÑÿßŸã: ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Backend
await loadDataFromBackend();
// ÿ´ÿßŸÜŸäÿßŸã: ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ© ŸàÿßŸÑÿ£ÿπÿ∂ÿßÿ° ŸÖÿ≠ŸÑŸäÿßŸã
addAllFamilyMembers(pendingCopy);
toast("ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑÿπÿßÿ¶ŸÑÿ© Ÿàÿ•ÿ∂ÿßŸÅÿ™ŸáŸÖ ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° ‚úÖ");
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
// Fallback to local
approveLocalPending(pendingCopy);
toast("ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ŸÖÿ≠ŸÑŸäÿßŸã ‚úÖ");
}
}else{
approveLocalPending(p);
toast("ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑÿπÿßÿ¶ŸÑÿ© Ÿàÿ•ÿ∂ÿßŸÅÿ™ŸáŸÖ ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° ‚úÖ");
}
};

// ÿØÿßŸÑÿ© ÿ•ÿ∂ÿßŸÅÿ© ŸÉŸÑ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ŸÑŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ© ŸàÿßŸÑÿ£ÿπÿ∂ÿßÿ°
function addAllFamilyMembers(p){
var id = p.id || p._id;

// ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ© (ÿ•ÿ∞ÿß ŸÖÿ¥ ŸÖŸàÿ¨ŸàÿØÿ©)
var familyExists = appData.approved.find(function(f){return String(f.id||f._id)===String(id) || f.name===p.name;});
if(!familyExists){
var approvedFamily={
id:id,
name:p.name,
phone:p.phone,
email:p.email||"",
city:p.city,
address:p.address||"",
originCity:p.originCity||"",
lat:p.lat||null,
lng:p.lng||null,
showMap:p.showMap||false,
showPhone:p.showPhone||false,
showEmail:p.showEmail||false,
notes:p.notes||"",
familyMembers:p.familyMembers||[],
approvedDate:new Date().toISOString().split("T")[0]
};
appData.approved.push(approvedFamily);
}

// ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ® ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° (ÿ•ÿ∞ÿß ŸÖÿ¥ ŸÖŸàÿ¨ŸàÿØ)
var headExists = appData.members.find(function(m){return m.name===p.name;});
if(!headExists){
var newMember={
id:Date.now(),
name:p.name,
phone:p.phone||"",
email:p.email||"",
addressText:p.city+(p.address?" - "+p.address:""),
lat:p.lat||null,
lng:p.lng||null,
showMap:p.showMap||false,
showPhone:p.showPhone||false,
showEmail:p.showEmail||false,
notes:"ÿ±ÿ® ÿßŸÑÿ£ÿ≥ÿ±ÿ©",
img:"",
voteCode:generateMemberCode(),
familyId:id
};
appData.members.push(newMember);
}

// ÿ•ÿ∂ÿßŸÅÿ© ŸÉŸÑ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°
if(p.familyMembers&&p.familyMembers.length>0){
for(var f=0;f<p.familyMembers.length;f++){
var fm=p.familyMembers[f];
var memberExists = appData.members.find(function(m){return m.name===fm.name;});
if(!memberExists){
var familyMember={
id:Date.now()+f+100,
name:fm.name,
phone:fm.phone||"",
email:fm.email||"",
addressText:p.city+(p.address?" - "+p.address:""),
lat:p.lat||null,
lng:p.lng||null,
showMap:fm.showMap||false,
showPhone:fm.showPhone||false,
showEmail:fm.showEmail||false,
notes:fm.relation||"",
img:"",
voteCode:generateMemberCode(),
familyId:id
};
appData.members.push(familyMember);
}
}
}

save();
loadPending();
loadMembers();
loadCount();
}

// ÿ™ÿ£ŸÉÿØ ÿ•ŸÜ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ŸÖŸàÿ¨ŸàÿØÿ© ÿ®ÿπÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
function ensureApprovedFamily(p){
var id = p.id || p._id;
var exists = appData.approved.find(function(f){return String(f.id||f._id)===String(id) || f.name===p.name;});
if(!exists){
addAllFamilyMembers(p);
}
loadPending();
}

function approveLocalPending(p){
var id = p.id || p._id;
// ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿπÿßÿ¶ŸÑÿßÿ™ ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ©
var approvedFamily={id:id,name:p.name,phone:p.phone,email:p.email||"",city:p.city,address:p.address||"",originCity:p.originCity||"",lat:p.lat||null,lng:p.lng||null,showMap:p.showMap||false,showPhone:p.showPhone||false,showEmail:p.showEmail||false,notes:p.notes||"",familyMembers:p.familyMembers||[],approvedDate:new Date().toISOString().split("T")[0]};
appData.approved.push(approvedFamily);

// ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ® ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸÑÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°
var newMember={
id:Date.now(),
name:p.name,
phone:p.phone||"",
email:p.email||"",
addressText:p.city+(p.address?" - "+p.address:""),
lat:p.lat||null,
lng:p.lng||null,
showMap:p.showMap||false,
showPhone:p.showPhone||false,
showEmail:p.showEmail||false,
notes:p.notes||"",
img:"",
voteCode:generateMemberCode()
};
appData.members.push(newMember);

// ÿ•ÿ∂ÿßŸÅÿ© ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ÿ£Ÿäÿ∂ÿßŸã
if(p.familyMembers&&p.familyMembers.length>0){
for(var f=0;f<p.familyMembers.length;f++){
var fm=p.familyMembers[f];
var familyMember={
id:Date.now()+f+1,
name:fm.name,
phone:fm.phone||"",
email:"",
addressText:p.city+(p.address?" - "+p.address:""),
lat:p.lat||null,
lng:p.lng||null,
showMap:p.showMap||false,
showPhone:false,
showEmail:false,
notes:fm.relation?"("+fm.relation+")":"",
img:"",
voteCode:generateMemberCode()
};
appData.members.push(familyMember);
}
}

appData.pending=appData.pending.filter(function(x){return String(x.id||x._id)!==String(id);});
save();
loadPending();
loadCount();
}

window.rejectPendingDirect=async function(id){
id = String(id);
if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®...");
var result = await window.API.Pending.reject(id);
if(result.success){
toast("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®");
await loadDataFromBackend();
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
// Fallback to local
appData.pending=appData.pending.filter(function(x){return String(x.id||x._id)!==id;});
save();
loadPending();
toast("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ® ŸÖÿ≠ŸÑŸäÿßŸã");
}
}else{
appData.pending=appData.pending.filter(function(x){return String(x.id||x._id)!==id;});
save();
loadPending();
toast("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®");
}
};
window.resetRegForm=function(){document.getElementById("registrationForm").reset();document.getElementById("regSuccess").classList.remove("show");document.getElementById("regFormContainer").querySelector("form").style.display="block";document.getElementById("regLocationResult").classList.remove("show");document.getElementById("regLat").value="";document.getElementById("regLng").value="";};
var v=parseInt(localStorage.getItem("visitors")||"0"),ld=localStorage.getItem("lastDay"),td=new Date().toDateString();if(ld!==td){v++;localStorage.setItem("visitors",v.toString());localStorage.setItem("lastDay",td);}document.getElementById("visitors").textContent=v;

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Backend ÿ£Ÿà Cloud
if(USE_BACKEND && window.API && window.API.Auth.isLoggedIn()){
loadDataFromBackend().then(function(){
loadLogo();loadOrgName();
});
}else{
loadFromCloud(function(){
// ========== ÿßŸÑŸÜÿ≥ÿÆ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä ==========
window.exportBackup=function(){
  var data=JSON.parse(JSON.stringify(appData));
  data._backupDate=new Date().toISOString();
  data._backupVersion='1.0';
  var blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  var a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  var date=new Date().toISOString().split('T')[0];
  a.download='backup-palestinske-'+date+'.json';
  a.click();
  URL.revokeObjectURL(a.href);
  var st=document.getElementById('backupStatus');
  if(st)st.innerHTML='‚úÖ ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ÿ®ŸÜÿ¨ÿßÿ≠ - '+new Date().toLocaleString('ar-SA');
  toast('ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ‚úÖ');
};

window.importBackup=function(input){
  if(!input.files||!input.files[0])return;
  var file=input.files[0];
  if(!file.name.endsWith('.json')){toast('‚ùå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ JSON');return;}
  
  var reader=new FileReader();
  reader.onload=function(e){
    try{
      var data=JSON.parse(e.target.result);
      if(!data.members&&!data.news&&!data.transactions&&!data.votes){
        toast('‚ùå ÿßŸÑŸÖŸÑŸÅ ŸÑÿß Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿµÿßŸÑÿ≠ÿ©');return;
      }
      if(!confirm('‚ö†Ô∏è ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü\n\nÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿ®ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©.\n\nÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÜÿ≥ÿÆÿ©: '+(data._backupDate||'ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ'))){
        return;
      }
      // ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ŸÖŸÜ ÿßŸÑÿ≠ÿßŸÑŸä ŸÇÿ®ŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ
      localStorage.setItem('appData_before_import',JSON.stringify(appData));
      
      delete data._backupDate;
      delete data._backupVersion;
      appData=data;
      localStorage.setItem('appData',JSON.stringify(appData));
      
      var st=document.getElementById('backupStatus');
      if(st)st.innerHTML='‚úÖ ÿ™ŸÖ ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠! ÿ¨ÿßÿ±Ÿä ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ...';
      toast('ÿ™ŸÖ ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ‚úÖ');
      setTimeout(function(){location.reload();},1500);
    }catch(err){
      toast('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÖŸÑŸÅ');
    }
  };
  reader.readAsText(file);
  input.value='';
};

window.exportBackupCloud=function(){
  if(!appData.jsonBinId){toast('‚ùå ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿ©');return;}
  saveToCloud();
  var st=document.getElementById('backupStatus');
  if(st)st.innerHTML='‚òÅÔ∏è ÿ™ŸÖ ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ÿπŸÑŸâ ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿ© - '+new Date().toLocaleString('ar-SA');
  toast('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ÿπŸÑŸâ ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿ© ‚úÖ');
};

// ========== ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ==========
window.switchReport=function(tab){
  document.querySelectorAll('.report-tab').forEach(function(t){t.classList.remove('active');});
  document.querySelectorAll('.report-panel').forEach(function(p){p.classList.remove('active');});
  event.target.classList.add('active');
  var panelId={members:'reportMembers',finance:'reportFinance',voting:'reportVoting',overview:'reportOverview'};
  var panel=document.getElementById(panelId[tab]);
  if(panel)panel.classList.add('active');
  if(tab==='members')loadMembersReport();
  if(tab==='finance')loadFinanceReport();
  if(tab==='voting')loadVotingReport();
  if(tab==='overview')loadOverviewReport();
};

window.initReports=function(){loadMembersReport();};

window.loadMembersReport=function(){
  var members=appData.members||[];
  var approved=appData.approved||[];
  
  document.getElementById('rptTotalMembers').textContent=members.length;
  document.getElementById('rptTotalFamilies').textContent=approved.length;
  
  // ÿ£ÿπÿ∂ÿßÿ° ÿ¨ÿØÿØ Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±
  var now=new Date();var thisMonth=now.getFullYear()+'-'+(now.getMonth()+1<10?'0':'')+(now.getMonth()+1);
  var newCount=members.filter(function(m){return m.date&&m.date.startsWith(thisMonth);}).length;
  document.getElementById('rptNewMembers').textContent=newCount;
  
  // ÿßŸÑÿ™Ÿàÿ≤Ÿäÿπ ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿØŸÜ
  var cities={};
  members.forEach(function(m){
    var city=m.city||m.kommune||'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ';
    cities[city]=(cities[city]||0)+1;
  });
  var cityArr=Object.keys(cities).map(function(c){return{name:c,count:cities[c]};}).sort(function(a,b){return b.count-a.count;});
  document.getElementById('rptCities').textContent=cityArr.length;
  
  // ÿ±ÿ≥ŸÖ ÿ®ŸäÿßŸÜŸä ŸÑŸÑŸÖÿØŸÜ
  var maxCity=cityArr.length>0?cityArr[0].count:1;
  var colors=['chart-bar-green','chart-bar-blue','chart-bar-gold','chart-bar-red'];
  var cityHtml='';
  cityArr.slice(0,10).forEach(function(c,i){
    var pct=Math.round((c.count/maxCity)*100);
    cityHtml+='<div class="chart-bar-row"><div class="chart-bar-label">'+c.name+'</div><div class="chart-bar-track"><div class="chart-bar-fill '+colors[i%4]+'" style="width:'+pct+'%">'+c.count+'</div></div></div>';
  });
  document.getElementById('rptCityChart').innerHTML=cityHtml||'<p style="color:var(--muted)">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™</p>';
  
  // ÿ£ŸÉÿ®ÿ± ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™
  var famArr=approved.map(function(f){
    var count=members.filter(function(m){return m.familyId===f.id;}).length;
    return{name:f.name||f.father||'ÿπÿßÿ¶ŸÑÿ©',count:count};
  }).sort(function(a,b){return b.count-a.count;});
  var maxFam=famArr.length>0?famArr[0].count:1;
  var famHtml='';
  famArr.slice(0,8).forEach(function(f,i){
    var pct=maxFam>0?Math.round((f.count/maxFam)*100):0;
    famHtml+='<div class="chart-bar-row"><div class="chart-bar-label">'+f.name+'</div><div class="chart-bar-track"><div class="chart-bar-fill '+colors[i%4]+'" style="width:'+Math.max(pct,5)+'%">'+f.count+'</div></div></div>';
  });
  document.getElementById('rptFamilyChart').innerHTML=famHtml||'<p style="color:var(--muted)">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™</p>';
  
  // ÿ¨ÿØŸàŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°
  var tableHtml='';
  members.forEach(function(m,i){
    tableHtml+='<tr><td>'+(i+1)+'</td><td>'+((m.firstName||'')+' '+(m.lastName||m.name||''))+'</td><td>'+(m.city||m.kommune||'-')+'</td><td dir="ltr">'+(m.phone||'-')+'</td><td>'+(m.date||'-')+'</td></tr>';
  });
  document.getElementById('rptMembersTable').innerHTML=tableHtml||'<tr><td colspan="5" style="text-align:center;color:var(--muted)">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™</td></tr>';
};

window.loadFinanceReport=function(){
  var tx=appData.transactions||[];
  var period=document.getElementById('rptFinPeriod')?document.getElementById('rptFinPeriod').value:'all';
  
  // ŸÅŸÑÿ™ÿ±ÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ™ÿ±ÿ©
  var now=new Date();
  var filtered=tx.filter(function(t){
    if(period==='all')return true;
    if(!t.date)return false;
    var d=new Date(t.date);
    if(period==='month')return d.getMonth()===now.getMonth()&&d.getFullYear()===now.getFullYear();
    if(period==='3months'){var m3=new Date();m3.setMonth(m3.getMonth()-3);return d>=m3;}
    if(period==='year')return d.getFullYear()===now.getFullYear();
    return true;
  });
  
  var income=0,expense=0;
  filtered.forEach(function(t){
    var amt=parseFloat(t.amount)||0;
    if(t.type==='income')income+=amt;else expense+=amt;
  });
  
  document.getElementById('rptTotalIncome').textContent=income.toLocaleString();
  document.getElementById('rptTotalExpense').textContent=expense.toLocaleString();
  document.getElementById('rptBalance').textContent=(income-expense).toLocaleString();
  document.getElementById('rptTxCount').textContent=filtered.length;
  
  // ÿ±ÿ≥ŸÖ ÿ®ŸäÿßŸÜŸä
  var maxVal=Math.max(income,expense,1);
  var finHtml='<div class="chart-bar-row"><div class="chart-bar-label">ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™</div><div class="chart-bar-track"><div class="chart-bar-fill chart-bar-green" style="width:'+Math.round((income/maxVal)*100)+'%">'+income.toLocaleString()+' NOK</div></div></div>';
  finHtml+='<div class="chart-bar-row"><div class="chart-bar-label">ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™</div><div class="chart-bar-track"><div class="chart-bar-fill chart-bar-red" style="width:'+Math.round((expense/maxVal)*100)+'%">'+expense.toLocaleString()+' NOK</div></div></div>';
  finHtml+='<div class="chart-bar-row"><div class="chart-bar-label">ÿßŸÑÿ±ÿµŸäÿØ</div><div class="chart-bar-track"><div class="chart-bar-fill '+(income>=expense?'chart-bar-gold':'chart-bar-red')+'" style="width:'+Math.round((Math.abs(income-expense)/maxVal)*100)+'%">'+(income-expense).toLocaleString()+' NOK</div></div></div>';
  document.getElementById('rptFinBarChart').innerHTML=finHtml;
  
  // ÿ¨ÿØŸàŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™
  var tblHtml='';
  filtered.sort(function(a,b){return(b.date||'').localeCompare(a.date||'');}).forEach(function(t,i){
    var cls=t.type==='income'?'color:#00D26A':'color:#E63946';
    var typeLabel=t.type==='income'?'ÿ•Ÿäÿ±ÿßÿØ':'ŸÖÿµÿ±ŸàŸÅ';
    tblHtml+='<tr><td>'+(i+1)+'</td><td>'+(t.date||'-')+'</td><td>'+(t.description||t.desc||'-')+'</td><td><span style="'+cls+';font-weight:700">'+typeLabel+'</span></td><td style="'+cls+';font-weight:700">'+(parseFloat(t.amount)||0).toLocaleString()+'</td></tr>';
  });
  document.getElementById('rptFinTable').innerHTML=tblHtml||'<tr><td colspan="5" style="text-align:center;color:var(--muted)">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™</td></tr>';
};

window.loadVotingReport=function(){
  var votes=appData.votes||[];
  var active=votes.filter(function(v){return v.active;});
  var closed=votes.filter(function(v){return!v.active;});
  
  document.getElementById('rptTotalVotes').textContent=votes.length;
  document.getElementById('rptActiveVotes').textContent=active.length;
  document.getElementById('rptClosedVotes').textContent=closed.length;
  
  // ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©
  var totalPart=0,totalVoters=0;
  var totalMembers=appData.members?appData.members.length:0;
  votes.forEach(function(v){
    if(v.options){
      var voteCount=0;
      v.options.forEach(function(o){voteCount+=(o.votes||0);});
      totalPart+=voteCount;
      totalVoters++;
    }
  });
  var avgPart=totalVoters>0&&totalMembers>0?Math.round((totalPart/totalVoters/totalMembers)*100):0;
  document.getElementById('rptAvgParticipation').textContent=avgPart+'%';
  
  // ŸÜÿ™ÿßÿ¶ÿ¨ ŸÉŸÑ ÿ™ÿµŸàŸäÿ™
  var resHtml='';
  votes.forEach(function(v,vi){
    resHtml+='<div class="chart-container"><div class="chart-title">'+(v.active?'üü¢':'üî¥')+' '+(v.title||'ÿ™ÿµŸàŸäÿ™ '+(vi+1))+'</div>';
    if(v.question)resHtml+='<p style="color:var(--muted);font-size:0.85rem;margin-bottom:12px">'+v.question+'</p>';
    
    var totalV=0;
    if(v.options)v.options.forEach(function(o){totalV+=(o.votes||0);});
    var maxV=0;
    if(v.options)v.options.forEach(function(o){if((o.votes||0)>maxV)maxV=o.votes||0;});
    
    var colors=['chart-bar-green','chart-bar-blue','chart-bar-gold','chart-bar-red'];
    if(v.options){
      v.options.forEach(function(o,oi){
        var pct=totalV>0?Math.round(((o.votes||0)/totalV)*100):0;
        var barW=maxV>0?Math.round(((o.votes||0)/maxV)*100):0;
        var winner=(o.votes||0)===maxV&&maxV>0?' ‚≠ê':'';
        resHtml+='<div class="chart-bar-row"><div class="chart-bar-label">'+(o.text||o.name||'ÿÆŸäÿßÿ± '+(oi+1))+'</div><div class="chart-bar-track"><div class="chart-bar-fill '+colors[oi%4]+'" style="width:'+Math.max(barW,5)+'%">'+(o.votes||0)+' ('+pct+'%)'+winner+'</div></div></div>';
      });
    }
    resHtml+='<p style="color:var(--muted);font-size:0.8rem;margin-top:8px">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿµŸàÿßÿ™: '+totalV+'</p></div>';
  });
  document.getElementById('rptVotingResults').innerHTML=resHtml||'<div class="chart-container"><p style="color:var(--muted);text-align:center">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™</p></div>';
};

window.loadOverviewReport=function(){
  var members=appData.members||[];
  var approved=appData.approved||[];
  var tx=appData.transactions||[];
  var news=appData.news||[];
  var votes=appData.votes||[];
  
  var income=0,expense=0;
  tx.forEach(function(t){var a=parseFloat(t.amount)||0;if(t.type==='income')income+=a;else expense+=a;});
  
  var cities={};
  members.forEach(function(m){var c=m.city||m.kommune||'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ';cities[c]=(cities[c]||0)+1;});
  
  document.getElementById('rptOvMembers').textContent=members.length;
  document.getElementById('rptOvFamilies').textContent=approved.length;
  document.getElementById('rptOvNews').textContent=news.length;
  document.getElementById('rptOvBalance').textContent=(income-expense).toLocaleString();
  document.getElementById('rptOvVotes').textContent=votes.length;
  document.getElementById('rptOvCities').textContent=Object.keys(cities).length;
  
  var summaryHtml='<p>üìÖ <strong>ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±:</strong> '+new Date().toLocaleDateString('ar-SA')+'</p>';
  summaryHtml+='<p>üë• <strong>ÿßŸÑÿ£ÿπÿ∂ÿßÿ°:</strong> '+members.length+' ÿπÿ∂Ÿà ŸÅŸä '+Object.keys(cities).length+' ŸÖÿØŸÜ ŸÖÿÆÿ™ŸÑŸÅÿ©</p>';
  summaryHtml+='<p>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <strong>ÿßŸÑÿπÿßÿ¶ŸÑÿßÿ™:</strong> '+approved.length+' ÿπÿßÿ¶ŸÑÿ© ŸÖÿ≥ÿ¨ŸÑÿ©</p>';
  summaryHtml+='<p>üí∞ <strong>ÿßŸÑŸÖÿßŸÑŸäÿ©:</strong> ÿ•Ÿäÿ±ÿßÿØÿßÿ™ '+income.toLocaleString()+' NOK | ŸÖÿµÿ±ŸàŸÅÿßÿ™ '+expense.toLocaleString()+' NOK | ÿ±ÿµŸäÿØ '+(income-expense).toLocaleString()+' NOK</p>';
  summaryHtml+='<p>üó≥Ô∏è <strong>ÿßŸÑÿ™ÿµŸàŸäÿ™ÿßÿ™:</strong> '+votes.length+' ÿ™ÿµŸàŸäÿ™ ('+votes.filter(function(v){return v.active;}).length+' ŸÜÿ¥ÿ∑)</p>';
  summaryHtml+='<p>üì∞ <strong>ÿßŸÑÿ£ÿÆÿ®ÿßÿ±:</strong> '+news.length+' ÿÆÿ®ÿ± ŸÖŸÜÿ¥Ÿàÿ±</p>';
  
  if(Object.keys(cities).length>0){
    summaryHtml+='<p>üèôÔ∏è <strong>ÿ£ŸÉÿ®ÿ± ÿ™ÿ¨ŸÖÿπ:</strong> '+Object.keys(cities).sort(function(a,b){return cities[b]-cities[a];})[0]+' ('+cities[Object.keys(cities).sort(function(a,b){return cities[b]-cities[a];})[0]]+' ÿ£ÿπÿ∂ÿßÿ°)</p>';
  }
  document.getElementById('rptOverviewSummary').innerHTML=summaryHtml;
};

// ÿ∑ÿ®ÿßÿπÿ© ÿ™ŸÇÿ±Ÿäÿ±
window.printReport=function(type){
  var panelId={members:'reportMembers',finance:'reportFinance',voting:'reportVoting',overview:'reportOverview'};
  var panel=document.getElementById(panelId[type]);
  if(!panel)return;
  var w=window.open('','_blank');
  w.document.write('<html dir="rtl"><head><title>ÿ™ŸÇÿ±Ÿäÿ±</title><link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box;font-family:"Tajawal",sans-serif}body{padding:30px;color:#1a1a2e}.report-stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px}.report-stat{border:2px solid #009639;border-radius:10px;padding:15px;text-align:center}.report-stat-num{font-size:1.8rem;font-weight:800;color:#009639}.report-stat-label{font-size:0.8rem;color:#666}.chart-container{border:1px solid #ddd;border-radius:10px;padding:20px;margin-bottom:15px}.chart-title{font-weight:700;margin-bottom:15px;color:#009639}.chart-bar-row{display:flex;align-items:center;gap:10px;margin-bottom:8px}.chart-bar-label{width:100px;font-size:0.8rem}.chart-bar-track{flex:1;height:25px;background:#f0f0f0;border-radius:12px;overflow:hidden}.chart-bar-fill{height:100%;border-radius:12px;color:#fff;display:flex;align-items:center;justify-content:flex-end;padding-right:8px;font-size:0.75rem;font-weight:700}.chart-bar-green{background:#009639}.chart-bar-red{background:#CE1126}.chart-bar-gold{background:#DAA520}.chart-bar-blue{background:#4A90D9}.report-table{width:100%;border-collapse:collapse}.report-table th{background:#009639;color:#fff;padding:8px;text-align:right}.report-table td{padding:8px;border-bottom:1px solid #ddd}.report-actions{display:none}h1{text-align:center;color:#009639;margin-bottom:5px}p.sub{text-align:center;color:#666;margin-bottom:20px}</style></head><body>');
  w.document.write('<h1>üìä '+{members:'ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ£ÿπÿ∂ÿßÿ°',finance:'ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸä',voting:'ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ™ÿµŸàŸäÿ™',overview:'ÿ™ŸÇÿ±Ÿäÿ± ÿ¥ÿßŸÖŸÑ'}[type]+'</h1>');
  w.document.write('<p class="sub">'+new Date().toLocaleDateString('ar-SA')+'</p>');
  w.document.write(panel.innerHTML);
  w.document.write('</body></html>');
  w.document.close();
  w.onload=function(){w.print();};
};

// ÿ™ÿµÿØŸäÿ± PDF
window.exportMembersPDF=function(){generatePDF('members');};
window.exportFinancePDF=function(){generatePDF('finance');};
window.exportVotingPDF=function(){generatePDF('voting');};
window.exportOverviewPDF=function(){generatePDF('overview');};

window.generatePDF=function(type){
  var panelId={members:'reportMembers',finance:'reportFinance',voting:'reportVoting',overview:'reportOverview'};
  var panel=document.getElementById(panelId[type]);
  if(!panel)return;
  if(typeof html2canvas==='undefined'){
    toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ...');
    var s=document.createElement('script');s.src='https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
    s.onload=function(){var s2=document.createElement('script');s2.src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';s2.onload=function(){generatePDF(type);};document.head.appendChild(s2);};
    document.head.appendChild(s);return;
  }
  html2canvas(panel,{scale:2,useCORS:true,backgroundColor:document.body.classList.contains('light-mode')?'#fff':'#0d1117'}).then(function(canvas){
    var img=canvas.toDataURL('image/png');
    var pdf=new jspdf.jsPDF('p','mm','a4');
    var w=190,h=(canvas.height*w)/canvas.width;
    if(h>270){h=270;w=(canvas.width*h)/canvas.height;}
    pdf.addImage(img,'PNG',10,10,w,h);
    pdf.save('report-'+type+'-'+new Date().toISOString().split('T')[0]+'.pdf');
    toast('ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ‚úÖ');
  });
};

// Theme Toggle - Dark/Light Mode
window.toggleTheme=function(){
  var body=document.body;
  var btn=document.getElementById('themeToggle');
  var isLight=!body.classList.contains('light-mode');
  body.classList.toggle('light-mode');
  if(btn) btn.textContent=isLight?'‚òÄÔ∏è':'üåô';
  localStorage.setItem('appTheme',isLight?'light':'dark');
  // Smooth transition
  body.style.transition='background 0.5s ease, color 0.3s ease';
  setTimeout(function(){body.style.transition='';},600);
};
document.getElementById('themeToggle').addEventListener('click',toggleTheme);
// Load saved theme
(function(){
  var t=localStorage.getItem('appTheme');
  if(t==='light'){
    document.body.classList.add('light-mode');
    var btn=document.getElementById('themeToggle');
    if(btn) btn.textContent='‚òÄÔ∏è';
  }
})();

loadLogo();loadNews();loadFinance();loadCount();updateVisibility();loadOrgName();renderHomePage();
});
}
document.getElementById("btnHome").addEventListener("click",function(){goTo("home");renderHomePage();});document.getElementById("btnNews").addEventListener("click",function(){goTo("news");});
document.getElementById("btnAdmin").addEventListener("click",function(){goTo("admin");loadHomeSettings();});document.getElementById("btnBylaws").addEventListener("click",function(){goTo("bylaws");loadBylaws();});document.getElementById("btnVoting").addEventListener("click",function(){goTo("voting");loadFromCloud(loadVoting);});document.getElementById("btnFinance").addEventListener("click",function(){goTo("finance");});document.getElementById("btnMap").addEventListener("click",function(){goTo("map");});document.getElementById("btnRegister").addEventListener("click",function(){goTo("register");});document.getElementById("btnInvitation").addEventListener("click",function(){goTo("invitation");});document.getElementById("btnConfInvite").addEventListener("click",function(){goTo("confInvite");initConfInv();});document.getElementById("btnReports").addEventListener("click",function(){goTo("reports");initReports();});document.getElementById("btnContact").addEventListener("click",function(){goTo("contact");});document.getElementById("btnLive").addEventListener("click",function(){goTo("live");loadFromCloud(function(){loadLiveStreamStatus();loadLiveVotingList();});});document.getElementById("btnMembers").addEventListener("click",function(){goTo("members");});document.getElementById("btnPending").addEventListener("click",function(){goTo("pending");loadPending();});document.getElementById("btnRegistrationSheet").addEventListener("click",function(){goTo("registrationSheet");loadSheet();});document.getElementById("btnManageTx").addEventListener("click",function(){goTo("manageTx");document.getElementById("txDate").value=new Date().toISOString().split("T")[0];loadAdminTx();});document.getElementById("btnManageNews").addEventListener("click",function(){goTo("manageNews");});document.getElementById("btnManageVoting").addEventListener("click",function(){goTo("manageVoting");loadFromCloud(loadAdminVoting);});document.getElementById("btnInbox").addEventListener("click",function(){goTo("inbox");loadFromCloud(loadMessages);});document.getElementById("btnManageLive").addEventListener("click",function(){goTo("manageLive");loadFromCloud(function(){loadAdminLiveVotes();loadLiveStreamStatus();});});
document.getElementById("mobileBtn").addEventListener("click",function(){document.getElementById("sidebar").classList.toggle("open");});
document.getElementById("loginBtn").addEventListener("click",function(){if(isAdmin){isAdmin=false;hideAdmin();goTo("home");toast("ÿ™ŸÖ ÿßŸÑÿÆÿ±Ÿàÿ¨");}else{document.getElementById("passInput").value="";document.getElementById("loginModal").classList.add("show");}});
document.getElementById("closeLogin").addEventListener("click",function(){document.getElementById("loginModal").classList.remove("show");});document.getElementById("cancelLogin").addEventListener("click",function(){document.getElementById("loginModal").classList.remove("show");});document.getElementById("loginModal").addEventListener("click",function(e){if(e.target.id==="loginModal")this.classList.remove("show");});
document.getElementById("confirmLogin").addEventListener("click",async function(){
var username=document.getElementById("usernameInput").value.trim();
var password=document.getElementById("passInput").value;

if(!password){
toast("ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",true);
return;
}

if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ...");
var result=await window.API.Auth.login(username||'admin',password);
if(result.success){
isAdmin=true;
currentUser=result.user;
document.getElementById("loginModal").classList.remove("show");
document.getElementById("usernameInput").value="";
document.getElementById("passInput").value="";
showAdmin();
showBgSwitcher();
loadDataFromBackend();
toast("ŸÖÿ±ÿ≠ÿ®ÿßŸã "+result.user.name+" ‚úÖ");
}else{
// ŸÑŸà ŸÅÿ¥ŸÑ Backend ÿ¨ÿ±ÿ® ÿßŸÑŸÖÿ≠ŸÑŸä
var currentPass=appData.adminPass||adminPass||'1234';
if(password===currentPass){
isAdmin=true;adminPass=currentPass;
document.getElementById("loginModal").classList.remove("show");
showAdmin();showBgSwitcher();
toast("ÿ™ŸÖ ÿßŸÑÿØÿÆŸàŸÑ (ŸÖÿ≠ŸÑŸä)");
}else{
toast(result.message||"ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ± ÿÆÿßÿ∑ÿ¶ÿ©",true);
}
}
}catch(e){
console.error(e);
// ŸÑŸà ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ± ŸÖÿß ÿ±ÿØ - ÿ¨ÿ±ÿ® ÿßŸÑŸÖÿ≠ŸÑŸä
var currentPass=appData.adminPass||adminPass||'1234';
if(password===currentPass){
isAdmin=true;adminPass=currentPass;
document.getElementById("loginModal").classList.remove("show");
showAdmin();showBgSwitcher();
toast("ÿ™ŸÖ ÿßŸÑÿØÿÆŸàŸÑ (ŸÖÿ≠ŸÑŸä)");
}else{
toast("ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ± ÿÆÿßÿ∑ÿ¶ÿ©",true);
}
}
}else{
// Local password
var currentPass=appData.adminPass||adminPass||'1234';
if(password===currentPass){
isAdmin=true;adminPass=currentPass;
document.getElementById("loginModal").classList.remove("show");
showAdmin();showBgSwitcher();
toast("ÿ™ŸÖ ÿßŸÑÿØÿÆŸàŸÑ");
}else{
toast("ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ± ÿÆÿßÿ∑ÿ¶ÿ©",true);
}
}
});
document.getElementById("passInput").addEventListener("keypress",function(e){if(e.key==="Enter")document.getElementById("confirmLogin").click();});
document.getElementById("btnChangePass").addEventListener("click",function(){document.getElementById("oldPass").value="";document.getElementById("newPass").value="";document.getElementById("confirmPass").value="";document.getElementById("passModal").classList.add("show");});document.getElementById("closePass").addEventListener("click",function(){document.getElementById("passModal").classList.remove("show");});document.getElementById("cancelPass").addEventListener("click",function(){document.getElementById("passModal").classList.remove("show");});document.getElementById("passModal").addEventListener("click",function(e){if(e.target.id==="passModal")this.classList.remove("show");});
document.getElementById("confirmPassBtn").addEventListener("click",function(){var o=document.getElementById("oldPass").value,n=document.getElementById("newPass").value,c=document.getElementById("confirmPass").value;var currentPass=appData.adminPass||adminPass||"";if(o!==currentPass){toast("ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ± ÿÆÿßÿ∑ÿ¶ÿ©",true);return;}if(n.length<4){toast("4 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",true);return;}if(n!==c){toast("ÿ∫Ÿäÿ± ŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ©",true);return;}adminPass=n;appData.adminPass=n;save();document.getElementById("passModal").classList.remove("show");toast("ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ‚úÖ");});
document.getElementById("btnLogout").addEventListener("click",function(){isAdmin=false;hideAdmin();hideBgSwitcher();goTo("home");toast("ÿ™ŸÖ ÿßŸÑÿÆÿ±Ÿàÿ¨");});
document.getElementById("logoUpload").addEventListener("click",function(){document.getElementById("logoFile").click();});document.getElementById("logoFile").addEventListener("change",function(e){var f=e.target.files[0];if(f){var r=new FileReader();r.onload=function(ev){appData.logo=ev.target.result;save();loadLogo();toast("ÿ™ŸÖ");};r.readAsDataURL(f);}});
document.getElementById("visNews").addEventListener("change",function(){appData.visibility.news=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visFinance").addEventListener("change",function(){appData.visibility.finance=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visMap").addEventListener("change",function(){appData.visibility.map=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visInvitation").addEventListener("change",function(){appData.visibility.invitation=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visConfInvite").addEventListener("change",function(){appData.visibility.confInvite=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visReports").addEventListener("change",function(){appData.visibility.reports=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visBylaws").addEventListener("change",function(){appData.visibility.bylaws=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});document.getElementById("visVoting").addEventListener("change",function(){appData.visibility.voting=this.value;save();updateVisibility();toast("ÿ™ŸÖ");});
document.getElementById("newsImgsUpload").addEventListener("click",function(){document.getElementById("newsImgsFile").click();});document.getElementById("newsImgsFile").addEventListener("change",function(e){var files=e.target.files;for(var i=0;i<files.length;i++){(function(file){var r=new FileReader();r.onload=function(ev){newsImgs.push(ev.target.result);renderNewsImgs();};r.readAsDataURL(file);})(files[i]);}});
document.getElementById("btnPublishNews").addEventListener("click",async function(){
var t=document.getElementById("newNewsTitle").value.trim();
var c=document.getElementById("newNewsContent").value.trim();

if(!t||!c){toast("ÿßŸÖŸÑÿ£ ÿßŸÑÿ≠ŸÇŸàŸÑ",true);return;}

if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÜÿ¥ÿ±...");
var result = await window.API.News.create({
title: t,
content: c,
images: newsImgs.slice()
});
if(result.success){
toast("ÿ™ŸÖ ÿßŸÑŸÜÿ¥ÿ± ‚úÖ");
document.getElementById("newNewsTitle").value="";
document.getElementById("newNewsContent").value="";
newsImgs=[];
renderNewsImgs();
await loadDataFromBackend();
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
toast(err.message||"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",true);
}
}else{
appData.news.unshift({id:Date.now(),title:t,content:c,date:new Date().toISOString().split("T")[0],imgs:newsImgs.slice()});
save();
loadNews();
loadAdminNews();
document.getElementById("newNewsTitle").value="";
document.getElementById("newNewsContent").value="";
newsImgs=[];
renderNewsImgs();
toast("ÿ™ŸÖ ÿßŸÑŸÜÿ¥ÿ±");
sendLocalNotification('üì∞ ÿÆÿ®ÿ± ÿ¨ÿØŸäÿØ - ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©', t);
}
});
document.getElementById("txReceiptsUpload").addEventListener("click",function(){document.getElementById("txReceiptsFile").click();});document.getElementById("txReceiptsFile").addEventListener("change",function(e){var files=e.target.files;for(var i=0;i<files.length;i++){(function(file){var r=new FileReader();r.onload=function(ev){txReceipts.push(ev.target.result);renderTxReceipts();};r.readAsDataURL(file);})(files[i]);}});
document.getElementById("btnSaveTx").addEventListener("click",async function(){
var tp=document.getElementById("txType").value;
var ds=document.getElementById("txDesc").value.trim();
var am=parseFloat(document.getElementById("txAmount").value);

if(!ds||!am){toast("ÿßŸÖŸÑÿ£ ÿßŸÑÿ≠ŸÇŸàŸÑ",true);return;}

if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...");
var result = await window.API.Transactions.create({
type: tp,
description: ds,
amount: am,
receipts: txReceipts.slice()
});
if(result.success){
toast("ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ‚úÖ");
document.getElementById("txDesc").value="";
document.getElementById("txAmount").value="";
txReceipts=[];
renderTxReceipts();
await loadDataFromBackend();
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
toast(err.message||"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",true);
}
}else{
appData.tx.unshift({id:Date.now(),type:tp,desc:ds,amount:am,date:document.getElementById("txDate").value||new Date().toISOString().split("T")[0],receipts:txReceipts.slice()});
save();
loadFinance();
loadAdminTx();
document.getElementById("txDesc").value="";
document.getElementById("txAmount").value="";
document.getElementById("txDate").value="";
txReceipts=[];
renderTxReceipts();
toast("ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏");
}
});
document.getElementById("editTxReceiptsUpload").addEventListener("click",function(){document.getElementById("editTxReceiptsFile").click();});document.getElementById("editTxReceiptsFile").addEventListener("change",function(e){var files=e.target.files;for(var i=0;i<files.length;i++){(function(file){var r=new FileReader();r.onload=function(ev){editTxReceipts.push(ev.target.result);renderEditTxReceipts();};r.readAsDataURL(file);})(files[i]);}});
document.getElementById("closeEditTx").addEventListener("click",function(){document.getElementById("editTxModal").classList.remove("show");});document.getElementById("cancelEditTx").addEventListener("click",function(){document.getElementById("editTxModal").classList.remove("show");});document.getElementById("editTxModal").addEventListener("click",function(e){if(e.target.id==="editTxModal")this.classList.remove("show");});
document.getElementById("saveEditTx").addEventListener("click",function(){var id=String(document.getElementById("editTxId").value);var tp=document.getElementById("editTxType").value;var ds=document.getElementById("editTxDesc").value;var am=parseFloat(document.getElementById("editTxAmount").value);var dt=document.getElementById("editTxDate").value;if(!ds||!am){toast("ÿßŸÖŸÑÿ£ ÿßŸÑÿ≠ŸÇŸàŸÑ",true);return;}var t=appData.tx.find(function(x){return String(x.id||x._id)===id;});if(t){t.type=tp;t.desc=ds;t.amount=am;if(dt)t.date=dt;t.receipts=editTxReceipts.slice();}save();loadFinance();loadAdminTx();document.getElementById("editTxModal").classList.remove("show");toast("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ‚úÖ");});
document.getElementById("editNewsImgsUpload").addEventListener("click",function(){document.getElementById("editNewsImgsFile").click();});document.getElementById("editNewsImgsFile").addEventListener("change",function(e){var files=e.target.files;for(var i=0;i<files.length;i++){(function(file){var r=new FileReader();r.onload=function(ev){editNewsImgs.push(ev.target.result);renderEditNewsImgs();};r.readAsDataURL(file);})(files[i]);}});
document.getElementById("closeEditNews").addEventListener("click",function(){document.getElementById("editNewsModal").classList.remove("show");});document.getElementById("cancelEditNews").addEventListener("click",function(){document.getElementById("editNewsModal").classList.remove("show");});document.getElementById("editNewsModal").addEventListener("click",function(e){if(e.target.id==="editNewsModal")this.classList.remove("show");});
document.getElementById("saveEditNews").addEventListener("click",function(){var id=String(document.getElementById("editNewsId").value);var t=document.getElementById("editNewsTitle").value;var c=document.getElementById("editNewsContent").value;if(!t||!c){toast("ÿßŸÖŸÑÿ£ ÿßŸÑÿ≠ŸÇŸàŸÑ",true);return;}var n=appData.news.find(function(x){return String(x.id||x._id)===id;});if(n){n.title=t;n.content=c;n.imgs=editNewsImgs.slice();}save();loadNews();loadAdminNews();document.getElementById("editNewsModal").classList.remove("show");toast("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ‚úÖ");});
document.getElementById("memberImgUpload").addEventListener("click",function(){document.getElementById("memberImgFile").click();});document.getElementById("memberImgFile").addEventListener("change",function(e){var f=e.target.files[0];if(f){var r=new FileReader();r.onload=function(ev){memberImg=ev.target.result;document.getElementById("memberImgPreview").src=memberImg;document.getElementById("memberImgPreview").style.display="block";};r.readAsDataURL(f);}});
document.getElementById("btnSearchAddress").addEventListener("click",function(){var a=document.getElementById("memberAddressSearch").value.trim();if(!a){toast("ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜ",true);return;}toast("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ®ÿ≠ÿ´...");searchAddress(a,function(err,r){if(err){toast(err,true);return;}document.getElementById("memberLat").value=r.lat.toFixed(6);document.getElementById("memberLng").value=r.lng.toFixed(6);document.getElementById("locationText").innerHTML="‚úÖ "+r.display;document.getElementById("locationResult").classList.add("show");toast("ÿ™ŸÖ");});});
document.getElementById("btnResetMap").addEventListener("click",function(){if(myMap)myMap.setView([58.97,5.73],9);});document.getElementById("btnMyLoc").addEventListener("click",function(){if(navigator.geolocation&&myMap){navigator.geolocation.getCurrentPosition(function(p){myMap.setView([p.coords.latitude,p.coords.longitude],14);L.marker([p.coords.latitude,p.coords.longitude]).addTo(myMap).bindPopup("üìç ŸÖŸàŸÇÿπŸÉ").openPopup();},function(){toast("ÿ™ÿπÿ∞ÿ±",true);});}});
document.getElementById("btnFindCenter").addEventListener("click",findCenter);document.getElementById("btnAddMember").addEventListener("click",function(){openMemberModal(null);});document.getElementById("closeMember").addEventListener("click",function(){document.getElementById("memberModal").classList.remove("show");});document.getElementById("cancelMember").addEventListener("click",function(){document.getElementById("memberModal").classList.remove("show");});document.getElementById("memberModal").addEventListener("click",function(e){if(e.target.id==="memberModal")this.classList.remove("show");});document.getElementById("saveMember").addEventListener("click",saveMemberData);document.getElementById("btnGetLoc").addEventListener("click",function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(p){document.getElementById("memberLat").value=p.coords.latitude.toFixed(6);document.getElementById("memberLng").value=p.coords.longitude.toFixed(6);toast("ÿ™ŸÖ");},function(){toast("ÿ™ÿπÿ∞ÿ±",true);});}});
document.getElementById("closeDelete").addEventListener("click",function(){document.getElementById("deleteModal").classList.remove("show");});document.getElementById("cancelDelete").addEventListener("click",function(){document.getElementById("deleteModal").classList.remove("show");});document.getElementById("deleteModal").addEventListener("click",function(e){if(e.target.id==="deleteModal")this.classList.remove("show");});
document.getElementById("confirmDelete").addEventListener("click",async function(){
var id = String(deleteId);
if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ÿ∞ŸÅ...");
var result;
if(deleteType==="member"){
result = await window.API.Members.delete(id);
}else if(deleteType==="tx"){
result = await window.API.Transactions.delete(id);
}else if(deleteType==="news"){
result = await window.API.News.delete(id);
}
if(result && result.success){
toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ ‚úÖ");
await loadDataFromBackend();
}else{
// Fallback to local delete
deleteLocally(id, deleteType);
toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ ŸÖÿ≠ŸÑŸäÿßŸã ‚úÖ");
}
}catch(err){
console.error(err);
// Fallback to local delete
deleteLocally(id, deleteType);
toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ ŸÖÿ≠ŸÑŸäÿßŸã ‚úÖ");
}
}else{
deleteLocally(id, deleteType);
toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ");
}
document.getElementById("deleteModal").classList.remove("show");
});

function deleteLocally(id, type){
id = String(id);
if(type==="member"){
appData.members=appData.members.filter(function(m){return String(m.id||m._id)!==id;});
loadMembers();loadCount();loadMarkers();
}else if(type==="tx"){
appData.tx=appData.tx.filter(function(t){return String(t.id||t._id)!==id;});
loadFinance();loadAdminTx();
}else if(type==="news"){
appData.news=appData.news.filter(function(n){return String(n.id||n._id)!==id;});
loadNews();loadAdminNews();
}
save();
}
document.getElementById("closeLightbox").addEventListener("click",function(){document.getElementById("lightbox").classList.remove("show");});document.getElementById("lightbox").addEventListener("click",function(e){if(e.target.id==="lightbox")this.classList.remove("show");});
document.getElementById("iTitle").addEventListener("input",updateInv);document.getElementById("iSub").addEventListener("input",updateInv);document.getElementById("iText").addEventListener("input",updateInv);document.getElementById("iDate").addEventListener("input",updateInv);document.getElementById("iFrom").addEventListener("input",updateInv);document.getElementById("iTo").addEventListener("input",updateInv);document.getElementById("iLoc").addEventListener("input",updateInv);document.getElementById("iWelcome").addEventListener("input",updateInv);

// ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ± ÿßŸÑÿØÿπŸàÿ©
document.getElementById("invLogoUpload").addEventListener("click",function(){document.getElementById("invLogoFile").click();});
document.getElementById("invLogoFile").addEventListener("change",function(e){
var f=e.target.files[0];
if(f){
var r=new FileReader();
r.onload=function(ev){
appData.invLogo=ev.target.result;
document.getElementById("invLogo").innerHTML='<img src="'+ev.target.result+'" style="max-width:100%;max-height:100%;object-fit:contain;">';
document.getElementById("invLogoUpload").innerHTML='<img src="'+ev.target.result+'" style="width:100%;height:100%;object-fit:cover;border-radius:5px;">';
save();
toast("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ± ‚úÖ");
};
r.readAsDataURL(f);
}
});

window.clearInvLogo=function(){
appData.invLogo=null;
document.getElementById("invLogo").innerHTML='';
document.getElementById("invLogoUpload").innerHTML='üì∑';
save();
toast("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¥ÿπÿßÿ±");
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿ¥ÿπÿßÿ± ÿßŸÑÿØÿπŸàÿ© ÿπŸÜÿØ ÿ®ÿØÿ° ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
function loadInvLogo(){
if(appData.invLogo){
document.getElementById("invLogo").innerHTML='<img src="'+appData.invLogo+'" style="max-width:100%;max-height:100%;object-fit:contain;">';
document.getElementById("invLogoUpload").innerHTML='<img src="'+appData.invLogo+'" style="width:100%;height:100%;object-fit:cover;border-radius:5px;">';
}
}

document.getElementById("btnDlImg").addEventListener("click",function(){if(typeof html2canvas!=="undefined"){html2canvas(document.getElementById("invCard"),{scale:2,useCORS:true,backgroundColor:"#fff"}).then(function(c){var a=document.createElement("a");a.download="invitation.png";a.href=c.toDataURL("image/png");a.click();toast("ÿ™ŸÖ");});}});
document.getElementById("btnDlPdf").addEventListener("click",function(){if(typeof html2canvas!=="undefined"&&typeof window.jspdf!=="undefined"){html2canvas(document.getElementById("invCard"),{scale:2,useCORS:true,backgroundColor:"#fff"}).then(function(c){var j=window.jspdf.jsPDF,w=210,h=(c.height*w)/c.width,p=new j({orientation:h>w?"portrait":"landscape",unit:"mm",format:[w,h]});p.addImage(c.toDataURL("image/png"),"PNG",0,0,w,h);p.save("invitation.pdf");toast("ÿ™ŸÖ");});}});
document.getElementById("registrationForm").addEventListener("submit",async function(e){
e.preventDefault();
var name=document.getElementById("regName").value.trim();
var phone=document.getElementById("regPhone").value.trim();
var email=document.getElementById("regEmail").value.trim();
var city=document.getElementById("regCity").value.trim();
var address=document.getElementById("regAddress").value.trim();
var originCity=document.getElementById("regOriginCity").value.trim();
var familySize=document.getElementById("regFamilySize").value;
var notes=document.getElementById("regNotes").value.trim();
var showMap=document.getElementById("regShowMap").checked;
var showPhone=document.getElementById("regShowPhone").checked;
var showEmail=document.getElementById("regShowEmail").checked;
var lat=parseFloat(document.getElementById("regLat").value)||null;
var lng=parseFloat(document.getElementById("regLng").value)||null;

if(!name||!phone||!city){toast(t('fillRequiredFields'),true);return;}
var privacyCheck=document.getElementById("regPrivacy");
if(privacyCheck&&!privacyCheck.checked){toast('Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©',true);return;}

var familyMembers=[];
var fmCards=document.querySelectorAll(".family-member-card");
fmCards.forEach(function(card,idx){
var fn=card.querySelector('input[name="fm_name_'+idx+'"]');
var fp=card.querySelector('input[name="fm_phone_'+idx+'"]');
var fe=card.querySelector('input[name="fm_email_'+idx+'"]');
var fr=card.querySelector('select[name="fm_relation_'+idx+'"]');
var fShowMap=card.querySelector('input[name="fm_showMap_'+idx+'"]');
var fShowPhone=card.querySelector('input[name="fm_showPhone_'+idx+'"]');
var fShowEmail=card.querySelector('input[name="fm_showEmail_'+idx+'"]');

if(fn&&fn.value.trim()){
familyMembers.push({
name:fn.value.trim(),
phone:fp?fp.value.trim():"",
email:fe?fe.value.trim():"",
relation:fr?fr.value:"",
showMap:fShowMap?fShowMap.checked:true,
showPhone:fShowPhone?fShowPhone.checked:false,
showEmail:fShowEmail?fShowEmail.checked:false
});
}
});

var newPending={
name:name,
phone:phone,
email:email,
city:city,
address:address,
originCity:originCity,
familySize:parseInt(familySize)||1,
familyMembers:familyMembers,
notes:notes,
showMap:showMap,
showPhone:showPhone,
showEmail:showEmail,
lat:lat,
lng:lng
};

// ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÑŸÄ Backend
if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®...");
var result = await window.API.Pending.submit(newPending);
if(result.success){
document.getElementById("regFormContainer").querySelector("form").style.display="none";
document.getElementById("regSuccess").classList.add("show");
toast(t('requestSentSuccess'));
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
toast(err.message||"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",true);
}
}else{
// ÿ≠ŸÅÿ∏ ŸÖÿ≠ŸÑŸä
newPending.id=Date.now();
newPending.date=new Date().toISOString().split("T")[0];
appData.pending.push(newPending);
save();
document.getElementById("regFormContainer").querySelector("form").style.display="none";
document.getElementById("regSuccess").classList.add("show");
toast(t('requestSentSuccess'));
}
});
document.getElementById("regSearchAddress").addEventListener("click",function(){var addr=document.getElementById("regAddress").value.trim()||document.getElementById("regCity").value.trim();if(!addr){toast("ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜ ÿ£Ÿà ŸÖÿØŸäŸÜÿ©",true);return;}toast("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ®ÿ≠ÿ´...");searchAddress(addr,function(err,r){if(err){toast(err,true);return;}document.getElementById("regLat").value=r.lat.toFixed(6);document.getElementById("regLng").value=r.lng.toFixed(6);document.getElementById("regLocationText").innerHTML="‚úÖ "+r.display;document.getElementById("regLocationResult").classList.add("show");toast("ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖŸàŸÇÿπ");});});
document.getElementById("regGetLocation").addEventListener("click",function(){if(navigator.geolocation){toast("ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ...");navigator.geolocation.getCurrentPosition(function(pos){document.getElementById("regLat").value=pos.coords.latitude.toFixed(6);document.getElementById("regLng").value=pos.coords.longitude.toFixed(6);document.getElementById("regLocationText").innerHTML="‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸÉ";document.getElementById("regLocationResult").classList.add("show");toast("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ");},function(){toast("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ",true);});}else{toast("ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ",true);}});
document.getElementById("closePending").addEventListener("click",function(){document.getElementById("pendingModal").classList.remove("show");});
document.getElementById("pendingModal").addEventListener("click",function(e){if(e.target.id==="pendingModal")this.classList.remove("show");});
document.getElementById("approvePending").addEventListener("click",function(){if(currentPendingId)approvePendingDirect(currentPendingId);document.getElementById("pendingModal").classList.remove("show");});
document.getElementById("rejectPending").addEventListener("click",function(){if(currentPendingId)rejectPendingDirect(currentPendingId);document.getElementById("pendingModal").classList.remove("show");});
var familyMemberCount=0;
document.getElementById("addFamilyMember").addEventListener("click",function(){
var container=document.getElementById("familyMembersContainer");
var idx=familyMemberCount++;
var card=document.createElement("div");
card.className="family-member-card";
card.innerHTML='<button type="button" class="remove-family" onclick="this.parentElement.remove()">√ó</button>'+
'<div class="family-member-title">üë§ '+t('familyMember')+' '+(idx+1)+'</div>'+
'<div class="form-group"><label class="form-label">'+t('fullName')+' *</label><input type="text" class="form-input" name="fm_name_'+idx+'" placeholder="'+t('familyMemberName')+'"></div>'+
'<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">'+
'<div class="form-group"><label class="form-label">'+t('relation')+'</label><select class="form-select" name="fm_relation_'+idx+'"><option value="">'+t('choose')+'...</option><option value="ÿ≤Ÿàÿ¨/ÿ≤Ÿàÿ¨ÿ©">'+t('spouse')+'</option><option value="ÿßÿ®ŸÜ">'+t('son')+'</option><option value="ÿßÿ®ŸÜÿ©">'+t('daughter')+'</option><option value="ÿ£ÿ®">'+t('father')+'</option><option value="ÿ£ŸÖ">'+t('mother')+'</option><option value="ÿ£ÿÆ">'+t('brother')+'</option><option value="ÿ£ÿÆÿ™">'+t('sister')+'</option><option value="ÿ¢ÿÆÿ±">'+t('other')+'</option></select></div>'+
'<div class="form-group"><label class="form-label">'+t('phone')+'</label><input type="tel" class="form-input" name="fm_phone_'+idx+'" placeholder="+47"></div>'+
'</div>'+
'<div class="form-group"><label class="form-label">'+t('email')+'</label><input type="email" class="form-input" name="fm_email_'+idx+'" placeholder="example@email.com"></div>'+
'<div style="margin-top:10px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;">'+
'<div style="font-size:0.85rem;color:var(--gold);margin-bottom:8px;">üîí '+t('privacySettings')+'</div>'+
'<div class="checkbox-row" style="margin-bottom:5px;"><input type="checkbox" name="fm_showMap_'+idx+'" id="fm_showMap_'+idx+'" checked><label for="fm_showMap_'+idx+'" style="font-size:0.85rem;">'+t('showOnMap')+'</label></div>'+
'<div class="checkbox-row" style="margin-bottom:5px;"><input type="checkbox" name="fm_showPhone_'+idx+'" id="fm_showPhone_'+idx+'"><label for="fm_showPhone_'+idx+'" style="font-size:0.85rem;">'+t('showPhoneToMembers')+'</label></div>'+
'<div class="checkbox-row"><input type="checkbox" name="fm_showEmail_'+idx+'" id="fm_showEmail_'+idx+'"><label for="fm_showEmail_'+idx+'" style="font-size:0.85rem;">'+t('showEmailToMembers')+'</label></div>'+
'</div>';
container.appendChild(card);
});
if(!appData.sheet)appData.sheet=[];
function loadSheet(){
var tbody=document.getElementById("regSheetBody");
tbody.innerHTML="";
var totalMembers=0,totalPaid=0,totalUnpaid=0,totalAmount=0;
if(appData.sheet.length===0){for(var i=0;i<20;i++){appData.sheet.push({id:i+1,firstName:"",lastName:"",familyCount:"",phone:"",email:"",city:"",fee:"",paid:"",notes:""});}}
for(var j=0;j<appData.sheet.length;j++){
var row=appData.sheet[j];
tbody.innerHTML+='<tr><td class="row-num">'+(j+1)+'</td><td><input type="text" value="'+escapeHtml(row.firstName)+'" onchange="updateSheetCell('+j+',\'firstName\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.lastName)+'" onchange="updateSheetCell('+j+',\'lastName\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.familyCount)+'" onchange="updateSheetCell('+j+',\'familyCount\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.phone)+'" onchange="updateSheetCell('+j+',\'phone\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.email)+'" onchange="updateSheetCell('+j+',\'email\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.city)+'" onchange="updateSheetCell('+j+',\'city\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.fee)+'" onchange="updateSheetCell('+j+',\'fee\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.paid)+'" onchange="updateSheetCell('+j+',\'paid\',this.value)"></td><td><input type="text" value="'+escapeHtml(row.notes)+'" onchange="updateSheetCell('+j+',\'notes\',this.value)"></td></tr>';
if(row.firstName){totalMembers++;var p=row.paid?row.paid.trim().toLowerCase():"";if(p==="ŸÜÿπŸÖ"||p==="yes"||p==="1"||p==="‚úì"||p==="‚úî"){totalPaid++;totalAmount+=parseFloat(row.fee)||0;}else if(p){totalUnpaid++;}}
}
document.getElementById("sheetTotalMembers").textContent=totalMembers;
document.getElementById("sheetTotalFamilies").textContent=appData.sheet.filter(function(r){return r.firstName;}).length;
document.getElementById("sheetTotalPaid").textContent=totalPaid;
document.getElementById("sheetTotalUnpaid").textContent=totalUnpaid;
document.getElementById("sheetTotalAmount").textContent=totalAmount+" NOK";
loadArchive();
}
function escapeHtml(str){if(!str)return"";return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");}
window.updateSheetCell=function(idx,field,value){appData.sheet[idx][field]=value;save();};
window.addSheetRow=function(){appData.sheet.push({id:appData.sheet.length+1,firstName:"",lastName:"",familyCount:"",phone:"",email:"",city:"",fee:"",paid:"",notes:""});save();loadSheet();toast("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÅ ÿ¨ÿØŸäÿØ");};
window.deleteLastRow=function(){if(appData.sheet.length>1){appData.sheet.pop();save();loadSheet();toast("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿµŸÅ");}else{toast("ŸÑÿß ŸäŸÖŸÉŸÜ ÿ≠ÿ∞ŸÅ ÿ¢ÿÆÿ± ÿµŸÅ",true);}};
window.saveSheetToArchive=function(){
var year=document.getElementById("sheetYear").textContent.trim()||new Date().getFullYear();
var title=document.getElementById("sheetTitle").textContent.trim();
var filledRows=appData.sheet.filter(function(r){return r.firstName;});
if(filledRows.length===0){toast("ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ŸÅÿßÿ±ÿ∫ÿ©!",true);return;}
var archiveItem={id:Date.now(),year:year,title:title,date:new Date().toISOString().split("T")[0],membersCount:filledRows.length,data:JSON.parse(JSON.stringify(appData.sheet))};
var existingIdx=-1;
for(var i=0;i<appData.sheetArchive.length;i++){if(appData.sheetArchive[i].year===year){existingIdx=i;break;}}
if(existingIdx>=0){if(confirm("ŸäŸàÿ¨ÿØ ÿ£ÿ±ÿ¥ŸäŸÅ ŸÑÿ≥ŸÜÿ© "+year+" ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑŸáÿü")){appData.sheetArchive[existingIdx]=archiveItem;}else{return;}}else{appData.sheetArchive.unshift(archiveItem);}
save();loadArchive();toast("ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ŸÅŸä ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅ ‚úÖ");
};
function loadArchive(){
var list=document.getElementById("archiveList");
if(!list)return;
list.innerHTML="";
if(!appData.sheetArchive||appData.sheetArchive.length===0){list.innerHTML='<p style="text-align:center;color:var(--muted);padding:20px;">ŸÑÿß ŸäŸàÿ¨ÿØ ÿ£ÿ±ÿ¥ŸäŸÅ</p>';return;}
for(var i=0;i<appData.sheetArchive.length;i++){
var item=appData.sheetArchive[i];
list.innerHTML+='<div class="archive-item"><div class="archive-item-info"><h4>üìÖ ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© '+item.year+'</h4><p>'+item.membersCount+' ÿπÿ∂Ÿà | ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ≠ŸÅÿ∏: '+item.date+'</p></div><div class="archive-item-actions"><button class="btn btn-gray btn-sm" onclick="loadFromArchive('+item.id+')">üìÇ ŸÅÿ™ÿ≠</button><button class="btn btn-gold btn-sm" onclick="downloadArchivePDF('+item.id+')">üì• PDF</button><button class="btn btn-red btn-sm" onclick="deleteArchive('+item.id+')">üóëÔ∏è</button></div></div>';
}
}
window.loadFromArchive=function(id){
for(var i=0;i<appData.sheetArchive.length;i++){
if(appData.sheetArchive[i].id===id){
if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ÿ±ÿ¥ŸäŸÅ "+appData.sheetArchive[i].year+"ÿü ÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©.")){
appData.sheet=JSON.parse(JSON.stringify(appData.sheetArchive[i].data));
document.getElementById("sheetYear").textContent=appData.sheetArchive[i].year;
save();loadSheet();toast("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅ");
}
break;
}
}
};
window.deleteArchive=function(id){
if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅÿü")){
appData.sheetArchive=appData.sheetArchive.filter(function(a){return a.id!==id;});
save();loadArchive();toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ");
}
};
window.downloadArchivePDF=function(id){
for(var i=0;i<appData.sheetArchive.length;i++){
if(appData.sheetArchive[i].id===id){
var oldSheet=appData.sheet;
appData.sheet=appData.sheetArchive[i].data;
loadSheet();
setTimeout(function(){downloadSheetPDF();appData.sheet=oldSheet;loadSheet();},500);
break;
}
}
};
// ŸÖÿ≠ÿ±ÿ± ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ∑ÿ®ÿßÿπÿ©
window.openPrintableFormEditor=function(){
var orgNameAr=appData.orgName?appData.orgName.ar:"ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ";
var orgNameEn=appData.orgName?appData.orgName.en:"Det palestinske samfunn i Rogaland";

document.getElementById("printFormYear").value=document.getElementById("sheetYear")?document.getElementById("sheetYear").textContent.trim():"2025";

updatePrintFormPreview();
document.getElementById("printFormModal").classList.add("show");
}

window.updatePrintFormPreview=function(){
var orgNameAr=appData.orgName?appData.orgName.ar:"ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ";
var orgNameEn=appData.orgName?appData.orgName.en:"Det palestinske samfunn i Rogaland";
var year=document.getElementById("printFormYear").value||"2025";
var rows=parseInt(document.getElementById("printFormRows").value)||20;

var html='<div id="printableFormContent" style="font-family:Tajawal,Arial,sans-serif;direction:rtl;padding:15px;border:2px solid #009639;border-top:6px solid #CE1126;border-bottom:6px solid #000;">';

// Header
html+='<div style="text-align:center;margin-bottom:15px;">';
html+='<div contenteditable="true" style="color:#009639;font-size:14px;margin-bottom:5px;">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>';
html+='<div style="color:#009639;font-size:11px;margin:5px 0;">‚óÜ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚óÜ</div>';
html+='<div contenteditable="true" style="font-size:18px;color:#009639;margin:5px 0;">üåø PS üåø</div>';
html+='<div contenteditable="true" style="font-size:24px;font-weight:700;color:#CE1126;margin:5px 0;">'+orgNameAr+'</div>';
html+='<div contenteditable="true" style="font-size:12px;color:#333;margin-bottom:8px;">'+orgNameEn.toUpperCase()+'</div>';
html+='<div style="color:#009639;font-size:11px;margin:5px 0;">‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá</div>';
html+='<div contenteditable="true" style="font-size:18px;color:#009639;margin:8px 0;">‚óÜ ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπÿ∂ŸàŸäÿ© ‚óÜ</div>';
html+='<div contenteditable="true" style="font-size:16px;font-weight:700;color:#CE1126;">ŸÑŸÑÿπÿßŸÖ '+year+'</div>';
html+='</div>';

// Table
html+='<table style="width:100%;border-collapse:collapse;margin:15px 0;">';
html+='<thead><tr style="background:#009639;color:white;">';
html+='<th style="padding:8px;border:1px solid #009639;width:30px;">ŸÖ</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;">ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;">ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;">ÿßŸÑŸÖÿØŸäŸÜÿ©</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;width:50px;">ÿßŸÑÿØŸÅÿπ</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;width:60px;">ÿßŸÑÿ±ÿ≥ŸàŸÖ</th>';
html+='<th contenteditable="true" style="padding:8px;border:1px solid #009639;">ÿßŸÑÿ™ŸàŸÇŸäÿπ</th>';
html+='</tr></thead><tbody>';

for(var i=1;i<=rows;i++){
var bg=i%2===0?'#f0fff0':'white';
html+='<tr style="background:'+bg+';">';
html+='<td style="padding:10px;border:1px solid #009639;text-align:center;font-weight:700;background:#f5f5f5;">'+i+'</td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;min-height:25px;"></td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;"></td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;"></td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;"></td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;"></td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;"></td>';
html+='<td contenteditable="true" style="padding:10px;border:1px solid #009639;"></td>';
html+='</tr>';
}

html+='</tbody></table>';

// Footer
html+='<div style="text-align:center;margin-top:15px;padding-top:10px;border-top:1px solid #009639;">';
html+='<div style="color:#009639;font-size:11px;margin:5px 0;">‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá‚óá</div>';
html+='<div contenteditable="true" style="color:#CE1126;font-size:14px;">‚óÜ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÅŸä ÿßŸÑŸÇŸÑÿ® ‚óÜ</div>';
html+='</div>';

html+='</div>';

document.getElementById("printFormPreview").innerHTML=html;
}

window.closePrintFormEditor=function(){
document.getElementById("printFormModal").classList.remove("show");
}

window.printEditableForm=function(){
var content=document.getElementById("printableFormContent").outerHTML;
var printWindow=window.open("","_blank");
printWindow.document.write('<!DOCTYPE html><html dir="rtl"><head><meta charset="UTF-8"><title>ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ</title>');
printWindow.document.write('<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">');
printWindow.document.write('<style>@page{size:A4 portrait;margin:10mm}body{margin:0;padding:10mm}[contenteditable]{outline:none}</style>');
printWindow.document.write('</head><body>');
printWindow.document.write(content);
printWindow.document.write('</body></html>');
printWindow.document.close();
setTimeout(function(){printWindow.print();},500);
}

window.downloadEditableFormPDF=function(){
toast("ÿ¨ÿßÿ±Ÿä ÿ•ŸÜÿ¥ÿßÿ° PDF...");
var element=document.getElementById("printableFormContent");
html2canvas(element,{scale:2,useCORS:true,backgroundColor:'#ffffff'}).then(function(canvas){
var imgData=canvas.toDataURL("image/png");
var pdf=new jspdf.jsPDF("p","mm","a4");
var pdfWidth=pdf.internal.pageSize.getWidth();
var pdfHeight=(canvas.height*pdfWidth)/canvas.width;
pdf.addImage(imgData,"PNG",0,0,pdfWidth,pdfHeight);
pdf.save("ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ©_ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ.pdf");
toast("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ PDF ‚úÖ");
closePrintFormEditor();
});
}

window.downloadEmptySheet=function(){
openPrintableFormEditor();
}

window.clearSheet=function(){if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿü")){appData.sheet=[];save();loadSheet();toast("ÿ™ŸÖ ÿßŸÑŸÖÿ≥ÿ≠");}};
window.downloadSheetPDF=function(){
var container=document.getElementById("regSheetContainer");
if(typeof html2canvas!=="undefined"&&typeof window.jspdf!=="undefined"){
toast("ÿ¨ÿßÿ±Ÿä ÿ•ŸÜÿ¥ÿßÿ° PDF...");
html2canvas(container,{scale:2,useCORS:true,backgroundColor:"#fff",scrollX:0,scrollY:0,width:container.scrollWidth,height:container.scrollHeight}).then(function(canvas){
var imgData=canvas.toDataURL("image/png");
var pdf=new window.jspdf.jsPDF({orientation:"landscape",unit:"mm",format:"a4"});
var pdfWidth=pdf.internal.pageSize.getWidth();
var pdfHeight=(canvas.height*pdfWidth)/canvas.width;
pdf.addImage(imgData,"PNG",0,0,pdfWidth,pdfHeight);
var year=document.getElementById("sheetYear")?document.getElementById("sheetYear").textContent:"";
pdf.save("ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ©_ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ_"+year+".pdf");
toast("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ PDF ‚úÖ");
});
}else{toast("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÉÿ™ÿ®ÿßÿ™",true);}
};
window.saveOrgName=function(){
var nameAr=document.getElementById("orgNameAr").value.trim();
var nameEn=document.getElementById("orgNameEn").value.trim();
if(!nameAr){toast("ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä",true);return;}
appData.orgName={ar:nameAr,en:nameEn};
save();
loadOrgName();
toast("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ∏ŸÖÿ© ‚úÖ");
};
var bylawsData={
goals:{icon:"üéØ",title:"ÿßŸÑÿ£ŸáÿØÿßŸÅ",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ´ÿßŸÜŸä - ÿßŸÑŸÖÿßÿØÿ© 9",color:"node-green",sections:[
{title:"ÿ™ÿ±ÿ≥ŸäÿÆ ÿßŸÑŸáŸàŸäÿ©",icon:"üè≥Ô∏è",items:[
{icon:"üáµüá∏",text:"ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑŸÇŸäŸÖ ŸàÿßŸÑŸÖÿ®ÿßÿØÿ¶ ÿßŸÑŸàÿ∑ŸÜŸäÿ©",detail:"ÿßŸÑÿπŸÖŸÑ ÿπŸÑŸâ ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑŸÇŸäŸÖ ŸàÿßŸÑŸÖÿ®ÿßÿØÿ¶ ÿßŸÑŸàÿ∑ŸÜŸäÿ© ÿßŸÑŸÖŸÜÿµŸàÿµ ÿπŸÑŸäŸáÿß ŸÅŸä ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ŸàÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸáŸàŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©."},
{icon:"‚ù§Ô∏è",text:"ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸáŸàŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿßŸÑŸÖŸáÿ¨ÿ±",detail:"ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ¥ÿπŸàÿ± ÿ®ÿßŸÑÿßŸÜÿ™ŸÖÿßÿ° ŸÑŸÑŸàÿ∑ŸÜ ŸàÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿßÿ´ ŸàÿßŸÑÿ´ŸÇÿßŸÅÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÑŸÑÿ£ÿ¨ŸäÿßŸÑ ÿßŸÑŸÇÿßÿØŸÖÿ©."}
]},
{title:"ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©",icon:"ü§ù",items:[
{icon:"üí™",text:"ÿ™ŸÇŸàŸäÿ© ÿ£Ÿàÿßÿµÿ± ÿßŸÑŸÖÿ≠ÿ®ÿ© ŸàÿßŸÑÿ£ÿÆŸàÿ©",detail:"ÿ®ŸÜÿßÿ° ÿπŸÑÿßŸÇÿßÿ™ ŸÇŸàŸäÿ© ÿ®ŸäŸÜ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿ¨ÿßŸÑŸäÿ© Ÿàÿ™ÿπÿ≤Ÿäÿ≤ ÿ±Ÿàÿ≠ ÿßŸÑÿ™ÿπÿßŸàŸÜ ŸàÿßŸÑÿ™ÿ∂ÿßŸÖŸÜ."},
{icon:"üè†",text:"ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿ¥ÿπŸàÿ± ÿ®ÿßŸÑÿßŸÜÿ™ŸÖÿßÿ°",detail:"ÿÆŸÑŸÇ ÿ®Ÿäÿ¶ÿ© ÿØÿßÿπŸÖÿ© ÿ™ÿ¥ÿπÿ± ŸÉŸÑ ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ÿ®ÿ£ŸÜŸá ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿπÿßÿ¶ŸÑÿ© ŸÉÿ®Ÿäÿ±ÿ©."}
]},
{title:"ÿØÿπŸÖ ÿßŸÑŸÇÿ∂Ÿäÿ©",icon:"‚úä",items:[
{icon:"üì¢",text:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÉÿßŸÖŸÑ ŸÑŸÜÿ∂ÿßŸÑ ÿßŸÑÿ¥ÿπÿ® ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä",detail:"ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÖÿπŸÜŸàŸä ŸàÿßŸÑŸÖÿßÿØŸä ŸÑŸÑÿ¥ÿπÿ® ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ŸÅŸä ÿßŸÑŸàÿ∑ŸÜ ÿ®ŸÉÿßŸÅÿ© ÿßŸÑŸàÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿ©."},
{icon:"‚öñÔ∏è",text:"ÿ®ŸÉÿßŸÅÿ© ÿ£ÿ¥ŸÉÿßŸÑŸá ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿ©",detail:"ŸàŸÅŸÇÿßŸã ŸÑŸÑŸÇŸàÿßŸÜŸäŸÜ ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ© ŸàÿßŸÑÿØŸàŸÑŸäÿ© ŸÖÿπ ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿ≥ŸÖÿπÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ©."}
]}
]},
membership:{icon:"üë•",title:"ÿßŸÑÿπÿ∂ŸàŸäÿ©",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ´ÿßŸÑÿ´ - ÿßŸÑŸÖŸàÿßÿØ 10-16",color:"node-red",sections:[
{title:"ŸÅÿ¶ÿßÿ™ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"üìã",items:[
{icon:"‚úÖ",text:"ÿßŸÑÿπÿ∂Ÿà ÿßŸÑÿπÿßŸÖŸÑ: ÿßŸÑŸÖÿ≥ÿØÿØ ŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™Ÿá",detail:"ŸáŸà ÿßŸÑÿπÿ∂Ÿà ÿßŸÑÿ∞Ÿä ÿ™ŸÜÿ∑ÿ®ŸÇ ÿπŸÑŸäŸá ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ŸàÿßŸÑŸÖÿ≥ÿØÿØ ŸÑŸÉÿßŸÅÿ© ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™Ÿá. Ÿäÿ™ŸÖÿ™ÿπ ÿ®ÿ≠ŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸàÿßŸÑÿ™ÿ±ÿ¥ÿ≠ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ®ÿπÿØ ŸÖÿ±Ÿàÿ± 6 ÿ¥ŸáŸàÿ± ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿ™ÿ≥ÿ¨ŸäŸÑŸá."},
{icon:"üëÅÔ∏è",text:"ÿßŸÑÿπÿ∂Ÿà ÿßŸÑŸÖÿ±ÿßŸÇÿ®: ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ≥ÿØÿØ ÿ£Ÿà ŸÖŸÜ ÿπŸÖÿ±Ÿá 14-18",detail:"ŸáŸà ÿßŸÑÿπÿ∂Ÿà ÿßŸÑÿ∞Ÿä ŸÑŸÖ Ÿäÿ≥ÿØÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™Ÿá ÿßŸÑÿ≥ŸÜŸàŸäÿ©ÿå ÿ£Ÿà ÿ£ÿ®ŸÜÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑÿ∞ŸäŸÜ ÿ™ÿ™ÿ±ÿßŸàÿ≠ ÿ£ÿπŸÖÿßÿ±ŸáŸÖ ÿ®ŸäŸÜ 14 Ÿà18 ÿπÿßŸÖÿßŸã. Ÿäÿ¥ÿßÿ±ŸÉ ŸÅŸä ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ŸÑŸÉŸÜ ÿ®ÿØŸàŸÜ ÿ≠ŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ£Ÿà ÿßŸÑÿ™ÿ±ÿ¥ÿ≠."},
{icon:"‚≠ê",text:"ÿπÿ∂Ÿà ÿßŸÑÿ¥ÿ±ŸÅ: ŸÖŸÜ ŸÇÿØŸÖ ÿÆÿØŸÖÿßÿ™ ŸÉÿ®Ÿäÿ±ÿ©",detail:"ŸÉŸÑ ÿ¥ÿÆÿµ ŸÖŸÜ ÿ£ÿµŸÑ ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ÿ£Ÿà ÿ∫Ÿäÿ± ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ŸÇÿØŸÖ ÿÆÿØŸÖÿßÿ™ ŸÉÿ®Ÿäÿ±ÿ© ÿ£Ÿà ŸÖŸàÿßŸÇŸÅ ÿØÿßÿπŸÖÿ© ŸÑŸÑÿ¨ÿßŸÑŸäÿ© ŸàÿßŸÑŸÇÿ∂Ÿäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©. Ÿäÿ≠ÿØÿØ ŸÖŸÜ ŸÇÿ®ŸÑ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©."}
]},
{title:"ÿ≠ŸÇŸàŸÇ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°",icon:"‚ú®",items:[
{icon:"üó≥Ô∏è",text:"ÿ≠ŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸàÿßŸÑÿ™ÿ±ÿ¥ÿ≠",detail:"ŸÑŸÑÿπÿ∂Ÿà ÿßŸÑÿπÿßŸÖŸÑ ÿßŸÑÿ≠ŸÇ ŸÅŸä ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸàÿßŸÑÿ™ÿ±ÿ¥ÿ≠ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ®ÿ¥ÿ±ÿ∑ ŸÖÿ±Ÿàÿ± 6 ÿ¥ŸáŸàÿ± ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿ™ÿ≥ÿ¨ŸäŸÑŸá Ÿàÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÇÿØ ÿ£ÿ™ŸÖ 18 ÿπÿßŸÖÿßŸã."},
{icon:"üé§",text:"ÿßŸÑÿ™ÿπÿ®Ÿäÿ± ÿπŸÜ ÿßŸÑÿ±ÿ£Ÿä ÿØŸäŸÖŸÇÿ±ÿßÿ∑ŸäÿßŸã",detail:"ÿ∂ŸÖŸÜ ÿßŸÑÿ£ÿ∑ÿ± ÿßŸÑÿ¥ÿ±ÿπŸäÿ© ŸÅŸä ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±ÿßÿ™ ŸàÿßŸÑÿ¨ŸÖÿπŸäÿßÿ™ ÿßŸÑÿπŸÖŸàŸÖŸäÿ© Ÿàÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©."},
{icon:"üéâ",text:"ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™",detail:"ÿ≠ŸÇ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÅŸä ÿ¨ŸÖŸäÿπ ŸÅÿπÿßŸÑŸäÿßÿ™ Ÿàÿ£ŸÜÿ¥ÿ∑ÿ© Ÿàÿ®ÿ±ÿßŸÖÿ¨ ÿßŸÑÿ¨ÿßŸÑŸäÿ©."}
]},
{title:"ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"üìù",items:[
{icon:"üìÑ",text:"ÿ™ÿπÿ®ÿ¶ÿ© ŸÜŸÖŸàÿ∞ÿ¨ ÿ∑ŸÑÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ",detail:"ÿ™ŸÇÿØŸäŸÖ ŸÜŸÖŸàÿ∞ÿ¨ ÿ∑ŸÑÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿπÿ∂Ÿà ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÑÿØÿ±ÿßÿ≥ÿ™Ÿá ŸàÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸäŸá."},
{icon:"üí≥",text:"ÿØŸÅÿπ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ≥ŸÜŸàŸä",detail:"ÿØŸÅÿπ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ™Ÿä ÿ™ÿ≠ÿØÿØŸáÿß ÿßŸÑÿ¨ŸÖÿπŸäÿ© ÿßŸÑÿπÿßŸÖÿ©ÿå ŸàÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿ™ÿ≥ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ≥ŸÜŸàŸä."},
{icon:"üîû",text:"ÿ•ŸÉŸÖÿßŸÑ 18 ÿπÿßŸÖÿßŸã ŸÑŸÑÿ™ÿ±ÿ¥ÿ≠ ÿ£Ÿà ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®",detail:"Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿßŸÑÿπÿ∂Ÿà ŸÇÿØ ÿ£ŸÉŸÖŸÑ 18 ÿπÿßŸÖÿßŸã ŸÑŸÑÿ™ÿ±ÿ¥ÿ≠ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ£Ÿà ŸÑŸÑÿ™ÿµŸàŸäÿ™ ŸÅŸä ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™."},
{icon:"üìç",text:"ÿßŸÑÿ•ŸÇÿßŸÖÿ© ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ©",detail:"ÿ£ŸÜ ŸäŸÇŸäŸÖ ÿßŸÑÿπÿ∂Ÿà ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ© ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ ŸÅŸä ÿßŸÑŸÜÿ±ŸàŸäÿ¨."}
]},
{title:"ÿ≤ŸàÿßŸÑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"‚ùå",items:[
{icon:"‚ö†Ô∏è",text:"ÿßŸÑÿ•ÿÆŸÑÿßŸÑ ÿ®ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",detail:"ÿ™ÿ≤ŸàŸÑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿ•ÿÆŸÑÿßŸÑ ÿßŸÑÿπÿ∂Ÿà ÿ®ÿ¥ÿ±ÿ∑ ŸÖŸÜ ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©ÿå ŸàŸäÿ≠ŸÇ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ•ÿ®ŸÑÿßÿ∫Ÿá ÿ®ÿ∞ŸÑŸÉ ÿÆÿ∑ŸäÿßŸã."},
{icon:"üöö",text:"ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ",detail:"ÿ™ÿ≤ŸàŸÑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑÿπÿ∂Ÿà Ÿàÿ•ŸÇÿßŸÖÿ™Ÿá ÿÆÿßÿ±ÿ¨ ŸÜÿ∑ÿßŸÇ ÿßŸÑÿ¨ÿßŸÑŸäÿ© (ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ)."},
{icon:"üì§",text:"ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ® ÿßŸÜÿ≥ÿ≠ÿßÿ®",detail:"ŸäŸÉŸàŸÜ ÿßŸÑÿßŸÜÿ≥ÿ≠ÿßÿ® ÿ®ŸÉÿ™ÿßÿ® ÿ¥ÿÆÿµŸä ŸÖŸàŸÇÿπ ÿπŸÑŸäŸá ÿ£Ÿà ÿπÿ®ÿ± ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿßŸÑÿ±ÿ≥ŸÖŸä ŸÑŸÑÿ¨ÿßŸÑŸäÿ©."}
]}
]},
admin:{icon:"‚öôÔ∏è",title:"ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ≥ÿßÿØÿ≥ - ÿßŸÑŸÖŸàÿßÿØ 36-47",color:"node-orange",sections:[
{title:"ÿ™ŸÉŸàŸäŸÜ ÿßŸÑŸáŸäÿ¶ÿ©",icon:"üëî",items:[
{icon:"5Ô∏è‚É£",text:"1-50 ÿπÿ∂Ÿà ‚Üê 5 ÿ£ÿπÿ∂ÿßÿ° ŸáŸäÿ¶ÿ©",detail:"ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿπÿØÿØ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ ŸÖŸÜ 1 ÿ•ŸÑŸâ 50 ÿπÿ∂Ÿàÿå ÿ™ÿ™ŸÉŸàŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÖŸÜ 5 ÿ£ÿπÿ∂ÿßÿ°."},
{icon:"7Ô∏è‚É£",text:"51-150 ÿπÿ∂Ÿà ‚Üê 7 ÿ£ÿπÿ∂ÿßÿ°",detail:"ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿπÿØÿØ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ ŸÖŸÜ 51 ÿ•ŸÑŸâ 150 ÿπÿ∂Ÿàÿå ÿ™ÿ™ŸÉŸàŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÖŸÜ 7 ÿ£ÿπÿ∂ÿßÿ°."},
{icon:"9Ô∏è‚É£",text:"151-250 ÿπÿ∂Ÿà ‚Üê 9 ÿ£ÿπÿ∂ÿßÿ°",detail:"ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿπÿØÿØ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ ŸÖŸÜ 151 ÿ•ŸÑŸâ 250 ÿπÿ∂Ÿàÿå ÿ™ÿ™ŸÉŸàŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÖŸÜ 9 ÿ£ÿπÿ∂ÿßÿ°."},
{icon:"üîü",text:"ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 250 ‚Üê 11 ÿπÿ∂Ÿà",detail:"ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿπÿØÿØ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 250 ÿπÿ∂Ÿàÿå ÿ™ÿ™ŸÉŸàŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÖŸÜ 11 ÿπÿ∂ŸàÿßŸã."}
]},
{title:"ÿßŸÑŸÖŸÜÿßÿµÿ®",icon:"‚≠ê",items:[
{icon:"üëë",text:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥: Ÿäÿ±ÿ£ÿ≥ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ŸàŸäŸÖÿ´ŸÑ ÿßŸÑÿ¨ÿßŸÑŸäÿ©",detail:"Ÿäÿ±ÿ£ÿ≥ ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸàŸäŸàŸÇÿπ ÿπŸÑŸâ ŸÉÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™Ÿáÿß. ŸäŸÖÿ´ŸÑ ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸÅŸä ŸÉÿßŸÅÿ© ÿßŸÑŸÜÿ¥ÿßÿ∑ÿßÿ™ ŸàÿßŸÑÿßÿ™ÿµÿßŸÑÿßÿ™ ÿßŸÑÿ±ÿ≥ŸÖŸäÿ©. ŸäÿØÿπŸà ÿ•ŸÑŸâ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿßŸÑÿ∑ÿßÿ±ÿ¶ÿ© ŸàŸäŸàŸÇÿπ ÿ£ŸÖÿ± ÿßŸÑÿµÿ±ŸÅ."},
{icon:"ü§ù",text:"ŸÜÿßÿ¶ÿ® ÿßŸÑÿ±ÿ¶Ÿäÿ≥: ŸäŸÜŸàÿ® ÿπŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥",detail:"ŸäŸÇŸàŸÖ ÿ®ŸÖŸáÿßŸÖ ÿßŸÑÿ±ÿ¶Ÿäÿ≥ ŸÅŸä ÿ≠ÿßŸÑÿ© ÿ∫Ÿäÿßÿ®Ÿá ŸàŸäŸÇŸàŸÖ ÿ®ŸÖÿß Ÿäÿ≥ŸÜÿØ ÿ•ŸÑŸäŸá ŸÖŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥ ÿ£Ÿà ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©."},
{icon:"üìù",text:"ÿ£ŸÖŸäŸÜ ÿßŸÑÿ≥ÿ±: ÿßŸÑŸÖÿ≠ÿßÿ∂ÿ± ŸàÿßŸÑŸàÿ´ÿßÿ¶ŸÇ",detail:"ÿßŸÑÿØÿπŸàÿ© ÿ•ŸÑŸâ ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸàÿßŸÑÿ™ŸÜÿ≥ŸäŸÇ ÿ®ŸäŸÜ ÿ£ÿπÿ∂ÿßÿ¶Ÿáÿß. ÿßŸÑÿßÿ≠ÿ™ŸÅÿßÿ∏ ÿ®ÿÆÿ™ŸÖ ŸàŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸàŸÉÿ™ÿßÿ®ÿ© ŸÖÿ≠ÿßÿ∂ÿ± ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™."},
{icon:"üí∞",text:"ÿ£ŸÖŸäŸÜ ÿßŸÑÿµŸÜÿØŸàŸÇ: ÿßŸÑÿ•ÿ¥ÿ±ÿßŸÅ ÿßŸÑŸÖÿßŸÑŸä",detail:"ÿßŸÑÿ•ÿ¥ÿ±ÿßŸÅ ÿßŸÑÿ™ÿßŸÖ ÿπŸÑŸâ ŸÉÿßŸÅÿ© ÿßŸÑÿ£ŸÖŸàÿ± ÿßŸÑŸÖÿßŸÑŸäÿ©. ÿ¨ŸÖÿπ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™ ŸàÿßŸÑŸàÿßÿ±ÿØÿßÿ™ Ÿàÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸäÿ© ÿ®ÿ¥ŸÉŸÑ ÿØŸàÿ±Ÿä."}
]},
{title:"ÿ≥ŸÇŸàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ©",icon:"‚ö†Ô∏è",items:[
{icon:"‚ùå",text:"ÿßŸÑÿ™ÿ∫Ÿäÿ® 3 ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿ®ÿØŸàŸÜ ÿπÿ∞ÿ±",detail:"ÿ™ÿ≥ŸÇÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ÿπŸÜ ÿπÿ∂Ÿà ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿßŸÑÿ™ÿ∫Ÿäÿ® ÿ®ÿØŸàŸÜ ÿπÿ∞ÿ± ŸÖŸÇÿ®ŸàŸÑ ÿπŸÜ ÿ´ŸÑÿßÿ´ ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©."},
{icon:"‚úàÔ∏è",text:"ÿßŸÑÿ≥ŸÅÿ± ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 3 ÿ£ÿ¥Ÿáÿ±",detail:"ÿ™ÿ≥ŸÇÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿßŸÑÿ≥ŸÅÿ± ÿÆÿßÿ±ÿ¨ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸÑŸÖÿØÿ© ÿ´ŸÑÿßÿ´ÿ© ÿ£ÿ¥Ÿáÿ± ŸÖÿ™ŸàÿßÿµŸÑÿ©."},
{icon:"üö´",text:"ÿßŸÑÿ•ÿ≥ÿßÿ°ÿ© ŸÑÿ≥ŸÖÿπÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ©",detail:"ÿ™ÿ≥ŸÇÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ÿ•ÿ∞ÿß ÿ´ÿ®ÿ™ ÿ£ŸÜ ÿßŸÑÿπÿ∂Ÿà ÿ£ÿ≥ÿßÿ° ÿ•ŸÑŸâ ÿ≥ŸÖÿπÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿ£Ÿà ŸÇÿµŸëÿ± ŸÅŸä ÿ£ÿØÿßÿ° ŸÖŸáÿßŸÖŸá."}
]}
]},
elections:{icon:"üó≥Ô∏è",title:"ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ±ÿßÿ®ÿπ - ÿßŸÑŸÖŸàÿßÿØ 17-20",color:"node-blue",sections:[
{title:"ÿ•ÿ¨ÿ±ÿßÿ° ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™",icon:"üìä",items:[
{icon:"üîí",text:"ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿπ ÿßŸÑÿ≥ÿ±Ÿä",detail:"ÿ™Ÿèÿ¨ÿ±Ÿâ ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®ÿßÿ™ ÿ®ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿπ ÿßŸÑÿ≥ÿ±Ÿä ŸÑÿ∂ŸÖÿßŸÜ ÿ≠ÿ±Ÿäÿ© ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± Ÿàÿ≥ÿ±Ÿäÿ© ÿßŸÑÿ™ÿµŸàŸäÿ™."},
{icon:"üëÅÔ∏è",text:"ŸÅÿ±ÿ≤ ÿßŸÑÿ£ÿµŸàÿßÿ™ ÿπŸÑŸÜÿßŸã",detail:"Ÿäÿ™ŸÖ ŸÅÿ±ÿ≤ ÿßŸÑÿ£ÿµŸàÿßÿ™ ÿπŸÑŸÜÿßŸã ÿ£ŸÖÿßŸÖ ÿßŸÑÿ¨ŸÖŸäÿπ ŸÑÿ∂ŸÖÿßŸÜ ÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ© ŸàÿßŸÑŸÜÿ≤ÿßŸáÿ©."},
{icon:"üèÜ",text:"ÿßŸÑŸÅÿßÿ¶ÿ≤ŸàŸÜ ÿ®ÿ£ÿπŸÑŸâ ÿßŸÑÿ£ÿµŸàÿßÿ™",detail:"ÿ™ÿ™ŸÉŸàŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÖŸÜ ÿßŸÑŸÖÿ±ÿ¥ÿ≠ŸäŸÜ ÿßŸÑÿ≠ÿßÿµŸÑŸäŸÜ ÿπŸÑŸâ ÿ£ÿπŸÑŸâ ÿßŸÑÿ£ÿµŸàÿßÿ™ ÿ™ÿØÿ±Ÿäÿ¨ŸäÿßŸã."}
]},
{title:"ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿ™ÿ±ÿ¥ÿ≠",icon:"üìã",items:[
{icon:"‚è∞",text:"ŸÖÿ±Ÿàÿ± 6 ÿ¥ŸáŸàÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ",detail:"ŸÑŸÉŸÑ ÿπÿ∂Ÿà ŸÅÿßÿπŸÑ ÿßŸÑÿ≠ŸÇ ŸÅŸä ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ® ŸàÿßŸÑÿ™ÿ±ÿ¥ÿ≠ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ®ÿ¥ÿ±ÿ∑ ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÇÿØ ŸÖÿ± 6 ÿ¥ŸáŸàÿ± ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿ™ÿ≥ÿ¨ŸäŸÑŸá."},
{icon:"üîû",text:"ÿ•ÿ™ŸÖÿßŸÖ 18 ÿπÿßŸÖÿßŸã",detail:"Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÉŸÑ ŸÖŸÜ ÿßŸÑŸÜÿßÿÆÿ® ŸàÿßŸÑŸÖÿ±ÿ¥ÿ≠ ŸÇÿØ ÿ£ÿ™ŸÖ 18 ÿπÿßŸÖÿßŸã ÿπŸÜÿØ ŸäŸàŸÖ ÿßŸÑÿßŸÜÿ™ÿÆÿßÿ®."},
{icon:"‚úÖ",text:"ÿ™ÿ≥ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™",detail:"Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÜÿ∑ÿ®ŸÇ ÿ®ŸÜŸàÿØ ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿπÿ∂ŸàŸäÿ© ÿπŸÑŸâ ŸÉŸÑ ŸÖŸÜ ÿßŸÑŸÜÿßÿÆÿ® ŸàÿßŸÑŸÖÿ±ÿ¥ÿ≠ ÿ®ŸÖÿß ŸÅŸäŸáÿß ÿ™ÿ≥ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™."}
]}
]},
conferences:{icon:"üèõÔ∏è",title:"ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±ÿßÿ™",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿÆÿßŸÖÿ≥ - ÿßŸÑŸÖŸàÿßÿØ 21-35",color:"node-purple",sections:[
{title:"ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿπÿßŸÖ",icon:"üé§",items:[
{icon:"üìÖ",text:"ŸäÿπŸÇÿØ ÿ≥ŸÜŸàŸäÿßŸã ÿ®ÿØÿπŸàÿ© ŸÖŸÜ ÿßŸÑŸáŸäÿ¶ÿ©",detail:"Ÿäÿ™ÿ£ŸÑŸÅ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿπÿßŸÖ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿ¨ÿßŸÑŸäÿ©ÿå ŸàŸäŸèÿπŸÇÿØ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸàÿ¨Ÿáÿ© ŸÖŸÜ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ŸÇÿ®ŸÑ ŸÖŸàÿπÿØ ÿßŸÑÿßŸÜÿπŸÇÿßÿØ ÿ®ÿ£ÿ≥ÿ®ŸàÿπŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ."},
{icon:"üì¢",text:"ÿßŸÑÿ•ÿπŸÑÿßŸÜ ŸÇÿ®ŸÑ ÿ£ÿ≥ÿ®ŸàÿπŸäŸÜ",detail:"ÿ™ÿ™ÿ∂ŸÖŸÜ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿ¨ÿØŸàŸÑ ÿ£ÿπŸÖÿßŸÑ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ŸàŸÖŸÉÿßŸÜ Ÿàÿ≤ŸÖÿßŸÜ ÿßŸÑÿßŸÜÿπŸÇÿßÿØ."},
{icon:"üë•",text:"ÿßŸÑŸÜÿµÿßÿ®: ÿ´ŸÑÿ´Ÿä ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ",detail:"Ÿäÿπÿ™ÿ®ÿ± ÿßŸÜÿπŸÇÿßÿØ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ŸÇÿßŸÜŸàŸÜŸäÿßŸã ÿ•ÿ∞ÿß ÿ≠ÿ∂ÿ±Ÿá ÿ´ŸÑÿ´ÿß ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜÿå Ÿàÿ•ÿ∞ÿß ÿ™ÿπÿ∞ÿ± ÿ∞ŸÑŸÉ ŸäÿπŸÇÿØ ÿ®ÿßŸÑŸÜÿµŸÅ ÿ≤ÿßÿ¶ÿØ Ÿàÿßÿ≠ÿØ."}
]},
{title:"ÿßŸÑÿ¨ŸÖÿπŸäÿ© ÿßŸÑÿπŸÖŸàŸÖŸäÿ©",icon:"üè†",items:[
{icon:"üìÜ",text:"ÿ™ŸÜÿπŸÇÿØ ŸÉŸÑ 6 ÿ¥ŸáŸàÿ±",detail:"ÿ™ŸÜÿπŸÇÿØ ÿßŸÑÿ¨ŸÖÿπŸäÿ© ÿßŸÑÿπŸÖŸàŸÖŸäÿ© ŸÖÿ±ÿ© ŸÉŸÑ 6 ÿ¥ŸáŸàÿ± ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑÿå Ÿàÿ™ÿ™ÿ£ŸÑŸÅ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÖÿ≥ÿØÿØŸäŸÜ ŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™ŸáŸÖ."},
{icon:"‚úÖ",text:"ÿßŸÑŸÜÿµÿßÿ®: ÿßŸÑŸÜÿµŸÅ ÿ≤ÿßÿ¶ÿØ Ÿàÿßÿ≠ÿØ",detail:"Ÿäÿπÿ™ÿ®ÿ± ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπ ŸÇÿßŸÜŸàŸÜŸäÿßŸã ÿ•ÿ∞ÿß ÿ≠ÿ∂ÿ±Ÿá ÿßŸÑŸÜÿµŸÅ ÿ≤ÿßÿ¶ÿØ Ÿàÿßÿ≠ÿØ ŸÖŸÜ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿπÿßŸÖŸÑŸäŸÜÿå Ÿàÿ•ÿ∞ÿß ÿ™ÿπÿ∞ÿ± ÿ∞ŸÑŸÉ ŸäÿπŸÇÿØ ÿ®ÿ´ŸÑÿ´ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°."}
]},
{title:"ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™",icon:"‚úîÔ∏è",items:[
{icon:"üìä",text:"ÿßŸÑÿ£ÿ∫ŸÑÿ®Ÿäÿ© ÿßŸÑŸÜÿ≥ÿ®Ÿäÿ© ŸÑŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿπÿßÿØŸä",detail:"ÿ™Ÿèÿ™ÿÆÿ∞ ŸÇÿ±ÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿ®ÿßŸÑÿ£ÿ∫ŸÑÿ®Ÿäÿ© ÿßŸÑŸÜÿ≥ÿ®Ÿäÿ© ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿ≠ÿßÿ∂ÿ±ŸäŸÜ ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ ŸÅŸäŸÖÿß ŸäÿÆÿµ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿπŸÑŸâ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™."},
{icon:"‚öñÔ∏è",text:"ÿ´ŸÑÿ´Ÿä ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ŸÑÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ",detail:"ÿ™Ÿèÿ™ÿÆÿ∞ ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™ ÿ®ÿ£ÿ∫ŸÑÿ®Ÿäÿ© ÿ´ŸÑÿ´Ÿä ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿ≠ÿßÿ∂ÿ±ŸäŸÜ ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ ŸÅŸäŸÖÿß Ÿäÿ™ÿπŸÑŸÇ ÿ®ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä ÿ£Ÿà ŸÜŸÇÿ∂ ŸÇÿ±ÿßÿ± ŸÖÿ§ÿ™ŸÖÿ± ÿ≥ÿßÿ®ŸÇ."}
]}
]},
finance:{icon:"üí∞",title:"ÿßŸÑŸÖÿßŸÑŸäÿ©",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ≥ÿßÿ®ÿπ",color:"node-teal",sections:[
{title:"ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©",icon:"üíµ",items:[
{icon:"üí≥",text:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ® ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",detail:"ÿ™ÿ™ŸÉŸàŸÜ ŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸÖŸÜ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿßŸÜÿ™ÿ≥ÿßÿ® ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ≥ŸÜŸàŸä ÿßŸÑÿ∞Ÿä ÿ™ÿ≠ÿØÿØŸá ÿßŸÑÿ¨ŸÖÿπŸäÿ© ÿßŸÑÿπÿßŸÖÿ©."},
{icon:"üéÅ",text:"ÿßŸÑÿ™ÿ®ÿ±ÿπÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ¥ÿ±Ÿàÿ∑ÿ©",detail:"ÿßŸÑŸÖÿ≥ÿßÿπÿØÿßÿ™ ŸàÿßŸÑÿ™ÿ®ÿ±ÿπÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ¥ÿ±Ÿàÿ∑ÿ© ŸÖŸÜ ÿßŸÑÿ£ŸÅÿ±ÿßÿØ ŸàÿßŸÑŸÖÿ§ÿ≥ÿ≥ÿßÿ™ ÿßŸÑÿØÿßÿπŸÖÿ©."},
{icon:"üé™",text:"ÿØÿÆŸÑ ÿßŸÑŸÜÿ¥ÿßÿ∑ÿßÿ™",detail:"ÿØÿÆŸÑ ÿßŸÑŸÜÿ¥ÿßÿ∑ÿßÿ™ ŸàÿßŸÑŸÅÿπÿßŸÑŸäÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÇŸàŸÖ ÿ®Ÿáÿß ÿßŸÑÿ¨ÿßŸÑŸäÿ©."}
]},
{title:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ŸÖŸàÿßŸÑ",icon:"üè¶",items:[
{icon:"üèõÔ∏è",text:"ÿ™ŸàÿØÿπ ŸÅŸä ÿßŸÑÿ®ŸÜŸÉ ÿ®ÿßÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÑŸäÿ©",detail:"ÿ™ŸàÿØÿπ ÿ£ŸÖŸàÿßŸÑ ÿßŸÑÿ¨ÿßŸÑŸäÿ© ŸÅŸä ÿßŸÑÿ®ŸÜŸÉ ÿ®ÿßÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÑŸäÿ© Ÿàÿ™ÿÆÿ∂ÿπ ŸÑŸÑŸÇŸàÿßŸÜŸäŸÜ ŸàÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®Ÿäÿ© ÿßŸÑŸÜÿ±ŸàŸäÿ¨Ÿäÿ©."},
{icon:"üëî",text:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥ Ÿàÿ£ŸÖŸäŸÜ ÿßŸÑÿµŸÜÿØŸàŸÇ ŸÖÿ≥ÿ§ŸàŸÑÿßŸÜ",detail:"ŸäŸÉŸàŸÜ ÿ±ÿ¶Ÿäÿ≥ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© Ÿàÿ£ŸÖŸäŸÜ ÿßŸÑÿµŸÜÿØŸàŸÇ ŸáŸÖÿß ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäŸÜ ÿπŸÜ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™ ÿßŸÑÿ®ŸÜŸÉŸäÿ©."}
]},
{title:"ÿßŸÑÿ±ŸÇÿßÿ®ÿ©",icon:"üîç",items:[
{icon:"‚úÖ",text:"ŸÖÿØŸÇŸÇ ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÇÿßŸÜŸàŸÜŸä ŸÖÿπÿ™ŸÖÿØ",detail:"ÿ™ŸÑÿ™ÿ≤ŸÖ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ®ÿ™ŸÇÿØŸäŸÖ ÿ™ŸàÿµŸäÿ© ÿ®ÿ™ÿ±ÿ¥Ÿäÿ≠ ŸÖÿØŸÇŸÇ ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÇÿßŸÜŸàŸÜŸä ŸÖÿπÿ™ŸÖÿØ ŸÖŸÜ ÿßŸÑÿØŸàŸÑÿ©."},
{icon:"üìã",text:"ÿ™ÿØŸÇŸäŸÇ ŸÇÿ®ŸÑ ÿπÿ±ÿ∂Ÿáÿß ÿπŸÑŸâ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ±",detail:"ŸäŸÇŸàŸÖ ÿßŸÑŸÖÿØŸÇŸÇ ÿ®ÿ™ÿØŸÇŸäŸÇ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ© ŸÑŸÑÿ≥ŸÜÿ© ÿßŸÑŸÖÿßŸÑŸäÿ© ÿßŸÑŸÖŸÜÿ™ŸáŸäÿ© ŸÇÿ®ŸÑ ÿπÿ±ÿ∂Ÿáÿß ÿπŸÑŸâ ÿßŸÑŸÖÿ§ÿ™ŸÖÿ± ÿßŸÑÿπÿßŸÖ."}
]}
]},
school:{icon:"üìö",title:"ÿßŸÑŸÖÿØÿ±ÿ≥ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",subtitle:"ÿßŸÑŸÖÿßÿØÿ© 39",color:"node-teal",sections:[
{title:"ÿ£ŸÇÿ≥ÿßŸÖ ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©",icon:"üè´",items:[
{icon:"üìñ",text:"ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ£ŸÉÿßÿØŸäŸÖŸä: ÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",detail:"ÿ™ŸàŸÅŸäÿ± ÿ™ÿπŸÑŸäŸÖ ÿ£ŸÉÿßÿØŸäŸÖŸä ÿ¥ÿßŸÖŸÑ ŸÑÿ™ÿ∑ŸàŸäÿ± ŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ŸàÿßŸÑŸÉÿ™ÿßÿ®ÿ© ŸàÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ŸàÿßŸÑÿ™ÿ≠ÿØÿ´ ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©."},
{icon:"üé≠",text:"ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿ±ÿßÿ´: ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿßÿ´",detail:"ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿßÿ´ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä ŸàŸÜŸÇŸÑŸá ÿ•ŸÑŸâ ÿßŸÑÿ£ÿ¨ŸäÿßŸÑ ÿßŸÑÿ¨ÿØŸäÿØÿ© ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ© ÿßŸÑÿ´ŸÇÿßŸÅŸäÿ© ŸàÿßŸÑÿ™ÿ±ÿßÿ´Ÿäÿ©."}
]},
{title:"ÿßŸÑÿ£ŸáÿØÿßŸÅ",icon:"üéØ",items:[
{icon:"‚úçÔ∏è",text:"ÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ŸàÿßŸÑŸÉÿ™ÿßÿ®ÿ©",detail:"ÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿ®ÿ£ÿ≥ÿßŸÑŸäÿ® ŸÖÿ®ÿ™ŸÉÿ±ÿ© ŸÖÿπ ÿ•ÿØŸÖÿßÿ¨ ÿßŸÑÿ´ŸÇÿßŸÅÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸÅŸä ÿßŸÑŸÖŸÜÿßŸáÿ¨ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©."},
{icon:"üáµüá∏",text:"ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿßŸÑŸàÿ∑ŸÜ",detail:"ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿ∑ŸÑÿßÿ® ÿ®ÿßŸÑÿ´ŸÇÿßŸÅÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© Ÿàÿ™ÿ±ÿßÿ´Ÿáÿß Ÿàÿ™ÿπÿ≤Ÿäÿ≤ ÿßÿ±ÿ™ÿ®ÿßÿ∑ŸáŸÖ ÿ®Ÿàÿ∑ŸÜŸáŸÖ."},
{icon:"‚ù§Ô∏è",text:"ÿ∫ÿ±ÿ≥ ÿßŸÑŸÇŸäŸÖ ÿßŸÑŸàÿ∑ŸÜŸäÿ©",detail:"ÿ∫ÿ±ÿ≥ ÿßŸÑŸÇŸäŸÖ ÿßŸÑŸàÿ∑ŸÜŸäÿ© Ÿàÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑŸàÿπŸä ÿ®ÿßŸÑŸÇÿ∂Ÿäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÑÿØŸâ ÿßŸÑÿ£ÿ¨ŸäÿßŸÑ ÿßŸÑÿ¨ÿØŸäÿØÿ©."}
]},
{title:"ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©",icon:"üé®",items:[
{icon:"üíÉ",text:"ŸÅÿ±ŸÇÿ© ÿØÿ®ŸÉÿ© ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©",detail:"ŸÅÿ±ŸÇÿ© ÿØÿ®ŸÉÿ© ÿ™ÿ∂ŸÖ ŸÖÿ¨ŸÖŸàÿπÿ™ŸäŸÜ (ÿ¥ÿ®ÿßŸÜ Ÿàÿ¥ÿßÿ®ÿßÿ™) ŸÖÿπ ŸÖÿ±ÿßÿπÿßÿ© ÿßŸÑŸÇŸäŸÖ ŸàÿßŸÑÿπÿßÿØÿßÿ™ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©."},
{icon:"üëó",text:"ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ£ÿ≤Ÿäÿßÿ° ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©",detail:"ÿ™ŸÜÿ∏ŸäŸÖ ŸÅÿπÿßŸÑŸäÿßÿ™ ŸÖÿ´ŸÑ ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ£ÿ≤Ÿäÿßÿ° ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ© ŸàÿßŸÑŸÖŸáÿ±ÿ¨ÿßŸÜÿßÿ™ ÿßŸÑÿ´ŸÇÿßŸÅŸäÿ©."},
{icon:"üéµ",text:"ÿßŸÑÿ≠ÿ±ŸÅ ÿßŸÑŸäÿØŸàŸäÿ© ŸàÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ",detail:"ÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ≠ÿ±ŸÅ ÿßŸÑŸäÿØŸàŸäÿ© ŸàÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©."}
]}
]},
penalties:{icon:"‚öñÔ∏è",title:"ŸÜÿ∏ÿßŸÖ ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™",subtitle:"ÿßŸÑÿ®ÿßÿ® ÿßŸÑÿ´ÿßŸÖŸÜ - ÿßŸÑŸÖŸàÿßÿØ 54-56",color:"node-gold",sections:[
{title:"ÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™",icon:"üìä",items:[
{icon:"1Ô∏è‚É£",text:"ÿßŸÑÿ™ŸÜÿ®ŸäŸá",detail:"ÿ£ŸàŸÑ ÿØÿ±ÿ¨ÿ© ŸÖŸÜ ÿßŸÑÿπŸÇŸàÿ®ÿßÿ™ÿå ÿ™ŸÜÿ®ŸäŸá ÿ¥ŸÅŸáŸä ÿ£Ÿà ŸÉÿ™ÿßÿ®Ÿä ŸÑŸÑÿπÿ∂Ÿà ÿßŸÑŸÖÿÆÿßŸÑŸÅ."},
{icon:"2Ô∏è‚É£",text:"ÿßŸÑŸÑŸàŸÖ",detail:"ÿ™Ÿàÿ¨ŸäŸá ŸÑŸàŸÖ ÿ±ÿ≥ŸÖŸä ŸÑŸÑÿπÿ∂Ÿà Ÿàÿ™ÿ≥ÿ¨ŸäŸÑŸá ŸÅŸä ŸÖÿ≠ÿßÿ∂ÿ± ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™."},
{icon:"3Ô∏è‚É£",text:"ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±",detail:"ÿ•ŸÜÿ∞ÿßÿ± ÿ±ÿ≥ŸÖŸä ŸÉÿ™ÿßÿ®Ÿä ŸäŸèÿπŸÑŸÖ ÿßŸÑÿπÿ∂Ÿà ÿ®ÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑŸÖÿÆÿßŸÑŸÅÿ© ŸàÿπŸàÿßŸÇÿ® ÿ™ŸÉÿ±ÿßÿ±Ÿáÿß."},
{icon:"4Ô∏è‚É£",text:"ÿ™ÿ¨ŸÖŸäÿØ ÿßŸÑÿπÿ∂ŸàŸäÿ©",detail:"ÿ™ÿ¨ŸÖŸäÿØ ÿπÿ∂ŸàŸäÿ© ÿßŸÑÿπÿ∂Ÿà ŸÑŸÅÿ™ÿ±ÿ© ÿ≤ŸÖŸÜŸäÿ© ŸÖÿ≠ÿØÿØÿ© ŸäŸÅŸÇÿØ ÿÆŸÑÿßŸÑŸáÿß ŸÉŸÑ ÿ≠ŸÇŸàŸÇŸá."},
{icon:"5Ô∏è‚É£",text:"ÿßŸÑŸÅÿµŸÑ (ÿ®ÿ´ŸÑÿ´Ÿä ÿßŸÑÿ£ÿµŸàÿßÿ™)",detail:"ŸÅÿµŸÑ ÿßŸÑÿπÿ∂Ÿà ŸÜŸáÿßÿ¶ŸäÿßŸã ŸÖŸÜ ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿ®ŸÇÿ±ÿßÿ± ŸäÿµŸàÿ™ ÿπŸÑŸäŸá ÿ´ŸÑÿ´Ÿä ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©."}
]},
{title:"ÿ∂Ÿàÿßÿ®ÿ∑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",icon:"üìã",items:[
{icon:"üîç",text:"ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿÆŸÑŸÑ ÿ£ŸàŸÑÿßŸã",detail:"ŸÇÿ®ŸÑ ÿ•ŸÇÿ±ÿßÿ± ÿ£Ÿä ÿπŸÇŸàÿ®ÿ©ÿå Ÿäÿ¨ÿ® ÿπŸÑŸâ ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ£ŸÜ ÿ™ÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿÆŸÑŸÑ ÿßŸÑÿ≠ÿßÿµŸÑ Ÿàÿ™ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜŸá."},
{icon:"üìû",text:"ÿØÿπŸàÿ© ÿßŸÑÿπÿ∂Ÿà ŸÑŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",detail:"ÿØÿπŸàÿ© ÿßŸÑÿπÿ∂Ÿà ÿßŸÑŸÖÿπŸÜŸä ŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿ®ÿ¥ÿ£ŸÜ ÿßŸÑÿπŸÇŸàÿ®ÿ© ŸàÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ŸÑÿØŸÅÿßÿπŸá."},
{icon:"üö™",text:"ŸÜŸÇÿßÿ¥ ŸÅŸä ÿßÿ¨ÿ™ŸÖÿßÿπ ŸÖÿ∫ŸÑŸÇ",detail:"Ÿäÿ™ŸÖ ŸÜŸÇÿßÿ¥ ÿ£Ÿä ÿπŸÇŸàÿ®ÿ© ŸÅŸä ÿ•ÿ∑ÿßÿ± ÿßÿ¨ÿ™ŸÖÿßÿπ ŸÖÿ∫ŸÑŸÇ ŸÑŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ©."},
{icon:"üìß",text:"ÿ•ÿ®ŸÑÿßÿ∫ ÿßŸÑÿπÿ∂Ÿà ÿ®ÿßŸÑŸÇÿ±ÿßÿ± ÿÆÿ∑ŸäÿßŸã",detail:"ÿßÿ≥ÿ™ÿØÿπÿßÿ° ÿßŸÑÿπÿ∂Ÿà ÿßŸÑŸÖÿπŸÜŸä Ÿàÿßÿ∑ŸÑÿßÿπŸá ÿπŸÑŸâ ÿßŸÑÿπŸÇŸàÿ®ÿ©ÿå Ÿàÿ•ÿ∞ÿß ÿ±ŸÅÿ∂ Ÿäÿ™ŸÖ ÿ•ÿπŸÑÿßŸÖŸá ÿ®ÿßŸÑŸÇÿ±ÿßÿ± ÿ®ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÉÿ™Ÿàÿ®ÿ©."}
]}
]}
};
var nodeAngles=[{key:'goals',angle:0},{key:'membership',angle:45},{key:'admin',angle:90},{key:'elections',angle:135},{key:'conferences',angle:180},{key:'finance',angle:225},{key:'school',angle:270},{key:'penalties',angle:315}];
var expandedBylawNode=null;
function loadBylaws(){positionBylawNodes();if(isAdmin){document.getElementById("btnEditBylaws").classList.remove("hidden");}else{document.getElementById("btnEditBylaws").classList.add("hidden");}}
function positionBylawNodes(){
var container=document.getElementById("bylawsContainer");
if(!container)return;
var rect=container.getBoundingClientRect();
var centerX=rect.width/2;
var centerY=rect.height/2;
var radius=Math.min(rect.width,rect.height)*0.35;
var svg=document.getElementById("bylawsSvg");
var defs=svg.querySelector("defs");
svg.innerHTML="";
svg.appendChild(defs);
nodeAngles.forEach(function(item,index){
var node=document.getElementById("node-"+item.key);
if(!node)return;
var angleRad=(item.angle-90)*Math.PI/180;
var x=centerX+radius*Math.cos(angleRad);
var y=centerY+radius*Math.sin(angleRad);
node.style.left=(x-50)+"px";
node.style.top=(y-50)+"px";
var line=document.createElementNS("http://www.w3.org/2000/svg","line");
line.setAttribute("x1",centerX);
line.setAttribute("y1",centerY);
line.setAttribute("x2",x);
line.setAttribute("y2",y);
line.setAttribute("stroke","url(#grad"+(index+1)+")");
line.setAttribute("class","connection-line");
line.setAttribute("id","line-"+item.key);
svg.appendChild(line);
});
}
window.expandBylawNode=function(key){
console.log("expandBylawNode called with key:",key);
if(expandedBylawNode===key)return;
expandedBylawNode=key;
var data=bylawsData[key];
console.log("data:",data);
if(!data){console.log("No data for key:",key);return;}
document.getElementById("panelIcon").textContent=data.icon;
document.getElementById("panelTitle").textContent=data.title;
document.getElementById("panelSubtitle").textContent=data.subtitle;
var panel=document.getElementById("bylawsPanel");
var nodeColors={"node-green":"linear-gradient(135deg,#009736,#006d28)","node-red":"linear-gradient(135deg,#ce1126,#9a0d1e)","node-orange":"linear-gradient(135deg,#e67e22,#d35400)","node-blue":"linear-gradient(135deg,#3498db,#2980b9)","node-purple":"linear-gradient(135deg,#9b59b6,#7d3c98)","node-teal":"linear-gradient(135deg,#1abc9c,#16a085)","node-gold":"linear-gradient(135deg,#f39c12,#d68910)"};
panel.style.background=nodeColors[data.color]||nodeColors["node-orange"];
var contentHTML="";
data.sections.forEach(function(section){
contentHTML+='<div class="bylaws-section"><h4><span>'+section.icon+'</span> '+section.title+'</h4><ul class="bylaws-list">';
section.items.forEach(function(item){
var detailHtml=item.detail?'<div class="bylaws-item-detail">'+item.detail+'</div>':'';
var arrowHtml=item.detail?'<span class="bylaws-item-arrow">‚ñº</span>':'';
contentHTML+='<li onclick="this.classList.toggle(\'expanded\')"><div class="bylaws-item-header"><span class="item-icon">'+item.icon+'</span><span class="item-text">'+item.text+'</span>'+arrowHtml+'</div>'+detailHtml+'</li>';
});
contentHTML+='</ul></div>';
});
document.getElementById("panelContent").innerHTML=contentHTML;
document.getElementById("bylawsOverlay").classList.add("show");
panel.classList.add("show");
document.getElementById("bylawsCenter").classList.add("shrink");
nodeAngles.forEach(function(item){
var node=document.getElementById("node-"+item.key);
var line=document.getElementById("line-"+item.key);
if(item.key!==key){if(node)node.classList.add("shrink");if(line)line.classList.add("faded");}
});
};
window.closeBylawPanel=function(){
if(!expandedBylawNode)return;
expandedBylawNode=null;
document.getElementById("bylawsOverlay").classList.remove("show");
document.getElementById("bylawsPanel").classList.remove("show");
document.getElementById("bylawsCenter").classList.remove("shrink");
nodeAngles.forEach(function(item){
var node=document.getElementById("node-"+item.key);
var line=document.getElementById("line-"+item.key);
if(node)node.classList.remove("shrink");
if(line)line.classList.remove("faded");
});
}
window.toggleBylawsEdit=function(){
document.getElementById("bylawsEditSection").classList.toggle("show");
loadBylawChaptersSelect();
}
function loadBylawChaptersSelect(){
var select=document.getElementById("editBylawChapter");
if(!select)return;
select.innerHTML="<option value=''>ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßÿ®...</option>";
var keys=Object.keys(bylawsData);
keys.forEach(function(key){
var ch=bylawsData[key];
select.innerHTML+="<option value='"+key+"'>"+ch.icon+" "+ch.title+"</option>";
});
}
window.loadBylawSections=function(){
var chKey=document.getElementById("editBylawChapter").value;
var select=document.getElementById("editBylawSection");
select.innerHTML="<option value=''>ÿßÿÆÿ™ÿ± ÿßŸÑŸÇÿ≥ŸÖ...</option>";
document.getElementById("editBylawSectionTitle").value="";
document.getElementById("editBylawContent").value="";
if(!chKey||!bylawsData[chKey])return;
var chapter=bylawsData[chKey];
chapter.sections.forEach(function(s,idx){
select.innerHTML+="<option value='"+idx+"'>"+s.icon+" "+s.title+"</option>";
});
}
window.loadBylawContent=function(){
var chKey=document.getElementById("editBylawChapter").value;
var sIdx=document.getElementById("editBylawSection").value;
if(!chKey||sIdx===""||!bylawsData[chKey])return;
var section=bylawsData[chKey].sections[parseInt(sIdx)];
if(!section)return;
document.getElementById("editBylawSectionTitle").value=section.title;
var itemsText=section.items.map(function(item){
return item.text+(item.detail?" | "+item.detail:"");
}).join("\n");
document.getElementById("editBylawContent").value=itemsText;
}
window.saveBylawEdit=function(){
var chKey=document.getElementById("editBylawChapter").value;
var sIdx=document.getElementById("editBylawSection").value;
var title=document.getElementById("editBylawSectionTitle").value.trim();
var content=document.getElementById("editBylawContent").value.trim();
if(!chKey||sIdx===""||!title||!content){toast("ÿ£ŸÉŸÖŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ",true);return;}
var section=bylawsData[chKey].sections[parseInt(sIdx)];
if(!section)return;
section.title=title;
section.items=content.split("\n").filter(function(line){return line.trim();}).map(function(line){
var parts=line.split("|");
return {icon:"üìå",text:parts[0].trim(),detail:parts[1]?parts[1].trim():""};
});
toast("ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ‚úÖ");
}
window.addNewBylawSection=function(){
var chKey=document.getElementById("editBylawChapter").value;
var title=document.getElementById("editBylawSectionTitle").value.trim();
var content=document.getElementById("editBylawContent").value.trim();
if(!chKey){toast("ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßÿ® ÿ£ŸàŸÑÿßŸã",true);return;}
if(!title){toast("ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÇÿ≥ŸÖ",true);return;}
bylawsData[chKey].sections.push({
title:title,
icon:"üìå",
items:content?content.split("\n").filter(function(line){return line.trim();}).map(function(line){
var parts=line.split("|");
return {icon:"üìå",text:parts[0].trim(),detail:parts[1]?parts[1].trim():""};
}):[]
});
loadBylawSections();
toast("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÇÿ≥ŸÖ ‚úÖ");
}
window.deleteBylawSection=function(){
var chKey=document.getElementById("editBylawChapter").value;
var sIdx=document.getElementById("editBylawSection").value;
if(!chKey||sIdx===""){toast("ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßÿ® ŸàÿßŸÑŸÇÿ≥ŸÖ",true);return;}
if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÇÿ≥ŸÖÿü"))return;
bylawsData[chKey].sections.splice(parseInt(sIdx),1);
loadBylawSections();
document.getElementById("editBylawSectionTitle").value="";
document.getElementById("editBylawContent").value="";
toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ");
}
function loadOrgName(){
var nameAr=appData.orgName?appData.orgName.ar:"ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© ŸÅŸä ÿ±Ÿàÿ∫ÿßŸÑÿßŸÜÿØ";
var nameEn=appData.orgName?appData.orgName.en:"Det palestinske samfunn i Rogaland";
document.querySelector(".org-name").textContent=nameAr;
document.querySelector(".org-sub").textContent=nameEn;
document.getElementById("orgNameAr").value=nameAr;
document.getElementById("orgNameEn").value=nameEn;
var headerH1=document.querySelector("#pageHome .header h1");
if(headerH1)headerH1.innerHTML="üáµüá∏ "+nameAr;
var sheetTitle=document.getElementById("sheetTitle");
if(sheetTitle)sheetTitle.textContent=nameAr;
var sheetSubtitle=document.getElementById("sheetSubtitle");
if(sheetSubtitle)sheetSubtitle.textContent=nameEn+" - ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°";
var invTitle=document.querySelector(".inv-title");
if(invTitle&&!invTitle.dataset.edited)invTitle.textContent=nameAr;
document.title=nameAr;
}
window.clearSheet=function(){if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿü")){appData.sheet=[];save();loadSheet();toast("ÿ™ŸÖ ÿßŸÑŸÖÿ≥ÿ≠");}};
window.downloadSheetPDF=function(){
var container=document.getElementById("regSheetContainer");
if(typeof html2canvas!=="undefined"&&typeof window.jspdf!=="undefined"){
toast("ÿ¨ÿßÿ±Ÿä ÿ•ŸÜÿ¥ÿßÿ° PDF...");
html2canvas(container,{scale:2,useCORS:true,backgroundColor:"#fff",scrollX:0,scrollY:0,width:container.scrollWidth,height:container.scrollHeight}).then(function(canvas){
var imgData=canvas.toDataURL("image/png");
var pdf=new window.jspdf.jsPDF({orientation:"landscape",unit:"mm",format:"a3"});
var pdfWidth=pdf.internal.pageSize.getWidth();
var pdfHeight=(canvas.height*pdfWidth)/canvas.width;
pdf.addImage(imgData,"PNG",0,0,pdfWidth,pdfHeight);
pdf.save("ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ©_ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ_ÿßŸÑÿ¨ÿßŸÑŸäÿ©_ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©.pdf");
toast("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ PDF ‚úÖ");
});
}else{toast("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÉÿ™ÿ®ÿßÿ™",true);}
};
// ========== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿµŸàŸäÿ™ ==========
function initVotes(){if(!appData.votes)appData.votes=[];}
initVotes();

// Toggle vote type options
window.toggleVoteTypeOptions=function(){
var voteType=document.getElementById("newVoteType").value;
var multiSection=document.getElementById("multipleOptionsSection");
if(voteType==="multiple"){
multiSection.style.display="block";
}else{
multiSection.style.display="none";
}
}

function generateMemberCode(){
var chars="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
var code="";
for(var i=0;i<6;i++)code+=chars.charAt(Math.floor(Math.random()*chars.length));
return code;
}

function ensureMemberCodes(){
if(!appData.members||appData.members.length===0)return;
var changed=false;
appData.members.forEach(function(m){
if(!m.voteCode){m.voteCode=generateMemberCode();changed=true;}
});
if(changed)save();
}

window.regenerateAllCodes=function(){
if(!appData.members||appData.members.length===0){toast("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ£ÿπÿ∂ÿßÿ°",true);return;}
if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ∫ŸäŸäÿ± ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°ÿü\n\nÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ±ŸÖŸàÿ≤ ÿ¨ÿØŸäÿØÿ© ŸàŸäÿ¨ÿ® ÿ•ÿ±ÿ≥ÿßŸÑŸáÿß ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°."))return;

appData.members.forEach(function(m){
m.voteCode=generateMemberCode();
});
save();
loadMembers();
toast("ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿ±ŸÖŸàÿ≤ ‚úÖ");

// ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÖŸàÿ≤ ÿßŸÑÿ¨ÿØŸäÿØÿ©
var html='<div style="max-height:400px;overflow-y:auto;">';
html+='<p style="color:var(--gold);margin-bottom:15px;">üìã ÿßŸÑÿ±ŸÖŸàÿ≤ ÿßŸÑÿ¨ÿØŸäÿØÿ© - ÿßŸÜÿ≥ÿÆŸáÿß Ÿàÿ£ÿ±ÿ≥ŸÑŸáÿß ŸÑŸÑÿ£ÿπÿ∂ÿßÿ°:</p>';
html+='<table style="width:100%;border-collapse:collapse;">';
html+='<tr style="background:var(--green);color:white;"><th style="padding:10px;text-align:right;">ÿßŸÑÿπÿ∂Ÿà</th><th style="padding:10px;text-align:center;">ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑÿ¨ÿØŸäÿØ</th></tr>';
appData.members.forEach(function(m){
html+='<tr style="border-bottom:1px solid var(--border);"><td style="padding:10px;">'+m.name+'</td><td style="padding:10px;text-align:center;font-family:monospace;font-size:1.1rem;color:var(--gold);letter-spacing:2px;">'+m.voteCode+'</td></tr>';
});
html+='</table></div>';
html+='<button class="btn btn-gold" style="margin-top:15px;width:100%;" onclick="copyAllMemberCodes()">üìã ŸÜÿ≥ÿÆ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ±ŸÖŸàÿ≤</button>';
showModal("üîÑ ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©",html);
}

window.copyAllMemberCodes=function(){
var text="ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©\n";
text+="========================\n\n";
appData.members.forEach(function(m){
text+=m.name+": "+m.voteCode+"\n";
});
navigator.clipboard.writeText(text).then(function(){toast("ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ŸÖŸàÿ≤ ‚úÖ");});
}

// Toggle vote type options
document.addEventListener('DOMContentLoaded', function(){
    var sel = document.getElementById('newVoteType');
    if(sel) sel.onchange = function(){
        var div = document.getElementById('multiOptionsDiv');
        if(div) div.style.display = this.value === 'multiple' ? 'block' : 'none';
    };
    
    // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿÆŸÑŸÅŸäÿßÿ™
    var bgSwitcher = document.getElementById('bgSwitcher');
    if(bgSwitcher){
        var bgBtns = bgSwitcher.querySelectorAll('.bg-btn');
        bgBtns.forEach(function(btn){
            btn.addEventListener('click', function(){
                var bgNum = this.getAttribute('data-bg');
                switchBackground(bgNum);
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
                bgBtns.forEach(function(b){b.classList.remove('active');});
                this.classList.add('active');
                
                // ÿ≠ŸÅÿ∏ ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ±
                localStorage.setItem('selectedBg', bgNum);
            });
        });
        
        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏
        var savedBg = localStorage.getItem('selectedBg');
        if(savedBg){
            switchBackground(savedBg);
            bgBtns.forEach(function(b){
                b.classList.remove('active');
                if(b.getAttribute('data-bg') === savedBg) b.classList.add('active');
            });
        }
    }
});

function switchBackground(num){
    var bgs = ['bgAqsa', 'bgPoetry', 'bgDove'];
    bgs.forEach(function(id, index){
        var el = document.getElementById(id);
        if(el){
            if((index + 1) == num){
                el.classList.add('active');
                el.style.display = 'block';
                if(id === 'bgPoetry') startRandomPoetry();
            }else{
                el.classList.remove('active');
                el.style.display = 'none';
            }
        }
    });
}

// ÿ•ÿ∏Ÿáÿßÿ± ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿÆŸÑŸÅŸäÿ© ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑ
function showBgSwitcher(){
    var switcher = document.getElementById('bgSwitcher');
    if(switcher) switcher.style.display = 'flex';
}

// ÿ•ÿÆŸÅÿßÿ° ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿÆŸÑŸÅŸäÿ©
function hideBgSwitcher(){
    var switcher = document.getElementById('bgSwitcher');
    if(switcher) switcher.style.display = 'none';
}

// ÿ£ÿ®Ÿäÿßÿ™ ÿßŸÑÿ¥ÿπÿ± ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©
var poetryLines = [
    {text: 'üáµüá∏ ŸÖŸàÿ∑ŸÜŸä ŸÖŸàÿ∑ŸÜŸä .. ÿßŸÑÿ¨ŸÑÿßŸÑ ŸàÿßŸÑÿ¨ŸÖÿßŸÑ ŸàÿßŸÑÿ≥ŸÜÿßÿ° ŸàÿßŸÑÿ®Ÿáÿßÿ° ŸÅŸä ÿ±ÿ®ÿßŸÉ', color: 'rgba(201,162,39,0.25)'},
    {text: '‚ù§Ô∏è ÿ≥ÿ¨ŸëŸÑ ÿ£ŸÜÿß ÿπÿ±ÿ®Ÿä .. Ÿàÿ±ŸÇŸÖ ÿ®ÿ∑ÿßŸÇÿ™Ÿä ÿÆŸÖÿ≥ŸàŸÜ ÿ£ŸÑŸÅ .. Ÿàÿ£ÿ∑ŸÅÿßŸÑŸä ÿ´ŸÖÿßŸÜŸäÿ© Ÿàÿ™ÿßÿ≥ÿπŸáŸÖ ÿ≥Ÿäÿ£ÿ™Ÿä ÿ®ÿπÿØ ÿµŸäŸÅ', color: 'rgba(206,17,38,0.2)'},
    {text: 'üåø ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ£ÿ±ÿ∂ ŸÖÿß Ÿäÿ≥ÿ™ÿ≠ŸÇ ÿßŸÑÿ≠Ÿäÿßÿ© .. ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ£ÿ±ÿ∂ ÿ≥ŸäÿØÿ© ÿßŸÑÿ£ÿ±ÿ∂ ÿ£ŸÖ ÿßŸÑÿ®ÿØÿßŸäÿßÿ™', color: 'rgba(0,150,57,0.2)'},
    {text: 'üïäÔ∏è ÿ≥ŸÜÿ±ÿ¨ÿπ ŸäŸàŸÖÿßŸã ÿ•ŸÑŸâ ÿ≠ŸäŸëŸÜÿß .. ŸàŸÜÿ∫ÿ±ŸÇ ŸÅŸä ÿØÿßŸÅÿ¶ÿßÿ™ ÿßŸÑŸÖŸÜŸâ .. ÿ≥ŸÜÿ±ÿ¨ÿπ ŸÖŸáŸÖÿß ŸäŸÖÿ± ÿßŸÑÿ≤ŸÖŸÜ', color: 'rgba(255,255,255,0.18)'},
    {text: '‚≠ê ÿ•ÿ∞ÿß ÿßŸÑÿ¥ÿπÿ® ŸäŸàŸÖÿßŸã ÿ£ÿ±ÿßÿØ ÿßŸÑÿ≠Ÿäÿßÿ© .. ŸÅŸÑÿß ÿ®ÿØŸë ÿ£ŸÜ Ÿäÿ≥ÿ™ÿ¨Ÿäÿ® ÿßŸÑŸÇÿØÿ±', color: 'rgba(201,162,39,0.22)'},
    {text: 'üè† Ÿàÿ∑ŸÜŸä Ÿäÿß ÿÆŸäŸÖÿ© ÿ®ŸÑÿß ÿπÿßŸÖŸàÿØ .. ÿ£ÿ≠ŸÖŸäŸÉ ÿ®ÿßŸÑÿØŸÖ Ÿàÿ£ŸÜÿß ŸÖŸàÿ¨ŸàÿØ', color: 'rgba(206,17,38,0.18)'},
    {text: 'üå≥ ÿ£ŸÜÿß ŸÖŸÜ ŸáŸÜÿßŸÉ .. ÿ£ŸÜÿß ŸÖŸÜ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ .. ŸàŸÑŸä ÿ£ŸÖ ÿ™ÿØÿπŸâ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ', color: 'rgba(0,150,57,0.22)'},
    {text: 'üíö ÿ®ŸÑÿßÿØŸä Ÿàÿ•ŸÜ ÿ¨ÿßÿ±ÿ™ ÿπŸÑŸäŸë ÿπÿ≤Ÿäÿ≤ÿ© .. Ÿàÿ£ŸáŸÑŸä Ÿàÿ•ŸÜ ÿ∂ŸÜŸëŸàÿß ÿπŸÑŸäŸë ŸÉÿ±ÿßŸÖ', color: 'rgba(0,150,57,0.2)'},
    {text: 'üîë ŸÖŸÅÿ™ÿßÿ≠ ÿ®Ÿäÿ™Ÿä ŸÑÿß Ÿäÿ≤ÿßŸÑ ÿ®ÿ¨Ÿäÿ®Ÿä .. ŸàŸÖÿßÿ≤ŸÑÿ™ ÿ£ÿ≠ŸÅÿ∏ ÿ±ŸÇŸÖ ÿØÿßÿ±Ÿä ŸÅŸä ŸäÿßŸÅÿß', color: 'rgba(201,162,39,0.2)'},
    {text: 'üïå ÿßŸÑŸÇÿØÿ≥ ÿπÿ±Ÿàÿ≥ ÿπÿ±Ÿàÿ®ÿ™ŸÉŸÖ .. ŸÅŸÑŸÖÿßÿ∞ÿß ÿ£ÿØÿÆŸÑÿ™ŸÖ ŸÉŸÑ ÿ≤ŸÜÿßÿ© ÿßŸÑŸÑŸäŸÑ ÿ•ŸÑŸâ ÿ≠ÿ¨ÿ±ÿ™Ÿáÿß', color: 'rgba(201,162,39,0.25)'},
    {text: 'üáµüá∏ ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÑŸäÿ≥ÿ™ ŸÇÿ∂Ÿäÿ© ŸÑÿßÿ¨ÿ¶ŸäŸÜ .. ŸÅŸÑÿ≥ÿ∑ŸäŸÜ ŸÇÿ∂Ÿäÿ© ÿ¥ÿπÿ® Ÿäÿ±ŸäÿØ ÿ£ÿ±ÿ∂Ÿá', color: 'rgba(206,17,38,0.2)'},
    {text: '‚úä ŸÑŸÜ ŸÜÿ±ÿ≠ŸÑ ÿπŸÜ ÿ£ÿ±ÿ∂ŸÜÿß .. ŸáŸÜÿß ŸàŸÑÿØŸÜÿß ŸàŸáŸÜÿß ÿ≥ŸÜŸÖŸàÿ™ .. ŸàŸáŸÜÿß ÿ≥ŸÜÿ®ŸÜŸä ŸàŸÜÿ®ŸÜŸä', color: 'rgba(255,255,255,0.2)'},
    {text: 'ü´í ÿ≤Ÿäÿ™ŸàŸÜŸÜÿß ŸÑÿß ŸäŸÖŸàÿ™ .. Ÿàÿ£ÿ±ÿ∂ŸÜÿß ŸÑÿß ÿ™ŸÜÿßŸÖ .. ŸàŸÜÿ≠ŸÜ ŸáŸÜÿß ÿ®ÿßŸÇŸàŸÜ', color: 'rgba(0,150,57,0.22)'},
    {text: '‚ù§Ô∏è ŸÅŸä ÿßŸÑŸÇÿØÿ≥ ÿ®ÿßÿ¶ÿπ ÿÆÿ∂ÿßÿ± ŸÖŸÜ ÿßŸÑŸÑÿØ Ÿäÿ±ŸÖŸÖ ÿµŸàÿ±ÿ© ŸàÿßŸÑÿØŸá .. ŸÅŸä ÿßŸÑŸÇÿØÿ≥ ŸÖÿß Ÿäÿ≥ÿ™ÿ≠ŸÇ ÿßŸÑÿ≠Ÿäÿßÿ©', color: 'rgba(206,17,38,0.18)'},
    {text: 'üóùÔ∏è ŸÑŸÜÿß ŸÅŸä ŸÉŸÑ ÿ≤ÿßŸàŸäÿ© ÿ∞ŸÉÿ±Ÿâ .. ŸàŸÑŸÜÿß ŸÅŸä ŸÉŸÑ ÿ¥ÿßÿ±ÿπ ÿ≠ŸÉÿßŸäÿ© .. ŸÅŸÑÿ≥ÿ∑ŸäŸÜ Ÿàÿ∑ŸÜŸÜÿß ÿßŸÑÿ£ÿ®ÿØŸä', color: 'rgba(201,162,39,0.2)'},
    {text: 'üåÖ ÿ≥ŸÜÿπŸàÿØ ÿ•ŸÑŸâ ÿ®Ÿäÿßÿ±ÿßÿ™ ÿßŸÑÿ®ÿ±ÿ™ŸÇÿßŸÑ .. ÿ•ŸÑŸâ ÿ¥Ÿàÿßÿ±ÿπ ŸäÿßŸÅÿß Ÿàÿ£ÿ≤ŸÇÿ© ÿπŸÉÿß', color: 'rgba(255,165,0,0.2)'},
    {text: 'üí™ ŸÜÿ≠ŸÜ ÿ®ÿßŸÇŸàŸÜ ŸáŸÜÿß .. ŸÖÿß ÿ®ŸÇŸä ÿßŸÑÿ≤ÿπÿ™ÿ± ŸàÿßŸÑÿ≤Ÿäÿ™ŸàŸÜ .. ŸÖÿß ÿ®ŸÇŸäÿ™ ÿßŸÑÿ≥ŸÖÿßÿ° ÿ≤ÿ±ŸÇÿßÿ°', color: 'rgba(0,150,57,0.2)'},
    {text: 'üåô Ÿäÿß ŸÇÿØÿ≥ Ÿäÿß ŸÖÿØŸäŸÜÿ© ÿßŸÑÿµŸÑÿßÿ© ÿ£ÿµŸÑŸä .. ÿ£ÿ®ŸÉŸä Ÿàÿ£ŸÇÿ±ÿπ ÿ®ÿßÿ® ÿØÿßÿ±ŸÜÿß ÿßŸÑŸÇÿØŸäŸÖÿ©', color: 'rgba(201,162,39,0.22)'},
    {text: 'üè° ŸÖŸÜ ŸäÿßŸÅÿß ÿ£ŸÜÿß .. ŸàŸÖŸÜ ÿ≠ŸäŸÅÿß ÿ£ŸÜÿß .. ŸàŸÖŸÜ ÿßŸÑŸÇÿØÿ≥ ŸàŸÖŸÜ ÿ∫ÿ≤ÿ© .. ÿ£ŸÜÿß ŸÅŸÑÿ≥ÿ∑ŸäŸÜŸä', color: 'rgba(206,17,38,0.2)'},
    {text: 'üåæ ÿ£ÿ±ÿ∂Ÿä ŸÑŸäÿ≥ÿ™ ÿ≠ŸÇŸäÿ®ÿ© .. Ÿàÿ£ŸÜÿß ŸÑÿ≥ÿ™ ŸÖÿ≥ÿßŸÅÿ± .. ÿ£ŸÜÿß ÿßŸÑÿπÿßÿ¥ŸÇ ŸàÿßŸÑÿ£ÿ±ÿ∂ ÿ≠ÿ®Ÿäÿ®ÿ©', color: 'rgba(0,150,57,0.18)'}
];

var poetryInterval = null;

function startRandomPoetry(){
    var container = document.querySelector('#bgPoetry .poetry-container');
    if(!container) return;
    container.innerHTML = '';
    
    if(poetryInterval) clearInterval(poetryInterval);
    
    // ÿ£ÿ∏Ÿáÿ± ÿ®Ÿäÿ™ ŸÅŸàÿ±ÿßŸã
    showRandomPoetryLine(container);
    
    // ÿ´ŸÖ ÿ£ÿ∏Ÿáÿ± ÿ£ÿ®Ÿäÿßÿ™ ŸÉŸÑ 4-8 ÿ´ŸàÿßŸÜŸä ÿ®ÿ¥ŸÉŸÑ ÿπÿ¥Ÿàÿßÿ¶Ÿä
    poetryInterval = setInterval(function(){
        showRandomPoetryLine(container);
    }, 3000 + Math.random() * 4000);
}

function showRandomPoetryLine(container){
    // ÿßÿÆÿ™ÿ± ÿ®Ÿäÿ™ ÿπÿ¥Ÿàÿßÿ¶Ÿä
    var poetry = poetryLines[Math.floor(Math.random() * poetryLines.length)];
    
    // ŸÖŸàŸÇÿπ ÿπÿ¥Ÿàÿßÿ¶Ÿä (ŸÖŸÜ 5% ÿ•ŸÑŸâ 85% ŸÖŸÜ ÿßÿ±ÿ™ŸÅÿßÿπ ÿßŸÑÿ¥ÿßÿ¥ÿ©)
    var topPos = 5 + Math.random() * 80;
    
    // ÿ≠ÿ¨ŸÖ ÿÆÿ∑ ÿπÿ¥Ÿàÿßÿ¶Ÿä
    var fontSize = 1.2 + Math.random() * 0.8;
    
    // ÿ≥ÿ±ÿπÿ© ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ©
    var duration = 20 + Math.random() * 15;
    
    var line = document.createElement('div');
    line.className = 'poetry-line';
    line.textContent = poetry.text;
    line.style.top = topPos + '%';
    line.style.fontSize = fontSize + 'rem';
    line.style.color = poetry.color;
    line.style.animationDuration = duration + 's';
    line.style.opacity = '1';
    line.style.left = '-100%';
    
    container.appendChild(line);
    
    // ÿßÿ≠ÿ∞ŸÅ ÿßŸÑÿ®Ÿäÿ™ ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ≠ÿ±ŸÉÿ©
    setTimeout(function(){
        if(line.parentNode) line.parentNode.removeChild(line);
    }, duration * 1000);
    
    // ÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿπÿØÿØ ŸÖÿπŸÇŸàŸÑ ŸÖŸÜ ÿßŸÑÿ£ÿ®Ÿäÿßÿ™
    var lines = container.querySelectorAll('.poetry-line');
    if(lines.length > 6){
        lines[0].parentNode.removeChild(lines[0]);
    }
}

window.createNewVote=async function(){
console.log("createNewVote called");
initVotes();
var title=document.getElementById("newVoteTitle").value.trim();
var question=document.getElementById("newVoteQuestion").value.trim();
var voteType=document.getElementById("newVoteType").value;

if(!title||!question){toast("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ŸàÿßŸÑÿ≥ÿ§ÿßŸÑ",true);return;}

var vote={
    title: title,
    question: question,
    type: voteType,
    status: "open",
    voters: [],
    createdAt: new Date().toISOString()
};

if(voteType === "multiple"){
    var optText = document.getElementById("newVoteOptions").value.trim();
    var maxSel = parseInt(document.getElementById("newVoteMaxSel").value) || 1;
    if(!optText){toast("ÿ£ÿØÿÆŸÑ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™/ÿßŸÑŸÖÿ±ÿ¥ÿ≠ŸäŸÜ",true);return;}
    var lines = optText.split("\n").map(function(x){return x.trim();}).filter(function(x){return x.length > 0;});
    if(lines.length < 2){toast("ÿ£ÿØÿÆŸÑ ÿÆŸäÿßÿ±ŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",true);return;}
    vote.options = lines.map(function(name, i){return {id:i, name:name, votes:0};});
    vote.maxSelections = maxSel;
} else {
    vote.votes = {yes:0, no:0};
    vote.maxSelections = 1;
}

if(USE_BACKEND && window.API){
    try{
        toast("ÿ¨ÿßÿ±Ÿä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿµŸàŸäÿ™...");
        var result = await window.API.Votes.create(vote);
        if(result.success){
            toast("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿµŸàŸäÿ™ ‚úÖ");
            document.getElementById("newVoteTitle").value="";
            document.getElementById("newVoteQuestion").value="";
            if(document.getElementById("newVoteOptions")) document.getElementById("newVoteOptions").value="";
            if(document.getElementById("newVoteMaxSel")) document.getElementById("newVoteMaxSel").value="1";
            document.getElementById("newVoteType").value="yesno";
            document.getElementById("multiOptionsDiv").style.display="none";
            await loadDataFromBackend();
        }else{
            toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
        }
    }catch(err){
        console.error(err);
        toast(err.message||"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",true);
    }
}else{
    if(!appData.members||appData.members.length===0){toast("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ£ÿπÿ∂ÿßÿ° ŸÖÿ≥ÿ¨ŸÑŸäŸÜ",true);return;}
    ensureMemberCodes();
    vote.id=Date.now();
    appData.votes.push(vote);
    save();
    document.getElementById("newVoteTitle").value="";
    document.getElementById("newVoteQuestion").value="";
    if(document.getElementById("newVoteOptions")) document.getElementById("newVoteOptions").value="";
    if(document.getElementById("newVoteMaxSel")) document.getElementById("newVoteMaxSel").value="1";
    document.getElementById("newVoteType").value="yesno";
    document.getElementById("multiOptionsDiv").style.display="none";
    loadAdminVoting();
    toast("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿµŸàŸäÿ™ ‚úÖ");
}
}

function loadVoting(){
if(!appData.votes)appData.votes=[];
var list=document.getElementById("votingList");
var noMsg=document.getElementById("noVotingMsg");
list.innerHTML="";

var activeVotes=appData.votes.filter(function(v){return v.status==="open";});

if(activeVotes.length===0){
noMsg.classList.remove("hidden");
return;
}
noMsg.classList.add("hidden");

var totalMembers=appData.members?appData.members.length:0;

activeVotes.forEach(function(vote){
var vid = String(vote.id || vote._id);
var voters = vote.voters || [];

var html='<div class="voting-card active-vote" data-voteid="'+vid+'">';
html+='<div class="voting-header"><div class="voting-title">'+vote.title+'</div><span class="voting-status open">ŸÖŸÅÿ™Ÿàÿ≠</span></div>';
html+='<div class="voting-question">'+vote.question+'</div>';
html+='<div class="voting-code-input"><input type="text" class="vote-code-input" data-vid="'+vid+'" placeholder="ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™" maxlength="6" style="text-transform:uppercase;"></div>';

if(vote.type==="multiple" && vote.options && vote.options.length > 0){
// ===== ÿ™ÿµŸàŸäÿ™ ŸÖÿ™ÿπÿØÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ =====
var maxSel = vote.maxSelections || 1;
html+='<div style="background:rgba(201,162,39,0.15);border:1px solid #c9a227;border-radius:8px;padding:10px 15px;margin-bottom:15px;">';
html+='<span>ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ±ÿßÿ™: <strong class="multi-count" data-vid="'+vid+'">0</strong> / '+maxSel+'</span>';
html+='<span style="float:left;color:#888;">ÿßÿÆÿ™ÿ± '+maxSel+' ŸÉÿ≠ÿØ ÿ£ŸÇÿµŸâ</span>';
html+='</div>';

html+='<div class="multi-options-container" data-vid="'+vid+'" data-max="'+maxSel+'">';
for(var i=0; i<vote.options.length; i++){
    var opt = vote.options[i];
    var optName = opt.name || opt;
    html+='<div class="multi-opt-row" data-vid="'+vid+'" data-idx="'+i+'">';
    html+='<div class="multi-opt-check"></div>';
    html+='<span class="multi-opt-name">'+optName+'</span>';
    html+='</div>';
}
html+='</div>';
html+='<button class="voting-submit multi-submit-btn" data-vid="'+vid+'">üó≥Ô∏è ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿµŸàŸäÿ™</button>';

// ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿµŸàÿßÿ™ ŸÖŸÜ voters
var optionVotes = {};
vote.options.forEach(function(opt, idx){
var optId = opt.id || opt._id || idx;
optionVotes[optId] = 0;
optionVotes[idx] = 0;
});
voters.forEach(function(voter){
if(voter.selections && voter.selections.length > 0){
voter.selections.forEach(function(sel){
if(optionVotes[sel] !== undefined) optionVotes[sel]++;
else {
vote.options.forEach(function(opt, idx){
var optId = opt.id || opt._id || idx;
if(String(sel) === String(optId) || sel === idx) optionVotes[optId]++;
});
}
});
}
});

var optionsWithVotes = vote.options.map(function(opt, idx){
var optId = opt.id || opt._id || idx;
var calcVotes = optionVotes[optId] || optionVotes[idx] || 0;
return {name: opt.name || opt, votes: Math.max(opt.votes || 0, calcVotes), id: optId};
});

var totalMultiVotes = optionsWithVotes.reduce(function(sum, o){ return sum + (o.votes||0); }, 0);
var sortedOpts = optionsWithVotes.slice().sort(function(a,b){ return (b.votes||0) - (a.votes||0); });

// ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ - ÿßŸÑŸÜÿ≥ÿ®ÿ© ŸÅŸÇÿ∑ ÿ®ÿØŸàŸÜ ÿπÿØÿØ ÿßŸÑÿ£ÿµŸàÿßÿ™
html+='<div class="voting-results" style="margin-top:20px;"><h4 style="color:var(--gold);margin-bottom:15px;">üìä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ©</h4>';
sortedOpts.forEach(function(opt, idx){
    var votes = opt.votes || 0;
    var percent = totalMultiVotes > 0 ? Math.round((votes/totalMultiVotes)*100) : 0;
    var isLeader = idx === 0 && votes > 0;
    html+='<div style="display:flex;align-items:center;gap:12px;margin-bottom:10px;padding:12px;background:var(--dark);border-radius:10px;'+(isLeader?'border:2px solid var(--green);':'border:1px solid var(--border);')+'">';
    html+='<span style="width:30px;height:30px;background:'+(isLeader?'var(--green)':'var(--border)')+';border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:'+(isLeader?'white':'var(--muted)')+';">'+(idx+1)+'</span>';
    html+='<span style="flex:1;font-weight:'+(isLeader?'700':'500')+';color:'+(isLeader?'var(--green)':'var(--text)')+';">'+(opt.name||opt)+'</span>';
    html+='<div style="flex:1;max-width:150px;height:24px;background:var(--border);border-radius:12px;overflow:hidden;"><div style="height:100%;width:'+(percent||3)+'%;background:linear-gradient(90deg,var(--green),#007a2f);border-radius:12px;"></div></div>';
    html+='<span style="min-width:50px;text-align:center;font-weight:700;font-size:1.1rem;color:'+(isLeader?'var(--green)':'var(--text)')+';">'+percent+'%</span>';
    html+='</div>';
});
html+='</div>';

} else {
// ===== ŸÖŸàÿßŸÅŸÇ / ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ =====
// ÿ≠ÿ≥ÿßÿ® ŸÖŸÜ voters
var yesVotes = 0, noVotes = 0;
voters.forEach(function(voter){
if(voter.vote === 'yes') yesVotes++;
else if(voter.vote === 'no') noVotes++;
});
if(vote.votes){
yesVotes = Math.max(vote.votes.yes || 0, yesVotes);
noVotes = Math.max(vote.votes.no || 0, noVotes);
}

var totalVotes = yesVotes + noVotes;
var yesPercent = totalVotes > 0 ? Math.round((yesVotes/totalVotes)*100) : 0;
var noPercent = totalVotes > 0 ? Math.round((noVotes/totalVotes)*100) : 0;

html+='<div class="yesno-options" data-vid="'+vid+'">';
html+='<div class="yesno-opt" data-vid="'+vid+'" data-val="yes"><div class="yesno-radio"></div><span>‚úÖ ŸÖŸàÿßŸÅŸÇ</span></div>';
html+='<div class="yesno-opt" data-vid="'+vid+'" data-val="no"><div class="yesno-radio"></div><span>‚ùå ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ</span></div>';
html+='</div>';
html+='<button class="voting-submit yesno-submit-btn" data-vid="'+vid+'">üó≥Ô∏è ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿµŸàŸäÿ™</button>';

// ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ - ÿßŸÑŸÜÿ≥ÿ®ÿ© ŸÅŸÇÿ∑ ÿ®ÿØŸàŸÜ ÿπÿØÿØ ÿßŸÑÿ£ÿµŸàÿßÿ™
html+='<div class="voting-results" style="margin-top:20px;"><h4 style="color:var(--gold);margin-bottom:15px;">üìä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ©</h4>';
html+='<div class="voting-result-bar"><div class="voting-result-label"><span>‚úÖ ŸÖŸàÿßŸÅŸÇ</span><span style="font-weight:700;font-size:1.1rem;color:var(--green);">'+yesPercent+'%</span></div><div class="voting-result-progress"><div class="voting-result-fill yes" style="width:'+(yesPercent||5)+'%"></div></div></div>';
html+='<div class="voting-result-bar"><div class="voting-result-label"><span>‚ùå ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ</span><span style="font-weight:700;font-size:1.1rem;color:var(--red);">'+noPercent+'%</span></div><div class="voting-result-progress"><div class="voting-result-fill no" style="width:'+(noPercent||5)+'%"></div></div></div>';
html+='</div>';
}

html+='</div>';
list.innerHTML+=html;
});

// Attach event listeners after rendering
attachVotingListeners();
}

var multiSelections = {};
var yesnoSelections = {};

function attachVotingListeners(){
// Multi-option click
document.querySelectorAll('.multi-opt-row').forEach(function(row){
    row.onclick = function(){
        var vid = this.getAttribute('data-vid');
        var idx = parseInt(this.getAttribute('data-idx'));
        var container = document.querySelector('.multi-options-container[data-vid="'+vid+'"]');
        var maxSel = parseInt(container.getAttribute('data-max')) || 1;
        
        if(!multiSelections[vid]) multiSelections[vid] = [];
        var sel = multiSelections[vid];
        var pos = sel.indexOf(idx);
        
        if(pos !== -1){
            // Deselect
            sel.splice(pos, 1);
            this.classList.remove('selected');
        } else {
            // Select
            if(sel.length >= maxSel){
                // Remove oldest
                var oldIdx = sel.shift();
                var oldRow = document.querySelector('.multi-opt-row[data-vid="'+vid+'"][data-idx="'+oldIdx+'"]');
                if(oldRow) oldRow.classList.remove('selected');
            }
            sel.push(idx);
            this.classList.add('selected');
        }
        
        // Update count
        var countEl = document.querySelector('.multi-count[data-vid="'+vid+'"]');
        if(countEl) countEl.textContent = sel.length;
    };
});

// Yes/No click
document.querySelectorAll('.yesno-opt').forEach(function(opt){
    opt.onclick = function(){
        var vid = this.getAttribute('data-vid');
        var val = this.getAttribute('data-val');
        yesnoSelections[vid] = val;
        
        // Update UI
        document.querySelectorAll('.yesno-opt[data-vid="'+vid+'"]').forEach(function(o){
            o.classList.remove('selected');
        });
        this.classList.add('selected');
    };
});

// Multi submit
document.querySelectorAll('.multi-submit-btn').forEach(function(btn){
    btn.onclick = function(){ submitMultiVote(this.getAttribute('data-vid')); };
});

// Yes/No submit
document.querySelectorAll('.yesno-submit-btn').forEach(function(btn){
    btn.onclick = function(){ submitYesNoVote(this.getAttribute('data-vid')); };
});
}

async function submitYesNoVote(vid){
var codeInput = document.querySelector('.vote-code-input[data-vid="'+vid+'"]');
var code = codeInput ? codeInput.value.trim().toUpperCase() : '';
var option = yesnoSelections[vid];

if(!code){ toast('ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™', true); return; }
if(!option){ toast('ÿßÿÆÿ™ÿ± ŸÖŸàÿßŸÅŸÇ ÿ£Ÿà ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ', true); return; }

if(USE_BACKEND && window.API){
    try{
        toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ...');
        var result = await window.API.Votes.submitVote(vid, code, option);
        if(result.success){
            toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
            codeInput.value = '';
            yesnoSelections[vid] = null;
            await loadDataFromBackend();
        } else {
            toast(result.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', true);
        }
    } catch(err){
        toast(err.message || 'ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ', true);
    }
} else {
    var vote = appData.votes.find(function(v){ return String(v.id||v._id) === vid; });
    if(!vote){ toast('ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ', true); return; }
    
    var member = appData.members.find(function(m){ return m.voteCode === code; });
    if(!member){ toast('ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠', true); return; }
    
    if(!vote.voters) vote.voters = [];
    var already = vote.voters.find(function(v){ return v.memberId === member.id; });
    if(already){ toast('ŸÑŸÇÿØ ÿµŸàŸëÿ™ÿ™ ŸÖÿ≥ÿ®ŸÇÿßŸã', true); return; }
    
    if(!vote.votes) vote.votes = {yes:0, no:0};
    vote.votes[option]++;
    vote.voters.push({memberId: member.id, memberName: member.name, vote: option, time: new Date().toISOString()});
    
    save();
    codeInput.value = '';
    yesnoSelections[vid] = null;
    loadVoting();
    toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
}
}

async function submitMultiVote(vid){
var codeInput = document.querySelector('.vote-code-input[data-vid="'+vid+'"]');
var code = codeInput ? codeInput.value.trim().toUpperCase() : '';
var sel = multiSelections[vid] || [];

if(!code){ toast('ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™', true); return; }
if(sel.length === 0){ toast('ÿßÿÆÿ™ÿ± ÿÆŸäÿßÿ±ÿßŸã Ÿàÿßÿ≠ÿØÿßŸã ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ', true); return; }

if(USE_BACKEND && window.API){
    try{
        toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ...');
        var result = await window.API.Votes.submitVote(vid, code, null, sel);
        if(result.success){
            toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
            codeInput.value = '';
            multiSelections[vid] = [];
            await loadDataFromBackend();
        } else {
            toast(result.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', true);
        }
    } catch(err){
        toast(err.message || 'ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ', true);
    }
} else {
    var vote = appData.votes.find(function(v){ return String(v.id||v._id) === vid; });
    if(!vote){ toast('ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ', true); return; }
    
    var member = appData.members.find(function(m){ return m.voteCode === code; });
    if(!member){ toast('ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠', true); return; }
    
    if(!vote.voters) vote.voters = [];
    var already = vote.voters.find(function(v){ return v.memberId === member.id; });
    if(already){ toast('ŸÑŸÇÿØ ÿµŸàŸëÿ™ÿ™ ŸÖÿ≥ÿ®ŸÇÿßŸã', true); return; }
    
    sel.forEach(function(idx){
        if(vote.options && vote.options[idx]){
            vote.options[idx].votes = (vote.options[idx].votes || 0) + 1;
        }
    });
    
    vote.voters.push({memberId: member.id, memberName: member.name, selections: sel, time: new Date().toISOString()});
    
    save();
    codeInput.value = '';
    multiSelections[vid] = [];
    loadVoting();
    toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
}
}

var selectedVotes={};
var multiSelectedOptions={};

// Old functions removed - using new voting system above


function loadAdminVoting(){
var list=document.getElementById("adminVotingList");
list.innerHTML="";

if(!appData.votes||appData.votes.length===0){
list.innerHTML='<div class="voting-empty"><div class="voting-empty-icon">üó≥Ô∏è</div><p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸàŸäÿ™ÿßÿ™</p></div>';
return;
}

appData.votes.forEach(function(vote){
var voters = vote.voters || [];
var votedCount = voters.length;
var totalMembers=appData.members?appData.members.length:0;
var isMultiple=vote.type==="multiple"&&vote.options;

var html='<div class="voting-card '+(vote.status==="open"?"active-vote":"closed-vote")+'">';
html+='<div class="voting-header"><div class="voting-title">'+vote.title+'</div><span class="voting-status '+(vote.status==="open"?"open":"closed")+'">'+(vote.status==="open"?"ŸÖŸÅÿ™Ÿàÿ≠":"ŸÖÿ∫ŸÑŸÇ")+'</span></div>';
html+='<div class="voting-question">'+vote.question+'</div>';

if(isMultiple){
html+='<div style="margin:10px 0;padding:10px;background:rgba(201,162,39,0.1);border-radius:8px;"><span style="color:var(--gold);font-weight:600;">üìã '+vote.options.length+' ÿÆŸäÿßÿ±ÿßÿ™</span> | <span style="color:var(--muted);">ŸÖÿ≥ŸÖŸàÿ≠ '+vote.maxSelections+' '+(vote.maxSelections===1?'ÿµŸàÿ™':'ÿ£ÿµŸàÿßÿ™')+' ŸÑŸÉŸÑ ÿπÿ∂Ÿà</span></div>';

// ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿµŸàÿßÿ™ ŸÑŸÉŸÑ ÿÆŸäÿßÿ± ŸÖŸÜ voters
var optionVotes = {};
vote.options.forEach(function(opt, idx){
var optId = opt.id || opt._id || idx;
optionVotes[optId] = 0;
optionVotes[idx] = 0; // Also track by index
});

// Count votes from voters array
voters.forEach(function(voter){
if(voter.selections && voter.selections.length > 0){
voter.selections.forEach(function(sel){
if(optionVotes[sel] !== undefined){
optionVotes[sel]++;
} else {
// Try to match by index or string
vote.options.forEach(function(opt, idx){
var optId = opt.id || opt._id || idx;
if(String(sel) === String(optId) || sel === idx){
optionVotes[optId] = (optionVotes[optId] || 0) + 1;
}
});
}
});
}
});

// Build options with calculated votes
var optionsWithVotes = vote.options.map(function(opt, idx){
var optId = opt.id || opt._id || idx;
var calculatedVotes = optionVotes[optId] || optionVotes[idx] || 0;
// Use stored votes if available and greater
var finalVotes = Math.max(opt.votes || 0, calculatedVotes);
return {name: opt.name, votes: finalVotes, id: optId};
});

// Show results for multiple choice
html+='<div style="margin:15px 0;">';
var sortedOptions=optionsWithVotes.slice().sort(function(a,b){return (b.votes||0)-(a.votes||0);});
var totalVotesMulti = sortedOptions.reduce(function(sum, o){ return sum + (o.votes||0); }, 0);
sortedOptions.forEach(function(opt,idx){
var votes = opt.votes || 0;
var percent=totalVotesMulti>0?Math.round((votes/totalVotesMulti)*100):0;
html+='<div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;padding:12px;background:var(--dark);border-radius:8px;'+(idx===0&&votes>0?'border:2px solid var(--green);':'')+'">';
html+='<span style="width:30px;height:30px;background:'+(idx===0&&votes>0?'var(--green)':'var(--border)')+';border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:'+(idx===0&&votes>0?'white':'var(--muted)')+';">'+(idx+1)+'</span>';
html+='<span style="flex:1;font-weight:600;color:'+(idx===0&&votes>0?'var(--green)':'var(--text)')+';">'+opt.name+'</span>';
html+='<div style="width:120px;height:24px;background:var(--border);border-radius:12px;overflow:hidden;"><div style="height:100%;width:'+(percent||3)+'%;background:linear-gradient(90deg,var(--green),#007a2f);border-radius:12px;"></div></div>';
html+='<span style="min-width:80px;text-align:left;font-weight:700;color:'+(idx===0&&votes>0?'var(--green)':'var(--text)')+';">'+votes+' <small style="color:var(--muted);">('+percent+'%)</small></span>';
html+='</div>';
});
html+='<div style="margin-top:15px;padding:12px;background:rgba(201,162,39,0.15);border-radius:8px;text-align:center;border:1px solid var(--gold);"><span style="color:var(--muted);">üìä ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿµŸàÿßÿ™: </span><span style="font-size:1.2rem;font-weight:700;color:var(--gold);">'+totalVotesMulti+'</span></div>';
html+='</div>';
}else{
// Yes/No results - ÿ≠ÿ≥ÿßÿ® ŸÖŸÜ voters
var yesVotes = 0;
var noVotes = 0;

voters.forEach(function(voter){
if(voter.vote === 'yes') yesVotes++;
else if(voter.vote === 'no') noVotes++;
});

// Use stored votes if available and greater
if(vote.votes){
yesVotes = Math.max(vote.votes.yes || 0, yesVotes);
noVotes = Math.max(vote.votes.no || 0, noVotes);
}

var totalVotes=yesVotes+noVotes;
var yesPercent=totalVotes>0?Math.round((yesVotes/totalVotes)*100):0;
var noPercent=totalVotes>0?Math.round((noVotes/totalVotes)*100):0;

html+='<div class="voting-results">';
html+='<div class="voting-result-bar"><div class="voting-result-label"><span>‚úÖ ŸÖŸàÿßŸÅŸÇ</span><span style="font-weight:700;color:var(--green);">'+yesVotes+' ('+yesPercent+'%)</span></div><div class="voting-result-progress"><div class="voting-result-fill yes" style="width:'+(yesPercent||3)+'%">'+yesVotes+'</div></div></div>';
html+='<div class="voting-result-bar"><div class="voting-result-label"><span>‚ùå ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ</span><span style="font-weight:700;color:var(--red);">'+noVotes+' ('+noPercent+'%)</span></div><div class="voting-result-progress"><div class="voting-result-fill no" style="width:'+(noPercent||3)+'%">'+noVotes+'</div></div></div>';
html+='<div style="margin-top:15px;padding:12px;background:rgba(201,162,39,0.15);border-radius:8px;text-align:center;border:1px solid var(--gold);"><span style="color:var(--muted);">üìä ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿµŸàÿßÿ™: </span><span style="font-size:1.2rem;font-weight:700;color:var(--gold);">'+totalVotes+'</span></div>';
html+='</div>';
}

html+='<div class="voting-stats"><div class="voting-stat"><div class="voting-stat-value" style="color:var(--green);">'+votedCount+'<span style="color:var(--muted);">/'+totalMembers+'</span></div><div class="voting-stat-label">ÿµŸàÿ™Ÿàÿß</div></div></div>';

var adminVoteId=vote.id||vote._id;
html+='<div style="margin-top:15px;display:flex;gap:10px;flex-wrap:wrap;">';
if(vote.status==="open"){
html+='<button class="btn btn-red btn-sm" onclick="closeVote(\''+adminVoteId+'\')">üîí ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™</button>';
}else{
html+='<button class="btn btn-green btn-sm" onclick="reopenVote(\''+adminVoteId+'\')">üîì ÿ•ÿπÿßÿØÿ© ŸÅÿ™ÿ≠</button>';
}
html+='<button class="btn btn-gold btn-sm" onclick="showVoteCodes(\''+adminVoteId+'\')">üîë ÿπÿ±ÿ∂ ÿßŸÑÿ±ŸÖŸàÿ≤</button>';
html+='<button class="btn btn-gray btn-sm" onclick="showVotersList(\''+adminVoteId+'\')">üë• ŸÖŸÜ ÿµŸàŸëÿ™</button>';
html+='<button class="btn btn-red btn-sm" onclick="deleteVote(\''+adminVoteId+'\')">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>';
html+='</div></div>';

list.innerHTML+=html;
});
}

window.closeVote=async function(voteId){
if(USE_BACKEND && window.API){
try{
var result=await window.API.Votes.changeStatus(voteId,'closed');
if(result.success){toast("ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™");await loadDataFromBackend();}
else{toast(result.message||"ÿÆÿ∑ÿ£",true);}
}catch(e){toast(e.message||"ÿÆÿ∑ÿ£",true);}
}else{
var vote=appData.votes.find(function(v){return v.id===voteId||v.id==voteId;});
if(vote){vote.status="closed";save();loadAdminVoting();toast("ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ™ÿµŸàŸäÿ™");}
}
}

window.reopenVote=async function(voteId){
if(USE_BACKEND && window.API){
try{
var result=await window.API.Votes.changeStatus(voteId,'open');
if(result.success){toast("ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ŸÅÿ™ÿ≠ ÿßŸÑÿ™ÿµŸàŸäÿ™");await loadDataFromBackend();}
else{toast(result.message||"ÿÆÿ∑ÿ£",true);}
}catch(e){toast(e.message||"ÿÆÿ∑ÿ£",true);}
}else{
var vote=appData.votes.find(function(v){return v.id===voteId||v.id==voteId;});
if(vote){vote.status="open";save();loadAdminVoting();toast("ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ŸÅÿ™ÿ≠ ÿßŸÑÿ™ÿµŸàŸäÿ™");}
}
}

window.deleteVote=async function(voteId){
if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ™ÿµŸàŸäÿ™ÿü"))return;
if(USE_BACKEND && window.API){
try{
var result=await window.API.Votes.delete(voteId);
if(result.success){toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ");await loadDataFromBackend();}
else{toast(result.message||"ÿÆÿ∑ÿ£",true);}
}catch(e){toast(e.message||"ÿÆÿ∑ÿ£",true);}
}else{
appData.votes=appData.votes.filter(function(v){return v.id!==voteId&&v.id!=voteId;});
save();loadAdminVoting();toast("ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ");
}
}

window.showVoteCodes=function(voteId){
var vote=appData.votes.find(function(v){return v.id===voteId||v.id==voteId;});
if(!vote)return;

ensureMemberCodes();

var html='<div style="max-height:400px;overflow-y:auto;">';
html+='<table style="width:100%;border-collapse:collapse;">';
html+='<tr style="background:var(--green);color:white;"><th style="padding:10px;text-align:right;">ÿßŸÑÿπÿ∂Ÿà</th><th style="padding:10px;text-align:center;">ÿßŸÑÿ±ŸÖÿ≤</th><th style="padding:10px;text-align:center;">ÿßŸÑÿ≠ÿßŸÑÿ©</th></tr>';

appData.members.forEach(function(m){
var voted=vote.voters.find(function(v){return v.memberId===m.id;});
var statusText=voted?"‚úÖ ÿµŸàŸëÿ™":"‚è≥ ŸÑŸÖ ŸäÿµŸàÿ™";
html+='<tr style="border-bottom:1px solid var(--border);'+(voted?"opacity:0.6;":"")+'"><td style="padding:10px;">'+m.name+'</td><td style="padding:10px;text-align:center;font-family:monospace;font-size:1.1rem;color:var(--gold);letter-spacing:2px;">'+m.voteCode+'</td><td style="padding:10px;text-align:center;">'+statusText+'</td></tr>';
});

html+='</table></div>';
html+='<button class="btn btn-gold" style="margin-top:15px;width:100%;" onclick="copyAllCodes('+voteId+')">üìã ŸÜÿ≥ÿÆ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ±ŸÖŸàÿ≤</button>';

showModal("üîë ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™: "+vote.title,html);
}

window.copyAllCodes=function(voteId){
var vote=appData.votes.find(function(v){return v.id===voteId;});
if(!vote)return;

ensureMemberCodes();

var text="ÿ±ŸÖŸàÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™: "+vote.title+"\n";
text+="========================\n\n";
appData.members.forEach(function(m){
var voted=vote.voters.find(function(v){return v.memberId===m.id;});
text+=m.name+": "+m.voteCode+(voted?" (ÿµŸàŸëÿ™)":"")+"\n";
});

navigator.clipboard.writeText(text).then(function(){toast("ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ŸÖŸàÿ≤ ‚úÖ");});
}

window.showVotersList=function(voteId){
var vote=appData.votes.find(function(v){return v.id===voteId||v.id==voteId;});
if(!vote)return;

var isMultiple=vote.type==="multiple"&&vote.options;

var html='<div style="max-height:400px;overflow-y:auto;">';
if(!vote.voters||vote.voters.length===0){
html+='<p style="text-align:center;color:var(--muted);padding:20px;">ŸÑŸÖ ŸäÿµŸàÿ™ ÿ£ÿ≠ÿØ ÿ®ÿπÿØ</p>';
}else{
html+='<table style="width:100%;border-collapse:collapse;">';
html+='<tr style="background:var(--green);color:white;"><th style="padding:10px;text-align:right;">ÿßŸÑÿπÿ∂Ÿà</th><th style="padding:10px;text-align:center;">'+(isMultiple?'ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ±ÿßÿ™':'ÿßŸÑÿ™ÿµŸàŸäÿ™')+'</th></tr>';
vote.voters.forEach(function(v){
var voteText;
if(isMultiple){
voteText=v.selectionNames?v.selectionNames.join('ÿå '):'--';
}else{
voteText=v.vote==="yes"?"‚úÖ ŸÖŸàÿßŸÅŸÇ":"‚ùå ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ";
}
html+='<tr style="border-bottom:1px solid var(--border);"><td style="padding:10px;">'+(v.memberName||'ŸÖÿ¨ŸáŸàŸÑ')+'</td><td style="padding:10px;text-align:center;'+(isMultiple?'font-size:0.85rem;':'')+'">'+voteText+'</td></tr>';
});
html+='</table>';
}
html+='</div>';

showModal("üë• ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖÿµŸàÿ™ŸäŸÜ: "+vote.title,html);
}

function showModal(title,content){
var modal=document.createElement("div");
modal.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:9999;display:flex;align-items:center;justify-content:center;padding:20px;";
modal.innerHTML='<div style="background:var(--card);border-radius:15px;max-width:600px;width:100%;max-height:90vh;overflow:hidden;"><div style="padding:20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;"><h3 style="color:var(--gold);">'+title+'</h3><button onclick="this.closest(\'div\').parentElement.parentElement.remove()" style="background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer;">‚úï</button></div><div style="padding:20px;">'+content+'</div></div>';
document.body.appendChild(modal);
}

// ========== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ==========
if(!appData.messages)appData.messages=[];
var currentMessageId=null;
var messageFilter='all';

window.sendMessage=async function(){
var name=document.getElementById("contactName").value.trim();
var phone=document.getElementById("contactPhone").value.trim();
var email=document.getElementById("contactEmail").value.trim();
var subject=document.getElementById("contactSubject").value;
var message=document.getElementById("contactMessage").value.trim();

if(!name){toast("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ",true);return;}
if(!subject){toast("ÿßÿÆÿ™ÿ± ÿßŸÑŸÖŸàÿ∂Ÿàÿπ",true);return;}
if(!message){toast("ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ",true);return;}

// ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÑŸÄ Backend
if(USE_BACKEND && window.API){
try{
toast("ÿ¨ÿßÿ±Ÿä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©...");
var result = await window.API.Messages.send({name,phone,email,subject,message});
if(result.success){
document.getElementById("contactFormContainer").style.display="none";
document.getElementById("contactSuccess").classList.add("show");
toast("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ");
}else{
toast(result.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£",true);
}
}catch(err){
console.error(err);
toast(err.message||"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",true);
}
}else{
// ÿ≠ŸÅÿ∏ ŸÖÿ≠ŸÑŸä
if(!appData.messages)appData.messages=[];
var now=new Date();
var newMessage={
id:Date.now(),
name:name,
phone:phone||null,
email:email||null,
subject:subject,
message:message,
date:now.toISOString().split('T')[0],
time:now.toTimeString().split(' ')[0].substring(0,5),
timestamp:now.toISOString(),
read:false
};
appData.messages.unshift(newMessage);
save();
updateInboxBadge();
document.getElementById("contactFormContainer").style.display="none";
document.getElementById("contactSuccess").classList.add("show");
toast("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ");
}
}

window.resetContactForm=function(){
document.getElementById("contactName").value="";
document.getElementById("contactPhone").value="";
document.getElementById("contactEmail").value="";
document.getElementById("contactSubject").value="";
document.getElementById("contactMessage").value="";
document.getElementById("contactFormContainer").style.display="block";
document.getElementById("contactSuccess").classList.remove("show");
}

function loadMessages(){
var list=document.getElementById("messagesList");
if(!list)return;

var messages=appData.messages||[];
var filtered=messages;

if(messageFilter==='unread'){
filtered=messages.filter(function(m){return !m.read;});
}else if(messageFilter==='read'){
filtered=messages.filter(function(m){return m.read;});
}

// Update stats
var total=messages.length;
var unread=messages.filter(function(m){return !m.read;}).length;
var read=total-unread;

document.getElementById("totalMessages").textContent=total;
document.getElementById("unreadMessages").textContent=unread;
document.getElementById("readMessages").textContent=read;

if(filtered.length===0){
list.innerHTML='<div style="text-align:center;padding:40px;color:var(--muted);"><div style="font-size:3rem;margin-bottom:15px;">üì≠</div><p>'+t('noMessages')+'</p></div>';
return;
}

var html='';
filtered.forEach(function(msg){
var msgId = msg.id || msg._id;
var statusClass=msg.read?'read':'unread';
var cardClass=msg.read?'':'unread';
var preview=msg.message?msg.message.substring(0,80)+(msg.message.length>80?'...':''):'';

html+='<div class="message-card '+cardClass+'" data-msgid="'+msgId+'">';
html+='<div class="message-header">';
html+='<div class="message-sender">'+msg.name+'</div>';
html+='<div><span class="message-status '+statusClass+'">'+(msg.read?'‚úÖ ŸÖŸÇÿ±Ÿàÿ°ÿ©':'üîî ÿ∫Ÿäÿ± ŸÖŸÇÿ±Ÿàÿ°ÿ©')+'</span></div>';
html+='</div>';
html+='<div class="message-subject">'+getSubjectIcon(msg.subject)+' '+msg.subject+'</div>';
html+='<div class="message-preview">'+preview+'</div>';
html+='<div class="message-date">üìÖ '+(msg.date||'')+(msg.time?' | ‚è∞ '+msg.time:'')+'</div>';
html+='<div class="message-actions" style="margin-top:10px;display:flex;gap:8px;">';
if(!msg.read){
html+='<button class="btn btn-green btn-sm msg-mark-read" data-msgid="'+msgId+'">‚úÖ ÿ™ÿ≠ÿØŸäÿØ ŸÉŸÖŸÇÿ±Ÿàÿ°ÿ©</button>';
}
html+='<button class="btn btn-gray btn-sm msg-view" data-msgid="'+msgId+'">üëÅÔ∏è ÿπÿ±ÿ∂</button>';
html+='<button class="btn btn-red btn-sm msg-delete" data-msgid="'+msgId+'">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>';
html+='</div>';
html+='</div>';
});

list.innerHTML=html;

// Attach event listeners
attachMessageListeners();
}

function attachMessageListeners(){
// View message
document.querySelectorAll('.msg-view').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var msgId = this.getAttribute('data-msgid');
openMessage(msgId);
};
});

// Mark as read
document.querySelectorAll('.msg-mark-read').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var msgId = this.getAttribute('data-msgid');
markMessageAsRead(msgId);
};
});

// Delete message
document.querySelectorAll('.msg-delete').forEach(function(btn){
btn.onclick = function(e){
e.stopPropagation();
var msgId = this.getAttribute('data-msgid');
deleteMessage(msgId);
};
});

// Click on card to view
document.querySelectorAll('.message-card').forEach(function(card){
card.onclick = function(){
var msgId = this.getAttribute('data-msgid');
openMessage(msgId);
};
});
}

window.markMessageAsRead=async function(id){
id = String(id);
var msg=appData.messages.find(function(m){return String(m.id||m._id)===id;});
if(!msg)return;

// Update locally first
msg.read=true;

// Store in localStorage to persist across backend reloads
var readMsgs = JSON.parse(localStorage.getItem('readMessages') || '[]');
if(readMsgs.indexOf(id) === -1) readMsgs.push(id);
localStorage.setItem('readMessages', JSON.stringify(readMsgs));

loadMessages();
updateInboxBadge();
toast("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÉŸÖŸÇÿ±Ÿàÿ°ÿ© ‚úÖ");

// Then update backend
if(USE_BACKEND && window.API && window.API.Messages && window.API.Messages.markAsRead){
try{
await window.API.Messages.markAsRead(id);
}catch(err){
console.log('Backend update failed, saved locally');
}
}
save();
}

window.deleteMessage=async function(id){
id = String(id);
if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©ÿü"))return;

// Delete locally first
appData.messages=appData.messages.filter(function(m){return String(m.id||m._id)!==id;});

// Store deletion in localStorage to persist across backend reloads
var deletedMsgs = JSON.parse(localStorage.getItem('deletedMessages') || '[]');
if(deletedMsgs.indexOf(id) === -1) deletedMsgs.push(id);
localStorage.setItem('deletedMessages', JSON.stringify(deletedMsgs));

loadMessages();
updateInboxBadge();
toast("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");

// Then delete from backend
if(USE_BACKEND && window.API && window.API.Messages && window.API.Messages.delete){
try{
await window.API.Messages.delete(id);
// If backend delete successful, remove from local tracking
deletedMsgs = deletedMsgs.filter(function(x){return x !== id;});
localStorage.setItem('deletedMessages', JSON.stringify(deletedMsgs));
}catch(err){
console.log('Backend delete failed, deleted locally');
}
}
save();
}

function getSubjectIcon(subject){
var icons={'ÿßŸÇÿ™ÿ±ÿßÿ≠':'üí°','ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±':'‚ùì','ÿ¥ŸÉŸàŸâ':'‚ö†Ô∏è','ÿ∑ŸÑÿ® ŸÖÿ≥ÿßÿπÿØÿ©':'ü§ù','ÿ™ÿ∑Ÿàÿπ':'üôã','ÿ£ÿÆÿ±Ÿâ':'üìù'};
return icons[subject]||'üìã';
}

window.openMessage=async function(id){
id = String(id);
var msg=appData.messages.find(function(m){return String(m.id||m._id)===id;});
if(!msg)return;

// Mark as read
if(!msg.read){
msg.read=true;

// Store in localStorage
var readMsgs = JSON.parse(localStorage.getItem('readMessages') || '[]');
if(readMsgs.indexOf(id) === -1) readMsgs.push(id);
localStorage.setItem('readMessages', JSON.stringify(readMsgs));

loadMessages();
updateInboxBadge();

// Update backend
if(USE_BACKEND && window.API && window.API.Messages && window.API.Messages.markAsRead){
try{
await window.API.Messages.markAsRead(id);
}catch(err){
console.log('Backend update failed, saved locally');
}
}
save();
}

currentMessageId=id;

var html='<div class="message-detail-header">';
html+='<div class="message-detail-sender"><h3>'+msg.name+'</h3><p>'+getSubjectIcon(msg.subject)+' '+msg.subject+'</p></div>';
html+='<span class="message-status read">‚úÖ ŸÖŸÇÿ±Ÿàÿ°ÿ©</span>';
html+='</div>';

html+='<div class="message-detail-info">';
html+='<div class="message-info-item"><label>üìÖ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</label><span>'+(msg.date||'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ')+'</span></div>';
html+='<div class="message-info-item"><label>‚è∞ ÿßŸÑŸàŸÇÿ™</label><span>'+(msg.time||'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ')+'</span></div>';
if(msg.phone){
html+='<div class="message-info-item"><label>üì± ÿßŸÑŸáÿßÿ™ŸÅ</label><a href="tel:'+msg.phone+'">'+msg.phone+'</a></div>';
}
if(msg.email){
html+='<div class="message-info-item"><label>üìß ÿßŸÑÿ®ÿ±ŸäÿØ</label><a href="mailto:'+msg.email+'">'+msg.email+'</a></div>';
}
html+='</div>';

html+='<div class="message-body">'+(msg.message||'')+'</div>';

document.getElementById("messageDetailContent").innerHTML=html;
document.getElementById("messageModal").classList.add("show");
}

window.closeMessageModal=function(){
document.getElementById("messageModal").classList.remove("show");
currentMessageId=null;
}

window.deleteCurrentMessage=async function(){
if(!currentMessageId)return;
if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©ÿü"))return;

var id = String(currentMessageId);

// Delete locally first
appData.messages=appData.messages.filter(function(m){return String(m.id||m._id)!==id;});

// Store deletion in localStorage
var deletedMsgs = JSON.parse(localStorage.getItem('deletedMessages') || '[]');
if(deletedMsgs.indexOf(id) === -1) deletedMsgs.push(id);
localStorage.setItem('deletedMessages', JSON.stringify(deletedMsgs));

closeMessageModal();
loadMessages();
updateInboxBadge();
toast("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");

// Then delete from backend
if(USE_BACKEND && window.API && window.API.Messages && window.API.Messages.delete){
try{
await window.API.Messages.delete(id);
}catch(err){
console.log('Backend delete failed, deleted locally');
}
}
save();
}

window.filterMessages=function(filter){
messageFilter=filter;
document.querySelectorAll('.inbox-filters .btn').forEach(function(btn){
btn.classList.remove('btn-green');
btn.classList.add('btn-gray');
});
document.getElementById('filter'+filter.charAt(0).toUpperCase()+filter.slice(1)).classList.remove('btn-gray');
document.getElementById('filter'+filter.charAt(0).toUpperCase()+filter.slice(1)).classList.add('btn-green');
loadMessages();
}

window.markAllAsRead=async function(){
if(!appData.messages||appData.messages.length===0)return;
var unreadCount=appData.messages.filter(function(m){return !m.read;}).length;
if(unreadCount===0){toast("ÿ¨ŸÖŸäÿπ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ŸÖŸÇÿ±Ÿàÿ°ÿ© ÿ®ÿßŸÑŸÅÿπŸÑ");return;}
if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ÿØŸäÿØ "+unreadCount+" ÿ±ÿ≥ÿßŸÑÿ© ŸÉŸÖŸÇÿ±Ÿàÿ°ÿ©ÿü"))return;

// Update locally first
var readMsgs = JSON.parse(localStorage.getItem('readMessages') || '[]');
appData.messages.forEach(function(m){
m.read=true;
var msgId = String(m.id || m._id);
if(readMsgs.indexOf(msgId) === -1) readMsgs.push(msgId);
});
localStorage.setItem('readMessages', JSON.stringify(readMsgs));

loadMessages();
updateInboxBadge();
toast("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ŸÉŸÖŸÇÿ±Ÿàÿ°ÿ© ‚úÖ");

// Then update backend
if(USE_BACKEND && window.API && window.API.Messages && window.API.Messages.markAllAsRead){
try{
await window.API.Messages.markAllAsRead();
}catch(err){
console.log('Backend update failed, saved locally');
}
}
save();
}

function updateInboxBadge(){
var badge=document.getElementById("inboxBadge");
if(!badge)return;
var unread=appData.messages?appData.messages.filter(function(m){return !m.read;}).length:0;
badge.textContent=unread;
if(unread>0){
badge.classList.remove("hidden");
}else{
badge.classList.add("hidden");
}
}

// ========== ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ==========
if(!appData.liveStream)appData.liveStream={active:false,title:'',url:'',linkedVoteId:null};

function initLiveStream(){
loadLiveStreamStatus();
loadLiveVotingList();
loadAdminLiveVotes();
}

function loadLiveStreamStatus(){
var live=appData.liveStream;
var videoContainer=document.getElementById('liveVideoContainer');
var videoFrame=document.getElementById('liveVideoFrame');
var offlineMsg=document.getElementById('liveOfflineMsg');
var alternativeOptions=document.getElementById('liveAlternativeOptions');
var liveBtn=document.getElementById('btnLive');
var directLink=document.getElementById('liveDirectLink');

// Check if live is active and (public OR user is admin)
var canView=live&&live.active&&live.url&&(live.isPublic||isAdmin);

if(canView){
// Show live stream
var embedUrl=convertToEmbedUrl(live.url);
if(videoFrame&&videoContainer){
videoFrame.src=embedUrl;
videoContainer.style.display='block';
}
if(offlineMsg)offlineMsg.style.display='none';
if(alternativeOptions)alternativeOptions.style.display='block';
if(directLink)directLink.href=live.url;
if(liveBtn)liveBtn.classList.remove('hidden');

var titleEl=document.getElementById('liveStreamTitle');
if(titleEl&&live.title)titleEl.textContent=live.title;

var eventTitle=document.getElementById('liveEventTitle');
if(eventTitle&&live.title)eventTitle.textContent=live.title;
}else{
// Hide live stream
if(videoContainer)videoContainer.style.display='none';
if(videoFrame)videoFrame.src='';
if(offlineMsg)offlineMsg.style.display='flex';
if(alternativeOptions)alternativeOptions.style.display='none';
// Show button only for admin or if stream is public and active
if(liveBtn){
if(isAdmin||(live&&live.active&&live.isPublic)){
liveBtn.classList.remove('hidden');
}else{
liveBtn.classList.add('hidden');
}
}
}

// Update admin panel status
var statusPanel=document.getElementById('liveStatusPanel');
var statusText=document.getElementById('liveStatusText');
var statusInfo=document.getElementById('liveStatusInfo');
if(statusPanel&&statusText){
if(live&&live.active){
statusPanel.classList.remove('inactive');
statusPanel.classList.add('active');
var publicText=live.isPublic?' (ÿπÿßŸÖ)':' (ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° ŸÅŸÇÿ∑)';
statusText.textContent=t('streamActive')+' üî¥'+publicText;
if(statusInfo)statusInfo.textContent=live.title||'';
}else{
statusPanel.classList.remove('active');
statusPanel.classList.add('inactive');
statusText.textContent=t('streamStopped');
if(statusInfo)statusInfo.textContent='';
}
}

// Load saved checkbox state
var publicCheckbox=document.getElementById('adminLivePublic');
if(publicCheckbox&&live){
publicCheckbox.checked=live.isPublic!==false;
}
}

window.openLiveInNewWindow=function(){
var live=appData.liveStream;
if(live&&live.url){
window.open(live.url,'_blank');
}
}

function convertToEmbedUrl(url){
if(!url)return'';

// YouTube - multiple formats
// youtube.com/watch?v=ID
// youtu.be/ID
// youtube.com/live/ID
// youtube.com/embed/ID
var ytMatch=url.match(/(?:youtube\.com\/(?:watch\?v=|live\/|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/);
if(ytMatch){
return'https://www.youtube.com/embed/'+ytMatch[1]+'?autoplay=1&rel=0';
}

// If it's already an embed URL, return as is
if(url.indexOf('youtube.com/embed/')>-1){
return url+(url.indexOf('?')>-1?'&':'?')+'autoplay=1';
}

// Facebook
if(url.indexOf('facebook.com')>-1){
return'https://www.facebook.com/plugins/video.php?href='+encodeURIComponent(url)+'&autoplay=true&show_text=false';
}

// If nothing matches, return the URL as is (might be a direct video URL)
return url;
}

function loadLiveVotingList(){
var list=document.getElementById('liveVotingList');
var noVotes=document.getElementById('liveNoVotes');
if(!list)return;

var live=appData.liveStream;
var linkedVoteId=live?live.linkedVoteId:null;

// Get open votes (either linked vote or all open votes)
var openVotes=appData.votes.filter(function(v){
var vid = v.id || v._id;
if(linkedVoteId)return vid===linkedVoteId&&v.status==='open';
return v.status==='open';
});

if(openVotes.length===0){
list.innerHTML='';
if(noVotes)noVotes.style.display='block';
return;
}

if(noVotes)noVotes.style.display='none';
list.innerHTML='';

openVotes.forEach(function(vote){
var voteId = vote.id || vote._id;
var html='<div class="live-vote-card">';
html+='<div class="live-vote-title">'+vote.title+'</div>';
if(vote.question)html+='<p style="font-size:0.85rem;color:var(--muted);margin-bottom:10px;">'+vote.question+'</p>';

html+='<div class="form-group"><input type="text" class="form-input live-vote-code-input" data-voteid="'+voteId+'" placeholder="'+t('enterVoteCode')+'" style="text-align:center;letter-spacing:2px;text-transform:uppercase;"></div>';

if(vote.type==='yesno'||!vote.options){
html+='<div class="live-vote-options" id="liveVoteOptions'+voteId+'">';
html+='<div class="live-vote-option live-yesno-option" data-voteid="'+voteId+'" data-option="yes"><div class="radio"></div><span>‚úÖ '+t('agree')+'</span></div>';
html+='<div class="live-vote-option live-yesno-option" data-voteid="'+voteId+'" data-option="no"><div class="radio"></div><span>‚ùå '+t('disagree')+'</span></div>';
html+='</div>';
html+='<button class="btn btn-green live-submit-yesno" data-voteid="'+voteId+'" style="width:100%;">üó≥Ô∏è '+t('confirmVote')+'</button>';

// ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÑŸÑÿ™ÿµŸàŸäÿ™ ŸÜÿπŸÖ/ŸÑÿß
html+=buildLiveVoteResults(vote);

}else{
var maxSel=vote.maxSelections||1;
html+='<p style="font-size:0.8rem;color:var(--gold);margin-bottom:10px;">'+t('canSelect')+' '+maxSel+' '+t('options')+'</p>';
html+='<div class="live-vote-options" id="liveVoteOptions'+voteId+'">';
vote.options.forEach(function(opt){
var optId = opt.id || opt._id;
html+='<div class="live-vote-option live-multi-option" data-voteid="'+voteId+'" data-optid="'+optId+'" data-maxsel="'+maxSel+'"><div class="radio"></div><span>'+opt.name+'</span></div>';
});
html+='</div>';
html+='<button class="btn btn-green live-submit-multi" data-voteid="'+voteId+'" style="width:100%;">üó≥Ô∏è '+t('confirmVote')+'</button>';

// ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÑŸÑÿ™ÿµŸàŸäÿ™ ŸÖÿ™ÿπÿØÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
html+=buildLiveVoteResults(vote);
}

html+='</div>';
list.innerHTML+=html;
});

// Attach event listeners after rendering
attachLiveVotingListeners();
}

// ÿØÿßŸÑÿ© ÿ®ŸÜÿßÿ° ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ©
function buildLiveVoteResults(vote){
var voters = vote.voters || [];
var totalVotes = voters.length;

var html='<div class="live-results-section" style="margin-top:20px;padding-top:15px;border-top:1px solid var(--border);">';
html+='<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">';
html+='<span style="font-size:0.9rem;font-weight:600;color:var(--gold);">üìä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ≠ÿßŸÑŸäÿ©</span>';
html+='<span style="font-size:0.8rem;color:var(--muted);">üë• '+totalVotes+' ŸÖÿµŸàŸëÿ™</span>';
html+='</div>';

if(vote.type==='yesno'||!vote.options){
// ÿ≠ÿ≥ÿßÿ® ÿ£ÿµŸàÿßÿ™ ŸÜÿπŸÖ/ŸÑÿß ŸÖŸÜ voters
var yesVotes = 0, noVotes = 0;
voters.forEach(function(v){
if(v.vote === 'yes') yesVotes++;
else if(v.vote === 'no') noVotes++;
});

var yesPercent = totalVotes > 0 ? Math.round((yesVotes/totalVotes)*100) : 0;
var noPercent = totalVotes > 0 ? Math.round((noVotes/totalVotes)*100) : 0;

// ÿ¥ÿ±Ÿäÿ∑ ŸÜÿπŸÖ
html+='<div style="margin-bottom:10px;">';
html+='<div style="display:flex;justify-content:space-between;margin-bottom:4px;">';
html+='<span style="font-size:0.85rem;">‚úÖ ŸÖŸàÿßŸÅŸÇ</span>';
html+='<span style="font-size:0.85rem;font-weight:600;color:var(--green);">'+yesPercent+'%</span>';
html+='</div>';
html+='<div style="background:var(--border);border-radius:10px;height:8px;overflow:hidden;">';
html+='<div style="background:var(--green);height:100%;width:'+yesPercent+'%;transition:width 0.5s;"></div>';
html+='</div>';
html+='</div>';

// ÿ¥ÿ±Ÿäÿ∑ ŸÑÿß
html+='<div style="margin-bottom:5px;">';
html+='<div style="display:flex;justify-content:space-between;margin-bottom:4px;">';
html+='<span style="font-size:0.85rem;">‚ùå ÿ∫Ÿäÿ± ŸÖŸàÿßŸÅŸÇ</span>';
html+='<span style="font-size:0.85rem;font-weight:600;color:var(--red);">'+noPercent+'%</span>';
html+='</div>';
html+='<div style="background:var(--border);border-radius:10px;height:8px;overflow:hidden;">';
html+='<div style="background:var(--red);height:100%;width:'+noPercent+'%;transition:width 0.5s;"></div>';
html+='</div>';
html+='</div>';

}else{
// ÿ™ÿµŸàŸäÿ™ ŸÖÿ™ÿπÿØÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
var optionVotes = {};
vote.options.forEach(function(opt){
var optId = String(opt.id || opt._id);
optionVotes[optId] = 0;
});

// ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿµŸàÿßÿ™ ŸÖŸÜ voters
voters.forEach(function(v){
if(v.selections && v.selections.length > 0){
v.selections.forEach(function(sel){
var selId = String(sel);
if(optionVotes[selId] !== undefined) optionVotes[selId]++;
});
}
});

// ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ÿµŸàÿßÿ™
var sortedOptions = vote.options.slice().sort(function(a,b){
var aId = String(a.id || a._id);
var bId = String(b.id || b._id);
return (optionVotes[bId]||0) - (optionVotes[aId]||0);
});

var maxVotes = 0;
sortedOptions.forEach(function(opt){
var optId = String(opt.id || opt._id);
if(optionVotes[optId] > maxVotes) maxVotes = optionVotes[optId];
});

sortedOptions.forEach(function(opt, idx){
var optId = String(opt.id || opt._id);
var votes = optionVotes[optId] || 0;
var percent = totalVotes > 0 ? Math.round((votes/totalVotes)*100) : 0;
var isWinner = votes > 0 && votes === maxVotes;
var barColor = isWinner ? 'var(--green)' : 'var(--gold)';

html+='<div style="margin-bottom:8px;">';
html+='<div style="display:flex;justify-content:space-between;margin-bottom:3px;">';
html+='<span style="font-size:0.8rem;'+(isWinner?'color:var(--green);font-weight:600;':'')+'">'+opt.name+(isWinner?' üèÜ':'')+'</span>';
html+='<span style="font-size:0.8rem;font-weight:600;">'+percent+'%</span>';
html+='</div>';
html+='<div style="background:var(--border);border-radius:8px;height:6px;overflow:hidden;">';
html+='<div style="background:'+barColor+';height:100%;width:'+percent+'%;transition:width 0.5s;"></div>';
html+='</div>';
html+='</div>';
});
}

html+='</div>';
return html;
}

function attachLiveVotingListeners(){
// Yes/No option click
document.querySelectorAll('.live-yesno-option').forEach(function(opt){
opt.onclick = function(){
var voteId = this.getAttribute('data-voteid');
var option = this.getAttribute('data-option');
selectLiveVoteOption(voteId, option);
};
});

// Multi option click
document.querySelectorAll('.live-multi-option').forEach(function(opt){
opt.onclick = function(){
var voteId = this.getAttribute('data-voteid');
var optId = this.getAttribute('data-optid');
var maxSel = parseInt(this.getAttribute('data-maxsel')) || 1;
toggleLiveMultiOption(voteId, optId, maxSel);
};
});

// Yes/No submit
document.querySelectorAll('.live-submit-yesno').forEach(function(btn){
btn.onclick = function(){
var voteId = this.getAttribute('data-voteid');
submitLiveVote(voteId);
};
});

// Multi submit
document.querySelectorAll('.live-submit-multi').forEach(function(btn){
btn.onclick = function(){
var voteId = this.getAttribute('data-voteid');
submitLiveMultiVote(voteId);
};
});
}

var liveSelectedVotes={};
var liveMultiSelectedOptions={};

window.selectLiveVoteOption=function(voteId,option){
voteId = String(voteId);
liveSelectedVotes[voteId]=option;
var container=document.getElementById('liveVoteOptions'+voteId);
if(!container){
// Try to find by querying
container = document.querySelector('[id="liveVoteOptions'+voteId+'"]');
}
if(!container)return;
var options=container.querySelectorAll('.live-vote-option');
options.forEach(function(opt){opt.classList.remove('selected');});
if(option==='yes' && options[0]) options[0].classList.add('selected');
else if(option==='no' && options[1]) options[1].classList.add('selected');
}

window.toggleLiveMultiOption=function(voteId,optId,maxSelections){
voteId = String(voteId);
optId = String(optId);
if(!liveMultiSelectedOptions[voteId])liveMultiSelectedOptions[voteId]=[];
var selected=liveMultiSelectedOptions[voteId];
var idx=selected.indexOf(optId);

if(idx>-1){
selected.splice(idx,1);
}else{
if(selected.length>=maxSelections){
toast(t('canSelect')+' '+maxSelections+' '+t('options'),true);
return;
}
selected.push(optId);
}

var container=document.getElementById('liveVoteOptions'+voteId);
if(!container){
container = document.querySelector('[id="liveVoteOptions'+voteId+'"]');
}
if(!container)return;
var options=container.querySelectorAll('.live-vote-option');
options.forEach(function(opt){
var oid=opt.getAttribute('data-optid');
if(selected.indexOf(oid)>-1 || selected.indexOf(String(oid))>-1){
opt.classList.add('selected');
}else{
opt.classList.remove('selected');
}
});
}

window.submitLiveVote=async function(voteId){
voteId = String(voteId);
var codeInput=document.querySelector('.live-vote-code-input[data-voteid="'+voteId+'"]');
var code=codeInput?codeInput.value.trim().toUpperCase():'';
var option=liveSelectedVotes[voteId];

if(!code){toast(t('enterVoteCode'),true);return;}
if(!option){toast(t('chooseOption'),true);return;}

// Find vote and member first (needed for both backend and local)
var vote=appData.votes.find(function(v){return String(v.id||v._id)===voteId;});
if(!vote){toast('ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ',true);return;}
if(vote.status!=='open'){toast(t('closed'),true);return;}

var member=appData.members.find(function(m){return m.voteCode===code;});
if(!member){toast('ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠',true);return;}

if(!vote.voters)vote.voters=[];
var alreadyVoted=vote.voters.find(function(v){return String(v.memberId)===String(member.id||member._id);});
if(alreadyVoted){toast('ŸÑŸÇÿØ ÿµŸàŸëÿ™ÿ™ ŸÖÿ≥ÿ®ŸÇÿßŸã',true);return;}

if(USE_BACKEND && window.API){
try{
toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ...');
var result = await window.API.Votes.submitVote(voteId, code, option);
if(result.success){
toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
liveSelectedVotes[voteId]=null;
await loadDataFromBackend();
loadLiveVotingList();
} else {
toast(result.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', true);
}
} catch(err){
// Fallback to local storage if backend fails
console.log('Backend failed, saving locally:', err);
if(!vote.votes)vote.votes={yes:0,no:0};
vote.votes[option]++;
vote.voters.push({memberId:member.id||member._id,memberName:member.name,vote:option,time:new Date().toISOString()});
save();
loadLiveVotingList();
liveSelectedVotes[voteId]=null;
toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ŸÖÿ≠ŸÑŸäÿßŸã ‚úÖ');
}
} else {
if(!vote.votes)vote.votes={yes:0,no:0};
vote.votes[option]++;
vote.voters.push({memberId:member.id||member._id,memberName:member.name,vote:option,time:new Date().toISOString()});

save();
loadLiveVotingList();
liveSelectedVotes[voteId]=null;
toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
}
}

window.submitLiveMultiVote=async function(voteId){
voteId = String(voteId);
var codeInput=document.querySelector('.live-vote-code-input[data-voteid="'+voteId+'"]');
var code=codeInput?codeInput.value.trim().toUpperCase():'';
var selected=liveMultiSelectedOptions[voteId]||[];

if(!code){toast(t('enterVoteCode'),true);return;}

var vote=appData.votes.find(function(v){return String(v.id||v._id)===voteId;});
if(!vote){toast('ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ',true);return;}
if(vote.status!=='open'){toast(t('closed'),true);return;}

var maxSel=vote.maxSelections||1;
if(selected.length===0||selected.length>maxSel){
toast(t('canSelect')+' '+maxSel+' '+t('options'),true);
return;
}

var member=appData.members.find(function(m){return m.voteCode===code;});
if(!member){toast('ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠',true);return;}

if(!vote.voters)vote.voters=[];
var alreadyVoted=vote.voters.find(function(v){return String(v.memberId)===String(member.id||member._id);});
if(alreadyVoted){toast('ŸÑŸÇÿØ ÿµŸàŸëÿ™ÿ™ ŸÖÿ≥ÿ®ŸÇÿßŸã',true);return;}

// Helper function to save vote locally
function saveVoteLocally(){
var selectionNames=[];
selected.forEach(function(optId){
var opt=vote.options.find(function(o){return String(o.id||o._id)===String(optId);});
if(opt){
opt.votes=(opt.votes||0)+1;
selectionNames.push(opt.name);
}
});

vote.voters.push({
memberId:member.id||member._id,
memberName:member.name,
selections:selected,
selectionNames:selectionNames,
time:new Date().toISOString()
});

save();
loadLiveVotingList();
liveMultiSelectedOptions[voteId]=[];
}

if(USE_BACKEND && window.API){
try{
toast('ÿ¨ÿßÿ±Ÿä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ...');
var result = await window.API.Votes.submitVote(voteId, code, null, selected);
if(result.success){
toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
liveMultiSelectedOptions[voteId]=[];
await loadDataFromBackend();
loadLiveVotingList();
} else {
toast(result.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£', true);
}
} catch(err){
// Fallback to local storage if backend fails
console.log('Backend failed, saving locally:', err);
saveVoteLocally();
toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ŸÖÿ≠ŸÑŸäÿßŸã ‚úÖ');
}
} else {
saveVoteLocally();
toast('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿµŸàÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ');
}
}

function loadAdminLiveVotes(){
var select=document.getElementById('adminLiveVote');
if(!select)return;
select.innerHTML='<option value="">-- '+t('noVotes')+' --</option>';
var openVotes=appData.votes.filter(function(v){return v.status==='open';});
openVotes.forEach(function(v){
var selected=appData.liveStream&&appData.liveStream.linkedVoteId===v.id?'selected':'';
select.innerHTML+='<option value="'+v.id+'" '+selected+'>'+v.title+'</option>';
});

// Load saved values
if(appData.liveStream){
var titleInput=document.getElementById('adminLiveTitle');
var urlInput=document.getElementById('adminLiveUrl');
if(titleInput&&appData.liveStream.title)titleInput.value=appData.liveStream.title;
if(urlInput&&appData.liveStream.url)urlInput.value=appData.liveStream.url;
}
}

window.previewLiveStream=function(){
var url=document.getElementById('adminLiveUrl').value.trim();
if(!url){toast('ÿ£ÿØÿÆŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´',true);return;}
var embedUrl=convertToEmbedUrl(url);
if(embedUrl){
window.open(embedUrl,'_blank');
}else{
toast('ÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠',true);
}
}

window.startLiveStream=function(){
var title=document.getElementById('adminLiveTitle').value.trim();
var url=document.getElementById('adminLiveUrl').value.trim();
var linkedVoteId=document.getElementById('adminLiveVote').value;
var isPublic=document.getElementById('adminLivePublic').checked;

if(!url){toast('ÿ£ÿØÿÆŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ®ÿ´',true);return;}

appData.liveStream={
active:true,
title:title||t('liveStream'),
url:url,
linkedVoteId:linkedVoteId?parseInt(linkedVoteId):null,
isPublic:isPublic,
startedAt:new Date().toISOString()
};

save();
loadLiveStreamStatus();
loadLiveVotingList();
document.getElementById('btnLive').classList.remove('hidden');
toast('ÿ™ŸÖ ÿ®ÿØÿ° ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± üî¥');
}

window.stopLiveStream=function(){
if(!appData.liveStream||!appData.liveStream.active){
toast('ŸÑÿß ŸäŸàÿ¨ÿØ ÿ®ÿ´ ŸÜÿ¥ÿ∑',true);
return;
}

appData.liveStream.active=false;
save();
loadLiveStreamStatus();
if(!isAdmin)document.getElementById('btnLive').classList.add('hidden');
toast('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ®ÿ´');
}

window.addEventListener("resize",function(){if(!expandedBylawNode)positionBylawNodes();});
document.addEventListener("keydown",function(e){if(e.key==="Escape"&&expandedBylawNode)closeBylawPanel();});
hideAdmin();
initLanguage();
updateInboxBadge();
initLiveStream();
loadInvLogo();

// Cookie Consent Banner
if(!localStorage.getItem('cookieConsent')){
    var cb = document.getElementById('cookieBanner');
    if(cb) cb.style.display = 'flex';
}

// Privacy page language switcher
window.switchPrivacyLang = function(lang){
    var tabs = document.querySelectorAll('.privacy-tab');
    for(var i=0;i<tabs.length;i++) tabs[i].classList.remove('active');
    event.target.classList.add('active');
    var langs = document.querySelectorAll('.privacy-lang');
    for(var j=0;j<langs.length;j++) langs[j].classList.remove('active');
    var target = document.getElementById(lang === 'no' ? 'privacyNo' : 'privacyAr');
    if(target) target.classList.add('active');
};

// Accept cookies
window.acceptCookies = function(){
    localStorage.setItem('cookieConsent', 'accepted');
    var cb = document.getElementById('cookieBanner');
    if(cb) cb.style.display = 'none';
};

// ========== Photo Gallery ==========
if(!appData.gallery) appData.gallery = [];

window.saveAlbum = function(){
    var title = document.getElementById('albumTitle').value.trim();
    var desc = document.getElementById('albumDesc').value.trim();
    if(!title){toast('ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ',true);return;}
    if(albumPhotos.length===0){toast('ÿ£ÿ∂ŸÅ ÿµŸàÿ±ÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ',true);return;}
    appData.gallery.unshift({
        id:Date.now(), title:title, desc:desc,
        photos:albumPhotos.slice(),
        date:new Date().toISOString().split('T')[0]
    });
    save();
    document.getElementById('albumTitle').value='';
    document.getElementById('albumDesc').value='';
    albumPhotos=[];
    document.getElementById('albumThumbs').innerHTML='';
    loadGallery();loadAdminGallery();
    toast('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ ‚úÖ');
};

var albumPhotos=[];
document.getElementById('albumUploadArea').addEventListener('click',function(){
    document.getElementById('albumFiles').click();
});
document.getElementById('albumFiles').addEventListener('change',function(e){
    var files=e.target.files;
    for(var i=0;i<files.length;i++){
        (function(file){
            var r=new FileReader();
            r.onload=function(ev){
                albumPhotos.push(ev.target.result);
                renderAlbumThumbs();
            };
            r.readAsDataURL(file);
        })(files[i]);
    }
});

function renderAlbumThumbs(){
    var c=document.getElementById('albumThumbs');c.innerHTML='';
    for(var i=0;i<albumPhotos.length;i++){
        c.innerHTML+='<div class="gallery-thumb-wrap"><img src="'+albumPhotos[i]+'" class="gallery-thumb"><button class="gallery-thumb-remove" onclick="removeAlbumPhoto('+i+')">√ó</button></div>';
    }
}
window.removeAlbumPhoto=function(i){albumPhotos.splice(i,1);renderAlbumThumbs();};

function loadGallery(){
    var g=document.getElementById('galleryGrid');if(!g)return;
    g.innerHTML='';
    if(!appData.gallery||appData.gallery.length===0){
        g.innerHTML='<p style="color:var(--muted);text-align:center;padding:40px;grid-column:1/-1;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÑÿ®ŸàŸÖÿßÿ™ ÿ®ÿπÿØ</p>';
        return;
    }
    for(var i=0;i<appData.gallery.length;i++){
        var a=appData.gallery[i];
        var cover=a.photos&&a.photos.length>0?'<img src="'+a.photos[0]+'" class="gallery-album-cover">':'<div class="gallery-album-cover" style="display:flex;align-items:center;justify-content:center;font-size:3rem;">üì∑</div>';
        g.innerHTML+='<div class="gallery-album" onclick="openAlbum('+i+')">'+cover+'<div class="gallery-album-info"><div class="gallery-album-title">'+a.title+'</div><div class="gallery-album-count">üì∑ '+(a.photos?a.photos.length:0)+' ÿµŸàÿ±ÿ©</div><div class="gallery-album-date">'+fmtDate(a.date)+'</div></div></div>';
    }
}

window.openAlbum=function(idx){
    var a=appData.gallery[idx];if(!a)return;
    document.getElementById('galleryContent').style.display='none';
    document.getElementById('galleryAlbumView').style.display='block';
    document.getElementById('albumViewTitle').textContent='üñºÔ∏è '+a.title+' ('+a.photos.length+' ÿµŸàÿ±ÿ©)';
    var c=document.getElementById('albumPhotos');c.innerHTML='';
    for(var i=0;i<a.photos.length;i++){
        c.innerHTML+='<img src="'+a.photos[i]+'" class="gallery-photo" onclick="showLightbox(\''+a.photos[i]+'\')">';
    }
};

window.closeAlbumView=function(){
    document.getElementById('galleryContent').style.display='block';
    document.getElementById('galleryAlbumView').style.display='none';
};

function loadAdminGallery(){
    var c=document.getElementById('adminAlbumList');if(!c)return;
    c.innerHTML='';
    if(!appData.gallery||appData.gallery.length===0){
        c.innerHTML='<p style="color:var(--muted);text-align:center;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÑÿ®ŸàŸÖÿßÿ™</p>';return;
    }
    for(var i=0;i<appData.gallery.length;i++){
        var a=appData.gallery[i];
        c.innerHTML+='<div class="tx-item"><div class="tx-icon inc">üñºÔ∏è</div><div class="tx-info"><div class="tx-title">'+a.title+'</div><div class="tx-date">'+fmtDate(a.date)+' | üì∑ '+(a.photos?a.photos.length:0)+' ÿµŸàÿ±ÿ©</div></div><div class="tx-actions"><button class="btn btn-red btn-sm" onclick="deleteAlbum('+i+')">üóëÔ∏è</button></div></div>';
    }
}

window.deleteAlbum=function(idx){
    if(!confirm('ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ£ŸÑÿ®ŸàŸÖÿü'))return;
    appData.gallery.splice(idx,1);
    save();loadGallery();loadAdminGallery();
    toast('ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ');
};

// Gallery nav button
document.getElementById('btnGallery').addEventListener('click',function(){goTo('gallery');loadGallery();});
document.getElementById('btnManageGallery').addEventListener('click',function(){goTo('manageGallery');loadAdminGallery();});

// Gallery nav button
window.enablePushNotifications=function(){
    if(!('Notification' in window)){
        toast('ŸÖÿ™ÿµŸÅÿ≠ŸÉ ŸÑÿß ŸäÿØÿπŸÖ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™',true);return;
    }
    if(Notification.permission==='granted'){
        toast('ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖŸÅÿπŸëŸÑÿ© ÿ®ÿßŸÑŸÅÿπŸÑ ‚úÖ');return;
    }
    if(Notification.permission==='denied'){
        toast('ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖÿ≠ÿ∏Ÿàÿ±ÿ©. ŸÅÿπŸëŸÑŸáÿß ŸÖŸÜ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠',true);return;
    }
    Notification.requestPermission().then(function(p){
        if(p==='granted'){
            localStorage.setItem('pushEnabled','true');
            toast('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ‚úÖ');
            new Notification('ÿßŸÑÿ¨ÿßŸÑŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ© üáµüá∏',{body:'ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠!',icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üáµüá∏</text></svg>'});
        }else{
            toast('ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™',true);
        }
    });
};

function sendLocalNotification(title,body){
    if(Notification.permission==='granted' && localStorage.getItem('pushEnabled')==='true'){
        new Notification(title,{body:body,icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üáµüá∏</text></svg>'});
    }
}

// Show admin buttons for gallery
var origShowAdmin = window.showAdmin;
if(typeof showAdmin === 'function'){
    var _origShow = showAdmin;
    showAdmin = function(){
        _origShow();
        document.getElementById('btnManageGallery').classList.remove('hidden');
    };
}

// Update hideAdmin to hide gallery button
var origHideAdmin = window.hideAdmin;
if(typeof hideAdmin === 'function'){
    var _origHide = hideAdmin;
    hideAdmin = function(){
        _origHide();
        document.getElementById('btnManageGallery').classList.add('hidden');
    };
}

// Hide push button if already enabled
if(localStorage.getItem('pushEnabled')==='true'){
    var pb=document.getElementById('pushNotifBtn');
    if(pb)pb.style.display='none';
}

})();
</script>
</body>
</html>
